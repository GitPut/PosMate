{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import React,{useEffect,useMemo,useState}from\"react\";import{logout}from\"../../state/firebaseFunctions\";import useWindowDimensions from\"../../components/useWindowDimensions\";import Logo from\"../../assets/dpos-logo.png\";import Ionicons from\"@expo/vector-icons/Ionicons\";import MaterialCommunityIcons from\"@expo/vector-icons/MaterialCommunityIcons\";import StatsScreen from\"./StatsScreen\";import EditStoreDetails from\"../../components/EditStoreDetails\";import ProductAndCatManager from\"./ProductAndCatManager\";import{woocommerceState}from\"../../state/state\";import{auth,db}from\"../../state/firebaseConfig\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tz=require(\"moment-timezone\");var SettingsHome=function SettingsHome(_ref){var navigation=_ref.navigation;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentSettingPage=_useState2[0],setcurrentSettingPage=_useState2[1];var wooCredentials=woocommerceState.use();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),transList=_useState4[0],settransList=_useState4[1];var _useState5=useState({todaysReceiptValue:0,todaysReceipts:0}),_useState6=_slicedToArray(_useState5,2),todaysDetails=_useState6[0],setTodaysDetails=_useState6[1];useEffect(function(){try{var _auth$currentUser;db.collection(\"users\").doc((_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid).collection(\"transList\").get().then(function(querySnapshot){querySnapshot.forEach(function(doc){settransList(function(prevState){return[].concat(_toConsumableArray(prevState),[doc.data()]);});console.log(doc.data());});});}catch(_unused){console.log(\"Error occured retrieving tranasctions\");}if(wooCredentials.useWoocommerce===true){try{var WooCommerceAPI=require(\"woocommerce-api\");var WooCommerce=new WooCommerceAPI({url:wooCredentials.apiUrl,consumerKey:wooCredentials.ck,consumerSecret:wooCredentials.cs,wpAPI:true,version:\"wc/v1\"});var page=1;var orders=[];var getOrders=function(){var _ref2=_asyncToGenerator(function*(){var response=yield WooCommerce.getAsync(\"orders?page=\"+page+\"&per_page=100\");var data=JSON.parse(response.body);orders=[].concat(_toConsumableArray(orders),_toConsumableArray(data));if(data.length===100){page++;getOrders();}else{}});return function getOrders(){return _ref2.apply(this,arguments);};}();getOrders().then(function(){return settransList(function(prevState){return[].concat(_toConsumableArray(prevState),_toConsumableArray(orders));});});}catch(_unused2){console.log(\"Something occured with woo\");}}},[]);useEffect(function(){try{if(transList.length>0){settransList(function(prev){return prev.sort(function(a,b){if(a.date&&b.date){return a.date.seconds-b.date.seconds;}else if(a.date&&b.date_created){var targetTimezone=Intl.DateTimeFormat().resolvedOptions().timeZone;var newDateA=new Date(a.date.seconds*1000);var newDateB=new Date(b.date_created+\"Z\");var resultA=tz(newDateA).tz(targetTimezone,true);var resultB=tz(newDateB).tz(targetTimezone,true);return resultA.valueOf()-resultB.valueOf();}else if(a.date_created&&b.date){var _targetTimezone=Intl.DateTimeFormat().resolvedOptions().timeZone;var _newDateA=new Date(a.date_created+\"Z\");var _newDateB=new Date(b.date.seconds*1000);var _resultA=tz(_newDateA).tz(_targetTimezone,true);var _resultB=tz(_newDateB).tz(_targetTimezone,true);return _resultA.valueOf()-_resultB.valueOf();}else{var _targetTimezone2=Intl.DateTimeFormat().resolvedOptions().timeZone;var _newDateA2=new Date(a.date_created+\"Z\");var _newDateB2=new Date(b.date_created+\"Z\");var _resultA2=tz(_newDateA2).tz(_targetTimezone2,true);var _resultB2=tz(_newDateB2).tz(_targetTimezone2,true);return _resultA2.valueOf()-_resultB2.valueOf();}}).reverse();});var todaysReceiptValue=transList.reduce(function(accumulator,current){var date;var targetTimezone=Intl.DateTimeFormat().resolvedOptions().timeZone;if(current.date){var localDatePreConv=new Date(current.date.seconds*1000);date=tz(localDatePreConv).tz(targetTimezone,true);}else{var _localDatePreConv=new Date(current.date_created+\"Z\");date=tz(_localDatePreConv).tz(targetTimezone,true);}var today=tz().tz(targetTimezone);if(today.year()===date.year()&&today.month()===date.month()&&today.dayOfYear()===date.dayOfYear()){return accumulator+parseFloat(current.date?current.total:current.total/1.13);}else{return accumulator;}},0);var todaysReceipts=transList.reduce(function(accumulator,current){var date;var targetTimezone=Intl.DateTimeFormat().resolvedOptions().timeZone;if(current.date){var localDatePreConv=new Date(current.date.seconds*1000);date=tz(localDatePreConv).tz(targetTimezone,true);}else{var _localDatePreConv2=new Date(current.date_created+\"Z\");date=tz(_localDatePreConv2).tz(targetTimezone,true);}var today=tz().tz(targetTimezone);if(today.year()===date.year()&&today.month()===date.month()&&today.dayOfYear()===date.dayOfYear()){return accumulator+1;}else{return accumulator;}},0);setTodaysDetails({todaysReceiptValue:todaysReceiptValue.toFixed(2),todaysReceipts:todaysReceipts});}}catch(_unused3){console.log(\"Error Occured when sorting dates\");}},[transList]);var Header=function Header(){return useMemo(function(){return _jsxs(View,{style:{width:\"100%\",height:80,flexDirection:\"row\",alignItems:\"center\",justifyContent:\"space-between\",backgroundColor:\"rgba(31,35,48,1)\",paddingLeft:25,paddingRight:25},children:[_jsx(TouchableOpacity,{onPress:function onPress(){return navigation.navigate(\"Home\");},children:_jsx(Ionicons,{name:\"chevron-back\",size:32,color:\"white\"})}),_jsx(Image,{source:Logo,style:{width:200,height:160,resizeMode:\"contain\"}}),_jsxs(TouchableOpacity,{style:{alignItems:\"center\",flexDirection:\"row\"},children:[_jsx(Ionicons,{name:\"help-circle-outline\",size:32,color:\"white\"}),_jsx(Text,{style:{fontSize:20,color:\"white\",marginLeft:10,fontWeight:\"600\"},children:\"Help\"})]})]});},[]);};return _jsx(View,{style:{flex:1,height:height,width:width},children:_jsxs(View,{style:{flexDirection:\"row\",height:\"100%\"},children:[_jsxs(View,{style:{height:\"100%\",width:\"10%\",backgroundColor:\"rgba(31,35,48,1)\",borderTopRightRadius:2,borderBottomRightRadius:2,shadowColor:\"rgba(0,0,0,1)\",shadowOffset:{width:3,height:3},elevation:30,shadowOpacity:0.91,shadowRadius:10,justifyContent:\"center\",alignItems:\"center\"},children:[_jsx(TouchableOpacity,{onPress:function onPress(){return setcurrentSettingPage(null);},style:{backgroundColor:\"rgba(41,44,56,1)\",borderRadius:100,width:60,height:60,alignItems:\"center\",justifyContent:\"center\",marginBottom:30},children:_jsx(Ionicons,{name:\"ios-stats-chart\",size:32,color:currentSettingPage!==\"productManager\"&&currentSettingPage!==\"storeManager\"?\"white\":\"#777777\"})}),_jsx(TouchableOpacity,{onPress:function onPress(){return setcurrentSettingPage(\"productManager\");},style:{backgroundColor:\"rgba(41,44,56,1)\",borderRadius:100,width:60,height:60,alignItems:\"center\",justifyContent:\"center\",marginBottom:30},children:_jsx(MaterialCommunityIcons,{name:\"package-variant-closed\",size:32,color:currentSettingPage===\"productManager\"?\"white\":\"#777777\"})}),_jsx(TouchableOpacity,{onPress:function onPress(){return setcurrentSettingPage(\"storeManager\");},style:{backgroundColor:\"rgba(41,44,56,1)\",borderRadius:100,width:60,height:60,alignItems:\"center\",justifyContent:\"center\",marginBottom:30},children:_jsx(MaterialCommunityIcons,{name:\"store\",size:32,color:currentSettingPage===\"storeManager\"?\"white\":\"#777777\"})}),_jsx(TouchableOpacity,{onPress:logout,style:{backgroundColor:\"rgba(41,44,56,1)\",borderRadius:100,width:60,height:60,alignItems:\"center\",justifyContent:\"center\",marginBottom:30},children:_jsx(MaterialCommunityIcons,{name:\"logout\",size:32,color:\"#777777\"})})]}),_jsxs(View,{style:{width:\"90%\",height:\"100%\"},children:[_jsx(Header,{}),_jsxs(View,{style:{height:height-80,width:\"100%\",backgroundColor:\"white\"},children:[currentSettingPage!==\"productManager\"&&currentSettingPage!==\"storeManager\"&&_jsx(StatsScreen,{transList:transList,todaysDetails:todaysDetails}),currentSettingPage===\"storeManager\"&&_jsx(EditStoreDetails,{}),currentSettingPage===\"productManager\"&&_jsx(ProductAndCatManager,{navigation:navigation})]})]})]})});};export default SettingsHome;var styles=StyleSheet.create({});","map":{"version":3,"names":["React","useEffect","useMemo","useState","logout","useWindowDimensions","Logo","Ionicons","MaterialCommunityIcons","StatsScreen","EditStoreDetails","ProductAndCatManager","woocommerceState","auth","db","tz","require","SettingsHome","navigation","height","width","currentSettingPage","setcurrentSettingPage","wooCredentials","use","transList","settransList","todaysReceiptValue","todaysReceipts","todaysDetails","setTodaysDetails","collection","doc","currentUser","uid","get","then","querySnapshot","forEach","prevState","data","console","log","useWoocommerce","WooCommerceAPI","WooCommerce","url","apiUrl","consumerKey","ck","consumerSecret","cs","wpAPI","version","page","orders","getOrders","response","getAsync","JSON","parse","body","length","prev","sort","a","b","date","seconds","date_created","targetTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","newDateA","Date","newDateB","resultA","resultB","valueOf","reverse","reduce","accumulator","current","localDatePreConv","today","year","month","dayOfYear","parseFloat","total","toFixed","Header","flexDirection","alignItems","justifyContent","backgroundColor","paddingLeft","paddingRight","navigate","resizeMode","fontSize","color","marginLeft","fontWeight","flex","borderTopRightRadius","borderBottomRightRadius","shadowColor","shadowOffset","elevation","shadowOpacity","shadowRadius","borderRadius","marginBottom","styles","StyleSheet","create"],"sources":["/Users/peterputros/Desktop/PosMate/screens/authed/SettingsHome.tsx"],"sourcesContent":["import { Image, StyleSheet, Text, TouchableOpacity, View } from \"react-native\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { Button } from \"@react-native-material/core\";\nimport { logout } from \"state/firebaseFunctions\";\nimport useWindowDimensions from \"components/useWindowDimensions\";\nimport Logo from \"assets/dpos-logo.png\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport StatsScreen from \"./StatsScreen\";\nimport EditStoreDetails from \"components/EditStoreDetails\";\nimport ProductAndCatManager from \"./ProductAndCatManager\";\nimport { woocommerceState } from \"state/state\";\nimport { auth, db } from \"state/firebaseConfig\";\nconst tz = require(\"moment-timezone\");\n\nconst SettingsHome = ({ navigation }) => {\n  const { height, width } = useWindowDimensions();\n  const [currentSettingPage, setcurrentSettingPage] = useState(null);\n  const wooCredentials = woocommerceState.use();\n  const [transList, settransList] = useState([]);\n  const [todaysDetails, setTodaysDetails] = useState({\n    todaysReceiptValue: 0,\n    todaysReceipts: 0,\n  });\n\n  useEffect(() => {\n    try {\n      db.collection(\"users\")\n        .doc(auth.currentUser?.uid)\n        .collection(\"transList\")\n        .get()\n        .then((querySnapshot) => {\n          querySnapshot.forEach((doc) => {\n            // doc.data() is never undefined for query doc snapshots\n            // console.log(doc.id, \" => \", doc.data());\n            settransList((prevState) => [...prevState, doc.data()]);\n            console.log(doc.data());\n          });\n        });\n    } catch {\n      console.log(\"Error occured retrieving tranasctions\");\n    }\n\n    if (wooCredentials.useWoocommerce === true) {\n      try {\n        const WooCommerceAPI = require(\"woocommerce-api\");\n\n        const WooCommerce = new WooCommerceAPI({\n          url: wooCredentials.apiUrl,\n          consumerKey: wooCredentials.ck,\n          consumerSecret: wooCredentials.cs,\n          wpAPI: true,\n          version: \"wc/v1\",\n        });\n\n        let page = 1;\n        let orders = [];\n\n        const getOrders = async () => {\n          const response = await WooCommerce.getAsync(\n            `orders?page=${page}&per_page=100`\n          );\n          const data = JSON.parse(response.body);\n          orders = [...orders, ...data];\n          if (data.length === 100) {\n            page++;\n            getOrders();\n          } else {\n            // console.log(orders);\n          }\n        };\n\n        getOrders().then(() =>\n          settransList((prevState) => [...prevState, ...orders])\n        );\n      } catch {\n        console.log(\"Something occured with woo\");\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    try {\n      if (transList.length > 0) {\n        settransList(prev =>\n          prev.sort(function (a, b) {\n            if (a.date && b.date) {\n              return a.date.seconds - b.date.seconds;\n            } else if (a.date && b.date_created) {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date.seconds * 1000);\n              const newDateB = new Date(b.date_created + \"Z\");\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            } else if (a.date_created && b.date) {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date_created + \"Z\");\n              const newDateB = new Date(b.date.seconds * 1000);\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            } else {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date_created + \"Z\");\n              const newDateB = new Date(b.date_created + \"Z\");\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            }\n          })\n          .reverse());\n        // settransList(sortedTransList);\n        const todaysReceiptValue = transList.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return (\n              accumulator +\n              parseFloat(current.date ? current.total : current.total / 1.13)\n            );\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        const todaysReceipts = transList.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return accumulator + 1;\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        setTodaysDetails({\n          todaysReceiptValue: todaysReceiptValue.toFixed(2),\n          todaysReceipts: todaysReceipts,\n        });\n      }\n    } catch {\n      console.log(\"Error Occured when sorting dates\");\n    }\n  }, [transList]);\n\n  const Header = () =>\n    useMemo(() => {\n      return (\n        <View\n          style={{\n            width: \"100%\",\n            height: 80,\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            backgroundColor: \"rgba(31,35,48,1)\",\n            paddingLeft: 25,\n            paddingRight: 25,\n          }}\n        >\n          <TouchableOpacity onPress={() => navigation.navigate(\"Home\")}>\n            <Ionicons name=\"chevron-back\" size={32} color=\"white\" />\n          </TouchableOpacity>\n          <Image\n            source={Logo}\n            style={{ width: 200, height: 160, resizeMode: \"contain\" }}\n          />\n          <TouchableOpacity\n            // onPress={() => navigation.navigate(\"SettingsHome\")}\n            // change to call help number\n            style={{ alignItems: \"center\", flexDirection: \"row\" }}\n          >\n            <Ionicons name=\"help-circle-outline\" size={32} color=\"white\" />\n            <Text\n              style={{\n                fontSize: 20,\n                color: \"white\",\n                marginLeft: 10,\n                fontWeight: \"600\",\n              }}\n            >\n              Help\n            </Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }, []);\n\n  return (\n    <View style={{ flex: 1, height: height, width: width }}>\n      <View style={{ flexDirection: \"row\", height: \"100%\" }}>\n        <View\n          style={{\n            height: \"100%\",\n            width: \"10%\",\n            backgroundColor: \"rgba(31,35,48,1)\",\n            borderTopRightRadius: 2,\n            borderBottomRightRadius: 2,\n            shadowColor: \"rgba(0,0,0,1)\",\n            shadowOffset: {\n              width: 3,\n              height: 3,\n            },\n            elevation: 30,\n            shadowOpacity: 0.91,\n            shadowRadius: 10,\n            justifyContent: \"center\",\n            alignItems: \"center\",\n          }}\n        >\n          <TouchableOpacity\n            onPress={() => setcurrentSettingPage(null)}\n            style={{\n              backgroundColor: \"rgba(41,44,56,1)\",\n              borderRadius: 100,\n              width: 60,\n              height: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 30,\n            }}\n          >\n            <Ionicons\n              name=\"ios-stats-chart\"\n              size={32}\n              color={\n                currentSettingPage !== \"productManager\" &&\n                currentSettingPage !== \"storeManager\"\n                  ? \"white\"\n                  : \"#777777\"\n              }\n            />\n          </TouchableOpacity>\n          <TouchableOpacity\n            onPress={() => setcurrentSettingPage(\"productManager\")}\n            style={{\n              backgroundColor: \"rgba(41,44,56,1)\",\n              borderRadius: 100,\n              width: 60,\n              height: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 30,\n            }}\n          >\n            <MaterialCommunityIcons\n              name=\"package-variant-closed\"\n              size={32}\n              color={\n                currentSettingPage === \"productManager\" ? \"white\" : \"#777777\"\n              }\n            />\n          </TouchableOpacity>\n          <TouchableOpacity\n            onPress={() => setcurrentSettingPage(\"storeManager\")}\n            style={{\n              backgroundColor: \"rgba(41,44,56,1)\",\n              borderRadius: 100,\n              width: 60,\n              height: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 30,\n            }}\n          >\n            <MaterialCommunityIcons\n              name=\"store\"\n              size={32}\n              color={\n                currentSettingPage === \"storeManager\" ? \"white\" : \"#777777\"\n              }\n            />\n          </TouchableOpacity>\n          <TouchableOpacity\n            onPress={logout}\n            style={{\n              backgroundColor: \"rgba(41,44,56,1)\",\n              borderRadius: 100,\n              width: 60,\n              height: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              marginBottom: 30,\n            }}\n          >\n            <MaterialCommunityIcons name=\"logout\" size={32} color=\"#777777\" />\n          </TouchableOpacity>\n        </View>\n        <View style={{ width: \"90%\", height: \"100%\" }}>\n          <Header />\n          {/* <MenuScreen catalog={catalog} navigation={navigation} /> */}\n          <View\n            style={{\n              height: height - 80,\n              width: \"100%\",\n              backgroundColor: \"white\",\n            }}\n          >\n            {/* <Text>HEllo</Text> */}\n            {currentSettingPage !== \"productManager\" &&\n              currentSettingPage !== \"storeManager\" && (\n                <StatsScreen\n                  transList={transList}\n                  todaysDetails={todaysDetails}\n                />\n              )}\n            {currentSettingPage === \"storeManager\" && <EditStoreDetails />}\n            {currentSettingPage === \"productManager\" && (\n              <ProductAndCatManager navigation={navigation} />\n            )}\n          </View>\n        </View>\n      </View>\n    </View>\n    // <View>\n    //   <Text>Settings Home</Text>\n    //   <Button\n    //     title=\"Edit Categories\"\n    //     onPress={() => navigation.navigate(\"EditCategories\")}\n    //     style={{ marginBottom: 15 }}\n    //   />\n    //   <Button\n    //     title=\"Edit Products\"\n    //     onPress={() => navigation.navigate(\"EditProductList\")}\n    //     style={{ marginBottom: 15 }}\n    //   />\n    //   <Button\n    //     title=\"Edit Woocommerce Settings\"\n    //     onPress={() => navigation.navigate(\"EditWoocommerce\")}\n    //     style={{ marginBottom: 15 }}\n    //   />\n    //   <Button\n    //     title=\"Edit Store Details\"\n    //     onPress={() => navigation.navigate(\"StoreDetails\")}\n    //     style={{ marginBottom: 15 }}\n    //   />\n    //   <Button\n    //     title=\"View Transactions\"\n    //     onPress={() => navigation.navigate(\"Transactions\")}\n    //     style={{ marginBottom: 15 }}\n    //   />\n    //   <Button title=\"Logout\" onPress={logout} style={{ marginBottom: 15 }} />\n    // </View>\n  );\n};\n\nexport default SettingsHome;\n\nconst styles = StyleSheet.create({});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}