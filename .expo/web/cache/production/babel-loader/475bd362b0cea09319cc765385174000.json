{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Modal from\"react-native-web/dist/exports/Modal\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import React,{useState}from\"react\";import{Text}from\"@react-native-material/core\";import{transListState}from\"../state/state\";import{updateTransList}from\"../state/firebaseFunctions\";import ChangeScreen from\"./ChangeScreen\";import MaterialCommunityIcons from\"@expo/vector-icons/MaterialCommunityIcons\";import useWindowDimensions from\"./useWindowDimensions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CompletePaymentPhoneOrder=function CompletePaymentPhoneOrder(_ref){var setongoingOrderListModal=_ref.setongoingOrderListModal;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;var transList=transListState.use();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),changeModal=_useState2[0],setChangeModal=_useState2[1];var _useState3=useState({element:null,index:null}),_useState4=_slicedToArray(_useState3,2),currentOrder=_useState4[0],setcurrentOrder=_useState4[1];return _jsx(View,{style:{backgroundColor:\"rgba(0, 0, 0, 0.3)\",justifyContent:\"center\",alignItems:\"center\",height:height,width:width},children:_jsxs(View,{style:{backgroundColor:\"white\",height:height*0.7,width:height*0.7,borderRadius:30,shadowColor:\"rgba(0,0,0,1)\",shadowOffset:{width:3,height:3},elevation:30,shadowOpacity:0.57,shadowRadius:10},children:[_jsxs(View,{style:{flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\"},children:[_jsx(MaterialCommunityIcons,{onPress:function onPress(){return setongoingOrderListModal(false);},name:\"close\",size:26,color:\"rgba(74,74,74,1)\",style:{width:\"25%\",marginLeft:20}}),_jsx(Text,{style:{margin:25,fontSize:20,fontWeight:\"600\",width:\"50%\",textAlign:\"center\"},children:\"Pending Orders\"}),_jsx(View,{style:{width:\"25%\"}})]}),_jsx(ScrollView,{contentContainerStyle:styles.contentContainer,children:transList?transList==null?void 0:transList.map(function(element,index){try{if(element.id){var _element$id,_element$id2;if(((_element$id=element.id)==null?void 0:_element$id.substr(((_element$id2=element.id)==null?void 0:_element$id2.length)-2,2))===\"-l\"&&element.completed===false&&element.cancelled!==true){var _element$customer;var date=element.date?new Date(element.date.seconds*1000):element.date_created?new Date(element.date_created):null;return _jsxs(View,{style:{backgroundColor:\"rgba(243,243,243,1)\",borderRadius:30,width:\"100%\",height:68,padding:30,flexDirection:\"row\",alignItems:\"center\",justifyContent:\"space-between\",marginBottom:20},children:[_jsxs(View,{style:{flexDirection:\"row\",alignItems:\"center\",justifyContent:\"space-between\",width:\"60%\"},children:[_jsx(Text,{children:(_element$customer=element.customer)==null?void 0:_element$customer.name}),_jsx(Text,{children:date==null?void 0:date.toLocaleTimeString()})]}),_jsx(View,{style:{borderRightWidth:1,height:35,backgroundColor:\"black\"}}),element.method===\"pickupOrder\"?_jsx(MaterialCommunityIcons,{onPress:function onPress(){if(element.method===\"pickupOrder\"){setChangeModal(true);setcurrentOrder({element:element,index:index});}else{var localChange=structuredClone(transList);localChange[index].completed=true;updateTransList(localChange);}},name:\"store\",size:26,color:\"rgba(74,74,74,1)\"}):_jsx(MaterialCommunityIcons,{onPress:function onPress(){if(element.method===\"pickupOrder\"){setChangeModal(true);setcurrentOrder({element:element,index:index});}else{var localChange=structuredClone(transList);localChange[index].completed=true;updateTransList(localChange);}},name:\"car\",size:26,color:\"rgba(74,74,74,1)\"}),_jsx(MaterialCommunityIcons,{onPress:function onPress(){var localChange=structuredClone(transList);localChange[index].cancelled=true;updateTransList(localChange);},name:\"cancel\",size:26,color:\"rgba(74,74,74,1)\"})]},index);}}}catch(_unused){console.log(\"Error at complete phone order\");}}):_jsx(Text,{children:\"No Orders Yet\"})}),_jsx(Modal,{visible:changeModal,transparent:true,children:_jsx(ChangeScreen,{setChangeModal:setChangeModal,setcurrentOrder:setcurrentOrder,order:currentOrder.element,completeOrder:function completeOrder(){var localChange=structuredClone(transList);localChange[currentOrder.index].completed=true;updateTransList(localChange);setChangeModal(false);},goBack:function goBack(){setcurrentOrder({element:null,index:null});setChangeModal(false);}})})]})});};export default CompletePaymentPhoneOrder;var styles=StyleSheet.create({contentContainer:{justifyContent:\"space-between\",paddingLeft:50,paddingRight:50,paddingBottom:50,height:\"95%\",width:\"100%\",alignItems:\"center\"}});","map":{"version":3,"names":["React","useState","Text","transListState","updateTransList","ChangeScreen","MaterialCommunityIcons","useWindowDimensions","CompletePaymentPhoneOrder","setongoingOrderListModal","height","width","transList","use","changeModal","setChangeModal","element","index","currentOrder","setcurrentOrder","backgroundColor","justifyContent","alignItems","borderRadius","shadowColor","shadowOffset","elevation","shadowOpacity","shadowRadius","flexDirection","marginLeft","margin","fontSize","fontWeight","textAlign","styles","contentContainer","map","id","substr","length","completed","cancelled","date","Date","seconds","date_created","padding","marginBottom","customer","name","toLocaleTimeString","borderRightWidth","method","localChange","structuredClone","console","log","StyleSheet","create","paddingLeft","paddingRight","paddingBottom"],"sources":["/Users/peterputros/Desktop/PosMate/components/CompletePaymentPhoneOrder.tsx"],"sourcesContent":["import {\n  Modal,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { storeDetailState, transListState } from \"state/state\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport useWindowDimensions from \"./useWindowDimensions\";\n\nconst CompletePaymentPhoneOrder = ({ setongoingOrderListModal }) => {\n  const { height, width } = useWindowDimensions();\n  const transList = transListState.use();\n  const [changeModal, setChangeModal] = useState(false);\n  const [currentOrder, setcurrentOrder] = useState({\n    element: null,\n    index: null,\n  });\n\n  return (\n    <View\n      style={{\n        backgroundColor: \"rgba(0, 0, 0, 0.3)\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: height,\n        width: width,\n      }}\n    >\n      <View\n        style={{\n          backgroundColor: \"white\",\n          height: height * 0.7,\n          width: height * 0.7,\n          borderRadius: 30,\n          shadowColor: \"rgba(0,0,0,1)\",\n          shadowOffset: {\n            width: 3,\n            height: 3,\n          },\n          elevation: 30,\n          shadowOpacity: 0.57,\n          shadowRadius: 10,\n        }}\n      >\n        <View\n          style={{\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n          }}\n        >\n          <MaterialCommunityIcons\n            onPress={() => setongoingOrderListModal(false)}\n            name=\"close\"\n            size={26}\n            color=\"rgba(74,74,74,1)\"\n            style={{ width: \"25%\", marginLeft: 20 }}\n          />\n          <Text\n            style={{\n              margin: 25,\n              fontSize: 20,\n              fontWeight: \"600\",\n              width: \"50%\",\n              textAlign: \"center\",\n            }}\n          >\n            Pending Orders\n          </Text>\n          <View style={{ width: \"25%\" }} />\n        </View>\n        <ScrollView contentContainerStyle={styles.contentContainer}>\n          {transList ? (\n            transList?.map((element, index) => {\n              try {\n                if (element.id) {\n                  if (\n                    element.id?.substr(element.id?.length - 2, 2) === \"-l\" &&\n                    element.completed === false &&\n                    element.cancelled !== true\n                  ) {\n                    const date = element.date\n                      ? new Date(element.date.seconds * 1000)\n                      : element.date_created\n                      ? new Date(element.date_created)\n                      : null;\n\n                    return (\n                      <View\n                        style={{\n                          backgroundColor: \"rgba(243,243,243,1)\",\n                          borderRadius: 30,\n                          width: \"100%\",\n                          height: 68,\n                          padding: 30,\n                          flexDirection: \"row\",\n                          alignItems: \"center\",\n                          justifyContent: \"space-between\",\n                          marginBottom: 20,\n                        }}\n                        key={index}\n                      >\n                        <View\n                          style={{\n                            flexDirection: \"row\",\n                            alignItems: \"center\",\n                            justifyContent: \"space-between\",\n                            width: \"60%\",\n                          }}\n                        >\n                          <Text>{element.customer?.name}</Text>\n                          <Text>{date?.toLocaleTimeString()}</Text>\n                        </View>\n                        <View\n                          style={{\n                            borderRightWidth: 1,\n                            height: 35,\n                            backgroundColor: \"black\",\n                          }}\n                        />\n                        {element.method === \"pickupOrder\" ? (\n                          <MaterialCommunityIcons\n                            onPress={() => {\n                              if (element.method === \"pickupOrder\") {\n                                setChangeModal(true);\n                                setcurrentOrder({\n                                  element: element,\n                                  index: index,\n                                });\n                              } else {\n                                const localChange = structuredClone(transList);\n                                localChange[index].completed = true;\n                                updateTransList(localChange);\n                              }\n                            }}\n                            name=\"store\"\n                            size={26}\n                            color=\"rgba(74,74,74,1)\"\n                          />\n                        ) : (\n                          <MaterialCommunityIcons\n                            onPress={() => {\n                              if (element.method === \"pickupOrder\") {\n                                setChangeModal(true);\n                                setcurrentOrder({\n                                  element: element,\n                                  index: index,\n                                });\n                              } else {\n                                const localChange = structuredClone(transList);\n                                localChange[index].completed = true;\n                                updateTransList(localChange);\n                              }\n                            }}\n                            name=\"car\"\n                            size={26}\n                            color=\"rgba(74,74,74,1)\"\n                          />\n                        )}\n                        <MaterialCommunityIcons\n                          onPress={() => {\n                            const localChange = structuredClone(transList);\n                            localChange[index].cancelled = true;\n                            updateTransList(localChange);\n                          }}\n                          name=\"cancel\"\n                          size={26}\n                          color=\"rgba(74,74,74,1)\"\n                        />\n                        {/* <Text>\n                      Method:{\" \"}\n                      {element.method === \"pickupOrder\"\n                        ? \"Pick Up\"\n                        : \"Delivery\"}\n                    </Text> */}\n                        {/* <Button\n                      title=\"Complete Order\"\n                      onPress={() => {\n                        if (element.method === \"pickupOrder\") {\n                          setChangeModal(true);\n                          setcurrentOrder({ element: element, index: index });\n                        } else {\n                          const localChange = structuredClone(transList);\n                          localChange[index].completed = true;\n                          updateTransList(localChange);\n                        }\n                      }}\n                      style={{ marginBottom: 10 }}\n                    />\n                    <Button\n                      title=\"Cancel Order\"\n                      onPress={() => {\n                        const localChange = structuredClone(transList);\n                        localChange[index].cancelled = true;\n                        updateTransList(localChange);\n                      }}\n                    /> */}\n                      </View>\n                    );\n                  }\n                }\n              } catch {\n                console.log(\"Error at complete phone order\");\n              }\n            })\n          ) : (\n            <Text>No Orders Yet</Text>\n          )}\n        </ScrollView>\n        <Modal visible={changeModal} transparent={true}>\n          <ChangeScreen\n            setChangeModal={setChangeModal}\n            setcurrentOrder={setcurrentOrder}\n            order={currentOrder.element}\n            completeOrder={() => {\n              const localChange = structuredClone(transList);\n              localChange[currentOrder.index].completed = true;\n              updateTransList(localChange);\n              setChangeModal(false);\n            }}\n            goBack={() => {\n              setcurrentOrder({\n                element: null,\n                index: null,\n              });\n              setChangeModal(false);\n            }}\n          />\n        </Modal>\n      </View>\n    </View>\n  );\n};\n\nexport default CompletePaymentPhoneOrder;\n\nconst styles = StyleSheet.create({\n  contentContainer: {\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"95%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}