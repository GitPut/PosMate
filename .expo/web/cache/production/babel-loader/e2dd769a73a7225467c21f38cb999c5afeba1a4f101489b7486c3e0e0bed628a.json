{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import{useEffect,useRef}from'react';import{initialUpdaterRun}from\"../animation\";import{makeMutable,startMapper,stopMapper}from\"../core\";import{shouldBeUseWeb}from\"../PlatformChecker\";var _worklet_6829278738812_init_data={code:\"function anonymous(){const{sharedValue,processor}=this._closure;sharedValue.value=processor();}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useDerivedValue.js\"};export function useDerivedValue(processor,dependencies){var _processor$_closure;var initRef=useRef(null);var inputs=Object.values((_processor$_closure=processor._closure)!=null?_processor$_closure:{});if(shouldBeUseWeb()){var _dependencies;if(!inputs.length&&(_dependencies=dependencies)!==null&&_dependencies!==void 0&&_dependencies.length){inputs=dependencies;}}if(dependencies===undefined){dependencies=[].concat(_toConsumableArray(inputs),[processor.__workletHash]);}else{dependencies.push(processor.__workletHash);}if(initRef.current===null){initRef.current=makeMutable(initialUpdaterRun(processor));}var sharedValue=initRef.current;useEffect(function(){var fun=function(){var _f=function _f(){sharedValue.value=processor();};_f._closure={sharedValue:sharedValue,processor:processor};_f.__initData=_worklet_6829278738812_init_data;_f.__workletHash=6829278738812;return _f;}();var mapperId=startMapper(fun,inputs,[sharedValue]);return function(){stopMapper(mapperId);};},dependencies);useEffect(function(){return function(){initRef.current=null;};},[]);return sharedValue;}","map":{"version":3,"mappings":"yEAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,iBAAiB,oBAE1B,OAASC,WAAW,CAAEC,WAAW,CAAEC,UAAU,eAE7C,OAASC,cAAc,0BAA4B,gRAInD,MAAO,SAASC,gBAAeA,CAC7BC,SAAkC,CAClCC,YAA4B,CACX,yBACjB,GAAMC,QAAO,CAAGT,MAAM,CAAwB,IAAI,CAAC,CACnD,GAAIU,OAAM,CAAGC,MAAM,CAACC,MAAM,sBAACL,SAAS,CAACM,QAAQ,4BAAI,CAAC,CAAC,CAAC,CACpD,GAAIR,cAAc,EAAE,CAAE,mBACpB,GAAI,CAACK,MAAM,CAACI,MAAM,iBAAIN,YAAY,kCAAZO,cAAcD,MAAM,CAAE,CAE1CJ,MAAM,CAAGF,YAAY,CACvB,CACF,CAGA,GAAIA,YAAY,GAAKQ,SAAS,CAAE,CAC9BR,YAAY,8BAAOE,MAAM,GAAEH,SAAS,CAACU,aAAa,EAAC,CACrD,CAAC,IAAM,CACLT,YAAY,CAACU,IAAI,CAACX,SAAS,CAACU,aAAa,CAAC,CAC5C,CAEA,GAAIR,OAAO,CAACU,OAAO,GAAK,IAAI,CAAE,CAC5BV,OAAO,CAACU,OAAO,CAAGjB,WAAW,CAACD,iBAAiB,CAACM,SAAS,CAAC,CAAC,CAC7D,CAGA,GAAMa,YAA2B,CAAGX,OAAO,CAACU,OAAQ,CAEpDpB,SAAS,CAAC,UAAM,CACd,GAAMsB,IAAG,gCAAS,CAEhBD,WAAW,CAACE,KAAK,CAAGf,SAAS,EAAE,CACjC,CAAC,0BAvCLa,WAASnB,oBAAiB,6FAuCrB,CACD,GAAMsB,SAAQ,CAAGpB,WAAW,CAACkB,GAAG,CAAEX,MAAM,CAAE,CAACU,WAAW,CAAC,CAAC,CACxD,MAAO,WAAM,CACXhB,UAAU,CAACmB,QAAQ,CAAC,CACtB,CAAC,CACH,CAAC,CAAEf,YAAY,CAAC,CAEhBT,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,CACXU,OAAO,CAACU,OAAO,CAAG,IAAI,CACxB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAOC,YAAW,CACpB","names":["useEffect","useRef","initialUpdaterRun","makeMutable","startMapper","stopMapper","shouldBeUseWeb","useDerivedValue","processor","dependencies","initRef","inputs","Object","values","_closure","length","_dependencies","undefined","__workletHash","push","current","sharedValue","fun","value","mapperId"],"sources":["/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/hook/useDerivedValue.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport { initialUpdaterRun } from '../animation';\nimport { BasicWorkletFunction, SharedValue } from '../commonTypes';\nimport { makeMutable, startMapper, stopMapper } from '../core';\nimport { DependencyList } from './commonTypes';\nimport { shouldBeUseWeb } from '../PlatformChecker';\n\nexport type DerivedValue<T> = Readonly<SharedValue<T>>;\n\nexport function useDerivedValue<T>(\n  processor: BasicWorkletFunction<T>,\n  dependencies: DependencyList\n): DerivedValue<T> {\n  const initRef = useRef<SharedValue<T> | null>(null);\n  let inputs = Object.values(processor._closure ?? {});\n  if (shouldBeUseWeb()) {\n    if (!inputs.length && dependencies?.length) {\n      // let web work without a Babel/SWC plugin\n      inputs = dependencies;\n    }\n  }\n\n  // build dependencies\n  if (dependencies === undefined) {\n    dependencies = [...inputs, processor.__workletHash];\n  } else {\n    dependencies.push(processor.__workletHash);\n  }\n\n  if (initRef.current === null) {\n    initRef.current = makeMutable(initialUpdaterRun(processor));\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const sharedValue: SharedValue<T> = initRef.current!;\n\n  useEffect(() => {\n    const fun = () => {\n      'worklet';\n      sharedValue.value = processor();\n    };\n    const mapperId = startMapper(fun, inputs, [sharedValue]);\n    return () => {\n      stopMapper(mapperId);\n    };\n  }, dependencies);\n\n  useEffect(() => {\n    return () => {\n      initRef.current = null;\n    };\n  }, []);\n\n  return sharedValue;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}