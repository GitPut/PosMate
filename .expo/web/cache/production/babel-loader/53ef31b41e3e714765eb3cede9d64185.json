{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import View from\"react-native-web/dist/exports/View\";import React,{useState}from\"react\";import{Text,TextInput}from\"@react-native-material/core\";import{storeDetailState}from\"../state/state\";import Feather from\"@expo/vector-icons/Feather\";import Ionicons from\"@expo/vector-icons/Ionicons\";import useWindowDimensions from\"./useWindowDimensions\";import{useFonts}from\"expo-font\";import Axios from\"axios\";import{auth}from\"../state/firebaseConfig\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SettingsPasswordModal=function SettingsPasswordModal(_ref){var setsettingsPasswordModalVis=_ref.setsettingsPasswordModalVis,navigation=_ref.navigation;var _useWindowDimensions=useWindowDimensions(),height=_useWindowDimensions.height,width=_useWindowDimensions.width;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setpassword=_useState2[1];var storeDetails=storeDetailState.use();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inccorectPass=_useState4[0],setinccorectPass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];useFonts({Password:require(\"../assets/password.ttf\")});var SendEmail=function SendEmail(){var _auth$currentUser;var data=JSON.stringify({email:(_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.email,password:storeDetails.settingsPassword});var config={method:\"post\",maxBodyLength:Infinity,url:\"https://us-central1-posmate-5fc0a.cloudfunctions.net/sendSettingsPass\",headers:{\"Content-Type\":\"application/json\"},data:data};Axios(config).then(function(response){console.log(JSON.stringify(response.data));alert(\"Settings password has been sent to your account email\");}).catch(function(error){alert(error);});};return _jsxs(_Fragment,{children:[_jsx(TouchableOpacity,{onPress:function onPress(){return setsettingsPasswordModalVis(false);},style:{backgroundColor:\"rgba(0, 0, 0, 0.3)\",justifyContent:\"center\",alignItems:\"center\",height:height,width:width}}),_jsxs(View,{style:{backgroundColor:\"white\",height:300,width:350,borderRadius:30,shadowColor:\"rgba(0,0,0,1)\",shadowOffset:{width:3,height:3},elevation:30,shadowOpacity:0.57,shadowRadius:10,position:\"absolute\",top:height*0.15,right:width*0.22,alignItems:\"center\"},children:[_jsx(Text,{style:{marginTop:20,fontSize:20,fontWeight:\"600\",width:\"50%\",textAlign:\"center\",marginBottom:5},children:\"Settings\"}),_jsx(Text,{style:{marginBottom:25,color:\"rgba(74,74,74,1)\",fontWeight:\"600\",width:\"50%\",textAlign:\"center\"},children:\"Authorization\"}),_jsxs(View,{style:{flexDirection:\"row\",alignItems:\"center\",backgroundColor:\"rgba(241,241,241,1)\",borderRadius:30,height:60,marginBottom:25},children:[_jsx(View,{style:{width:60,alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"rgba(218,216,216,1)\",borderRadius:30,height:60},children:_jsx(Ionicons,{name:\"finger-print\",size:32,color:\"rgba(71,106,229,1)\"})}),_jsx(TextInput,{color:\"black\",placeholder:\"Enter Password\",inputStyle:[{width:200},{backgroundColor:\"rgba(241,241,241,1)\"},!showPassword&&password.length!==0&&{fontFamily:\"Password\"}],value:password,onChangeText:function onChangeText(val){return setpassword(val);},textContentType:\"none\",autoCorrect:false}),_jsx(View,{style:{width:60,alignItems:\"center\",justifyContent:\"center\",height:60},children:!showPassword?_jsx(Ionicons,{name:\"eye\",size:32,color:\"rgba(74,74,74,1)\",onPress:function onPress(){return setShowPassword(function(prev){return!prev;});}}):_jsx(Ionicons,{name:\"eye-off\",size:32,color:\"rgba(74,74,74,1)\",onPress:function onPress(){return setShowPassword(function(prev){return!prev;});}})})]}),inccorectPass&&_jsx(Text,{style:{marginBottom:10},children:\"Password is inccorect!\"}),_jsxs(TouchableOpacity,{style:{backgroundColor:\"rgba(155,155,155,1)\",borderRadius:30,width:150,height:61,flexDirection:\"row\",alignItems:\"center\",justifyContent:\"center\"},onPress:function onPress(){if(password==storeDetails.settingsPassword){navigation.navigate(\"settings\");setsettingsPasswordModalVis(false);setinccorectPass(false);}else{setinccorectPass(true);}},children:[_jsx(Text,{style:{color:\"white\",fontSize:20,paddingRight:10},children:\"Go\"}),_jsx(Feather,{name:\"arrow-up-right\",size:32,color:\"white\"})]}),_jsx(TouchableOpacity,{onPress:SendEmail,style:{marginTop:10},children:_jsx(Text,{style:{color:\"blue\",fontSize:14},children:\"Forgot Password?\"})})]})]});};export default SettingsPasswordModal;var styles=StyleSheet.create({contentContainer:{justifyContent:\"space-between\",paddingLeft:50,paddingRight:50,paddingBottom:50,height:\"95%\",width:\"100%\",alignItems:\"center\"}});","map":{"version":3,"names":["React","useState","Text","TextInput","storeDetailState","Feather","Ionicons","useWindowDimensions","useFonts","Axios","auth","SettingsPasswordModal","setsettingsPasswordModalVis","navigation","height","width","password","setpassword","storeDetails","use","inccorectPass","setinccorectPass","showPassword","setShowPassword","Password","require","SendEmail","data","JSON","stringify","email","currentUser","settingsPassword","config","method","maxBodyLength","Infinity","url","headers","then","response","console","log","alert","catch","error","backgroundColor","justifyContent","alignItems","borderRadius","shadowColor","shadowOffset","elevation","shadowOpacity","shadowRadius","position","top","right","marginTop","fontSize","fontWeight","textAlign","marginBottom","color","flexDirection","length","fontFamily","val","prev","navigate","paddingRight","styles","StyleSheet","create","contentContainer","paddingLeft","paddingBottom"],"sources":["/Users/peterputros/Desktop/PosMate/components/SettingsPasswordModal.tsx"],"sourcesContent":["import {\n  Modal,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text, TextInput } from \"@react-native-material/core\";\nimport { storeDetailState, transListState, userStoreState } from \"state/state\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport Feather from \"@expo/vector-icons/Feather\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport useWindowDimensions from \"./useWindowDimensions\";\nimport { useFonts } from \"expo-font\";\nimport Axios from \"axios\";\nimport { auth } from \"state/firebaseConfig\";\n\nconst SettingsPasswordModal = ({ setsettingsPasswordModalVis, navigation }) => {\n  const { height, width } = useWindowDimensions();\n  const [password, setpassword] = useState(\"\");\n  const storeDetails = storeDetailState.use();\n  const [inccorectPass, setinccorectPass] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n\n  useFonts({\n    Password: require(\"/assets/password.ttf\"),\n  });\n\n  const SendEmail = () => {\n    var data = JSON.stringify({\n      email: auth.currentUser?.email,\n      password: storeDetails.settingsPassword,\n    });\n\n    var config = {\n      method: \"post\",\n      maxBodyLength: Infinity,\n      url: \"https://us-central1-posmate-5fc0a.cloudfunctions.net/sendSettingsPass\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      data: data,\n    };\n\n    Axios(config)\n      .then(function (response) {\n        console.log(JSON.stringify(response.data));\n        alert(\"Settings password has been sent to your account email\");\n      })\n      .catch(function (error) {\n        alert(error);\n      });\n  };\n\n  return (\n    <>\n      <TouchableOpacity\n        onPress={() => setsettingsPasswordModalVis(false)}\n        style={{\n          backgroundColor: \"rgba(0, 0, 0, 0.3)\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: height,\n          width: width,\n        }}\n      />\n      <View\n        style={{\n          backgroundColor: \"white\",\n          height: 300,\n          width: 350,\n          borderRadius: 30,\n          shadowColor: \"rgba(0,0,0,1)\",\n          shadowOffset: {\n            width: 3,\n            height: 3,\n          },\n          elevation: 30,\n          shadowOpacity: 0.57,\n          shadowRadius: 10,\n          position: \"absolute\",\n          top: height * 0.15,\n          right: width * 0.22,\n          alignItems: \"center\",\n        }}\n      >\n        <Text\n          style={{\n            marginTop: 20,\n            fontSize: 20,\n            fontWeight: \"600\",\n            width: \"50%\",\n            textAlign: \"center\",\n            marginBottom: 5,\n          }}\n        >\n          Settings\n        </Text>\n        <Text\n          style={{\n            marginBottom: 25,\n            color: \"rgba(74,74,74,1)\",\n            fontWeight: \"600\",\n            width: \"50%\",\n            textAlign: \"center\",\n          }}\n        >\n          Authorization\n        </Text>\n        <View\n          style={{\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            backgroundColor: \"rgba(241,241,241,1)\",\n            borderRadius: 30,\n            height: 60,\n            marginBottom: 25,\n          }}\n        >\n          <View\n            style={{\n              width: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              backgroundColor: \"rgba(218,216,216,1)\",\n              borderRadius: 30,\n              height: 60,\n            }}\n          >\n            <Ionicons\n              name=\"finger-print\"\n              size={32}\n              color=\"rgba(71,106,229,1)\"\n            />\n          </View>\n          <TextInput\n            color=\"black\"\n            placeholder=\"Enter Password\"\n            inputStyle={[\n              { width: 200 },\n              { backgroundColor: \"rgba(241,241,241,1)\" },\n              !showPassword &&\n                password.length !== 0 && { fontFamily: \"Password\" },\n            ]}\n            value={password}\n            onChangeText={(val) => setpassword(val)}\n            textContentType=\"none\"\n            autoCorrect={false}\n          />\n          {/* <input\n            type={showPassword ? \"text\" : \"password\"}\n            value={password}\n            onChange={(event) => setpassword(event.target.value)}\n            onFocus={() => setShowPassword(false)}\n          /> */}\n          <View\n            style={{\n              width: 60,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              height: 60,\n            }}\n          >\n            {!showPassword ? (\n              <Ionicons\n                name=\"eye\"\n                size={32}\n                color=\"rgba(74,74,74,1)\"\n                onPress={() => setShowPassword((prev) => !prev)}\n              />\n            ) : (\n              <Ionicons\n                name=\"eye-off\"\n                size={32}\n                color=\"rgba(74,74,74,1)\"\n                onPress={() => setShowPassword((prev) => !prev)}\n              />\n            )}\n          </View>\n        </View>\n        {inccorectPass && (\n          <Text style={{ marginBottom: 10 }}>Password is inccorect!</Text>\n        )}\n        <TouchableOpacity\n          style={{\n            backgroundColor: \"rgba(155,155,155,1)\",\n            borderRadius: 30,\n            width: 150,\n            height: 61,\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}\n          onPress={() => {\n            if (password == storeDetails.settingsPassword) {\n              navigation.navigate(\"settings\");\n              setsettingsPasswordModalVis(false);\n              setinccorectPass(false);\n            } else {\n              setinccorectPass(true);\n            }\n          }}\n        >\n          <Text style={{ color: \"white\", fontSize: 20, paddingRight: 10 }}>\n            Go\n          </Text>\n          <Feather name=\"arrow-up-right\" size={32} color=\"white\" />\n        </TouchableOpacity>\n        <TouchableOpacity onPress={SendEmail} style={{ marginTop: 10 }}>\n          <Text style={{ color: \"blue\", fontSize: 14 }}>Forgot Password?</Text>\n        </TouchableOpacity>\n      </View>\n    </>\n  );\n};\n\nexport default SettingsPasswordModal;\n\nconst styles = StyleSheet.create({\n  contentContainer: {\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"95%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}