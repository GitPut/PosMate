{"ast":null,"code":"import NativeReanimatedModule from\"./NativeReanimated\";import{makeShareableCloneOnUIRecursive,makeShareableCloneRecursive,registerShareableMapping}from\"./shareables\";import{runOnUI}from\"./threads\";import{valueSetter}from\"./valueSetter\";export{stopMapper}from\"./mappers\";var _worklet_6223950855890_init_data={code:\"function makeUIMutable(initial,syncDataHolder){const{valueSetter,makeShareableCloneOnUIRecursive}=this._closure;const listeners=new Map();let value=initial;const self={set value(newValue){valueSetter(self,newValue);},get value(){return value;},set _value(newValue){value=newValue;if(syncDataHolder){_updateDataSynchronously(syncDataHolder,makeShareableCloneOnUIRecursive(newValue));}listeners.forEach(function(listener){listener(newValue);});},get _value(){return value;},addListener:function(id,listener){listeners.set(id,listener);},removeListener:function(id){listeners.delete(id);},_animation:null,_isReanimatedSharedValue:true};return self;}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.js\"};export var makeUIMutable=function(){var _f=function _f(initial,syncDataHolder){var listeners=new Map();var value=initial;var self={set value(newValue){valueSetter(self,newValue);},get value(){return value;},set _value(newValue){value=newValue;if(syncDataHolder){_updateDataSynchronously(syncDataHolder,makeShareableCloneOnUIRecursive(newValue));}listeners.forEach(function(listener){listener(newValue);});},get _value(){return value;},addListener:function addListener(id,listener){listeners.set(id,listener);},removeListener:function removeListener(id){listeners.delete(id);},_animation:null,_isReanimatedSharedValue:true};return self;};_f._closure={valueSetter:valueSetter,makeShareableCloneOnUIRecursive:makeShareableCloneOnUIRecursive};_f.__initData=_worklet_6223950855890_init_data;_f.__workletHash=6223950855890;return _f;}();var _worklet_14304230717326_init_data={code:\"function anonymous(){const{makeUIMutable,initial,syncDataHolder}=this._closure;return makeUIMutable(initial,syncDataHolder);}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.js\"};var _worklet_13878774078109_init_data={code:\"function anonymous(){const{mutable,newValue}=this._closure;mutable.value=newValue;}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.js\"};var _worklet_7119061662271_init_data={code:\"function anonymous(){const{mutable,modifier}=this._closure;mutable.value=modifier(mutable.value);}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.js\"};export function makeMutable(initial){var oneWayReadsOnly=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var value=initial;var syncDataHolder;if(!oneWayReadsOnly&&NativeReanimatedModule.native){syncDataHolder=NativeReanimatedModule.makeSynchronizedDataHolder(makeShareableCloneRecursive(value));registerShareableMapping(syncDataHolder);}var handle=makeShareableCloneRecursive({__init:function(){var _f=function _f(){return makeUIMutable(initial,syncDataHolder);};_f._closure={makeUIMutable:makeUIMutable,initial:initial,syncDataHolder:syncDataHolder};_f.__initData=_worklet_14304230717326_init_data;_f.__workletHash=14304230717326;return _f;}()});var listeners=NativeReanimatedModule.native?undefined:new Map();var mutable={set value(newValue){if(NativeReanimatedModule.native){runOnUI(function(){var _f=function _f(){mutable.value=newValue;};_f._closure={mutable:mutable,newValue:newValue};_f.__initData=_worklet_13878774078109_init_data;_f.__workletHash=13878774078109;return _f;}())();}else{valueSetter(mutable,newValue);}},get value(){if(syncDataHolder){return NativeReanimatedModule.getDataSynchronously(syncDataHolder);}return value;},set _value(newValue){if(NativeReanimatedModule.native){throw new Error('Setting `_value` directly is only possible on the UI runtime');}value=newValue;listeners.forEach(function(listener){listener(newValue);});},get _value(){if(NativeReanimatedModule.native){throw new Error('Reading from `_value` directly is only possible on the UI runtime');}return value;},modify:function modify(modifier){runOnUI(function(){var _f=function _f(){mutable.value=modifier(mutable.value);};_f._closure={mutable:mutable,modifier:modifier};_f.__initData=_worklet_7119061662271_init_data;_f.__workletHash=7119061662271;return _f;}())();},addListener:function addListener(id,listener){if(NativeReanimatedModule.native){throw new Error('adding listeners is only possible on the UI runtime');}listeners.set(id,listener);},removeListener:function removeListener(id){if(NativeReanimatedModule.native){throw new Error('removing listeners is only possible on the UI runtime');}listeners.delete(id);},_isReanimatedSharedValue:true};registerShareableMapping(mutable,handle);return mutable;}var _worklet_12489963400323_init_data={code:\"function anonymous(){const{initial}=this._closure;return initial;}\",location:\"/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.js\"};export function makeRemote(){var initial=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var handle=makeShareableCloneRecursive({__init:function(){var _f=function _f(){return initial;};_f._closure={initial:initial};_f.__initData=_worklet_12489963400323_init_data;_f.__workletHash=12489963400323;return _f;}()});registerShareableMapping(initial,handle);return initial;}","map":{"version":3,"mappings":"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","names":["NativeReanimatedModule","makeShareableCloneOnUIRecursive","makeShareableCloneRecursive","registerShareableMapping","runOnUI","valueSetter","stopMapper","makeUIMutable","initial","syncDataHolder","listeners","Map","value","self","newValue","_value","_updateDataSynchronously","forEach","listener","addListener","id","set","removeListener","delete","_animation","_isReanimatedSharedValue","makeMutable","oneWayReadsOnly","native","makeSynchronizedDataHolder","handle","__init","undefined","mutable","getDataSynchronously","Error","modify","modifier","makeRemote"],"sources":["/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/mutables.ts"],"sourcesContent":["import NativeReanimatedModule from './NativeReanimated';\nimport { SharedValue, ShareableSyncDataHolderRef } from './commonTypes';\nimport {\n  makeShareableCloneOnUIRecursive,\n  makeShareableCloneRecursive,\n  registerShareableMapping,\n} from './shareables';\nimport { runOnUI } from './threads';\nimport { valueSetter } from './valueSetter';\nexport { stopMapper } from './mappers';\n\nexport function makeUIMutable<T>(\n  initial: T,\n  syncDataHolder?: ShareableSyncDataHolderRef<T>\n) {\n  'worklet';\n\n  const listeners = new Map();\n  let value = initial;\n\n  const self = {\n    set value(newValue) {\n      valueSetter(self, newValue);\n    },\n    get value() {\n      return value;\n    },\n    /**\n     * _value prop should only be accessed by the valueSetter implementation\n     * which may make the decision about updating the mutable value depending\n     * on the provided new value. All other places should only attempt to modify\n     * the mutable by assigning to value prop directly.\n     */\n    set _value(newValue: T) {\n      value = newValue;\n      if (syncDataHolder) {\n        _updateDataSynchronously(\n          syncDataHolder,\n          makeShareableCloneOnUIRecursive(newValue)\n        );\n      }\n      listeners.forEach((listener) => {\n        listener(newValue);\n      });\n    },\n    get _value(): T {\n      return value;\n    },\n    addListener: (id: number, listener: (newValue: T) => void) => {\n      listeners.set(id, listener);\n    },\n    removeListener: (id: number) => {\n      listeners.delete(id);\n    },\n    _animation: null,\n    _isReanimatedSharedValue: true,\n  };\n  return self;\n}\n\nexport function makeMutable<T>(\n  initial: T,\n  oneWayReadsOnly = false\n): SharedValue<T> {\n  let value: T = initial;\n  let syncDataHolder: ShareableSyncDataHolderRef<T> | undefined;\n  if (!oneWayReadsOnly && NativeReanimatedModule.native) {\n    // updates are always synchronous when running on web or in Jest environment\n    syncDataHolder = NativeReanimatedModule.makeSynchronizedDataHolder(\n      makeShareableCloneRecursive(value)\n    );\n    registerShareableMapping(syncDataHolder);\n  }\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      return makeUIMutable(initial, syncDataHolder);\n    },\n  });\n  // listeners can only work on JS thread on Web and jest environments\n  const listeners = NativeReanimatedModule.native ? undefined : new Map();\n  const mutable = {\n    set value(newValue) {\n      if (NativeReanimatedModule.native) {\n        runOnUI(() => {\n          mutable.value = newValue;\n        })();\n      } else {\n        valueSetter(mutable, newValue);\n      }\n    },\n    get value() {\n      if (syncDataHolder) {\n        return NativeReanimatedModule.getDataSynchronously(syncDataHolder);\n      }\n      return value;\n    },\n    set _value(newValue: T) {\n      if (NativeReanimatedModule.native) {\n        throw new Error(\n          'Setting `_value` directly is only possible on the UI runtime'\n        );\n      }\n      value = newValue;\n      listeners!.forEach((listener) => {\n        listener(newValue);\n      });\n    },\n    get _value(): T {\n      if (NativeReanimatedModule.native) {\n        throw new Error(\n          'Reading from `_value` directly is only possible on the UI runtime'\n        );\n      }\n      return value;\n    },\n    modify: (modifier: (value: T) => T) => {\n      runOnUI(() => {\n        mutable.value = modifier(mutable.value);\n      })();\n    },\n    addListener: (id: number, listener: (value: T) => void) => {\n      if (NativeReanimatedModule.native) {\n        throw new Error('adding listeners is only possible on the UI runtime');\n      }\n      listeners!.set(id, listener);\n    },\n    removeListener: (id: number) => {\n      if (NativeReanimatedModule.native) {\n        throw new Error(\n          'removing listeners is only possible on the UI runtime'\n        );\n      }\n      listeners!.delete(id);\n    },\n    _isReanimatedSharedValue: true,\n  };\n  registerShareableMapping(mutable, handle);\n  return mutable;\n}\n\nexport function makeRemote<T extends object>(initial: T = {} as T): T {\n  const handle = makeShareableCloneRecursive({\n    __init: () => {\n      'worklet';\n      return initial;\n    },\n  });\n  registerShareableMapping(initial, handle);\n  return initial;\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}