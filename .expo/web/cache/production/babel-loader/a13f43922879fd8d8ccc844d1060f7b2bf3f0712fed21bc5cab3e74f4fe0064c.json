{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import useWindowDimensions from\"react-native-web/dist/exports/useWindowDimensions\";import View from\"react-native-web/dist/exports/View\";import Surface from\"./Surface\";import{useStyles}from\"./hooks/use-styles\";var Backdrop=function Backdrop(_ref){var _ref$revealed=_ref.revealed,revealed=_ref$revealed===void 0?false:_ref$revealed,header=_ref.header,headerHeight=_ref.headerHeight,backLayer=_ref.backLayer,backLayerHeight=_ref.backLayerHeight,subheader=_ref.subheader,subheaderHeight=_ref.subheaderHeight,style=_ref.style,headerContainerStyle=_ref.headerContainerStyle,backLayerContainerStyle=_ref.backLayerContainerStyle,frontLayerContainerStyle=_ref.frontLayerContainerStyle,subheaderContainerStyle=_ref.subheaderContainerStyle,children=_ref.children;var _useState=useState(headerHeight!==null&&headerHeight!==void 0?headerHeight:0),_useState2=_slicedToArray(_useState,2),currentHeaderHeight=_useState2[0],setCurrentHeaderHeight=_useState2[1];var _useState3=useState(backLayerHeight!==null&&backLayerHeight!==void 0?backLayerHeight:0),_useState4=_slicedToArray(_useState3,2),currentBackLayerHeight=_useState4[0],setCurrentBackLayerHeight=_useState4[1];var _useState5=useState(subheaderHeight!==null&&subheaderHeight!==void 0?subheaderHeight:0),_useState6=_slicedToArray(_useState5,2),currentSubheaderHeight=_useState6[0],setCurrentSubheaderHeight=_useState6[1];var styles=useStyles(function(_ref2){var palette=_ref2.palette;return{container:{flex:1,backgroundColor:palette.primary.main,overflow:'hidden'},frontLayer:{position:'absolute',start:0,end:0,bottom:0,backgroundColor:palette.surface.main,borderTopStartRadius:16,borderTopEndRadius:16,borderBottomStartRadius:0,borderBottomEndRadius:0,elevation:1}};});var animated=useRef(new Animated.Value(revealed?1:0)).current;useEffect(function(){Animated.timing(animated,{toValue:revealed?1:0,duration:300,useNativeDriver:true}).start();},[revealed]);var dimensions=useWindowDimensions();var translateY=animated.interpolate({inputRange:[0,1],outputRange:[0,dimensions.height<currentHeaderHeight+currentBackLayerHeight?dimensions.height-currentHeaderHeight-currentSubheaderHeight:currentBackLayerHeight]});return React.createElement(View,{style:[styles.container,style]},React.createElement(View,{style:[headerContainerStyle,{height:headerHeight}],onLayout:function onLayout(e){if(!headerHeight)setCurrentHeaderHeight(e.nativeEvent.layout.height);}},header),React.createElement(View,{style:[backLayerContainerStyle,{height:backLayerHeight}],onLayout:function onLayout(e){if(!backLayerHeight)setCurrentBackLayerHeight(e.nativeEvent.layout.height);}},backLayer),React.createElement(Surface,{style:[styles.frontLayer,{top:currentHeaderHeight,transform:[{translateY:translateY}]},frontLayerContainerStyle]},subheader&&React.createElement(View,{style:[subheaderContainerStyle,{height:subheaderHeight}],onLayout:function onLayout(e){if(!subheaderHeight)setCurrentSubheaderHeight(e.nativeEvent.layout.height);}},subheader),children));};export default Backdrop;","map":{"version":3,"mappings":"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","names":["React","useEffect","useRef","useState","Surface","useStyles","Backdrop","_ref","revealed","header","headerHeight","backLayer","backLayerHeight","subheader","subheaderHeight","style","headerContainerStyle","backLayerContainerStyle","frontLayerContainerStyle","subheaderContainerStyle","children","currentHeaderHeight","setCurrentHeaderHeight","currentBackLayerHeight","setCurrentBackLayerHeight","currentSubheaderHeight","setCurrentSubheaderHeight","styles","palette","_ref2","container","flex","backgroundColor","primary","main","overflow","frontLayer","position","start","end","bottom","surface","borderTopStartRadius","borderTopEndRadius","borderBottomStartRadius","borderBottomEndRadius","elevation","animated","Animated","Value","current","timing","toValue","duration","useNativeDriver","dimensions","useWindowDimensions","translateY","interpolate","inputRange","outputRange","height","View","onLayout","e","nativeEvent","layout","top","transform"],"sources":["/Users/peterputros/Desktop/PosMate/node_modules/@react-native-material/core/lib/module/Backdrop.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Animated, StyleProp, useWindowDimensions, View, ViewProps, ViewStyle } from 'react-native';\nimport Surface from './Surface';\nimport { useStyles } from './hooks/use-styles';\n\nexport interface BackdropProps {\n  revealed?: boolean;\n\n  header?: React.ReactElement | null;\n\n  headerHeight?: number;\n\n  backLayer?: React.ReactElement | null;\n\n  backLayerHeight?: number;\n\n  subheader?: React.ReactElement | null;\n\n  subheaderHeight?: number;\n\n  style?: StyleProp<ViewStyle>;\n\n  headerContainerStyle?: StyleProp<ViewStyle>;\n\n  backLayerContainerStyle?: StyleProp<ViewStyle>;\n\n  frontLayerContainerStyle?: Animated.AnimatedProps<ViewProps>['style'];\n\n  subheaderContainerStyle?: StyleProp<ViewStyle>;\n}\n\nconst Backdrop: React.FC<BackdropProps> = ({\n  revealed = false,\n  header,\n  headerHeight,\n  backLayer,\n  backLayerHeight,\n  subheader,\n  subheaderHeight,\n  style,\n  headerContainerStyle,\n  backLayerContainerStyle,\n  frontLayerContainerStyle,\n  subheaderContainerStyle,\n  children,\n}) => {\n  const [currentHeaderHeight, setCurrentHeaderHeight] = useState(headerHeight ?? 0);\n  const [currentBackLayerHeight, setCurrentBackLayerHeight] = useState(backLayerHeight ?? 0);\n  const [currentSubheaderHeight, setCurrentSubheaderHeight] = useState(subheaderHeight ?? 0);\n\n  const styles = useStyles(({ palette }) => ({\n    container: {\n      flex: 1,\n      backgroundColor: palette.primary.main,\n      overflow: 'hidden',\n    },\n    frontLayer: {\n      position: 'absolute',\n      start: 0,\n      end: 0,\n      bottom: 0,\n      backgroundColor: palette.surface.main,\n      borderTopStartRadius: 16,\n      borderTopEndRadius: 16,\n      borderBottomStartRadius: 0,\n      borderBottomEndRadius: 0,\n      elevation: 1,\n    },\n  }));\n\n  const animated = useRef(new Animated.Value(revealed ? 1 : 0)).current;\n\n  useEffect(() => {\n    Animated.timing(animated, {\n      toValue: revealed ? 1 : 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  }, [revealed]);\n\n  const dimensions = useWindowDimensions();\n\n  const translateY = animated.interpolate({\n    inputRange: [0, 1],\n    outputRange: [\n      0,\n      dimensions.height < currentHeaderHeight + currentBackLayerHeight\n        ? dimensions.height - currentHeaderHeight - currentSubheaderHeight\n        : currentBackLayerHeight,\n    ],\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <View\n        style={[headerContainerStyle, { height: headerHeight }]}\n        onLayout={(e) => {\n          if (!headerHeight) setCurrentHeaderHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {header}\n      </View>\n\n      <View\n        style={[backLayerContainerStyle, { height: backLayerHeight }]}\n        onLayout={(e) => {\n          if (!backLayerHeight) setCurrentBackLayerHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {backLayer}\n      </View>\n\n      <Surface\n        style={[styles.frontLayer, { top: currentHeaderHeight, transform: [{ translateY }] }, frontLayerContainerStyle]}\n      >\n        {subheader && (\n          <View\n            style={[subheaderContainerStyle, { height: subheaderHeight }]}\n            onLayout={(e) => {\n              if (!subheaderHeight) setCurrentSubheaderHeight(e.nativeEvent.layout.height);\n            }}\n          >\n            {subheader}\n          </View>\n        )}\n\n        {children}\n      </Surface>\n    </View>\n  );\n};\n\nexport default Backdrop;\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}