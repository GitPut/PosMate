{"ast":null,"code":"import{auth,db}from\"./firebaseConfig\";export var signIn=function signIn(email,password){return auth.signInWithEmailAndPassword(email,password);};export var signUp=function signUp(email,password,name,phoneNumber){return auth.createUserWithEmailAndPassword(email,password).then(function(userAuth){if(userAuth.user){db.collection(\"users\").doc(userAuth.user.uid).set({products:[],categories:[],wooCredentials:{ck:null,cs:null,useWoocommerce:false},storeDetails:{name:null,address:null,phoneNumber:null,website:null,comSelected:null,deliveryPrice:null},ownerDetails:{name:name,address:null,phoneNumber:phoneNumber,email:email}});}});};export var updateData=function updateData(categories){var _auth$currentUser;db.collection(\"users\").doc((_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid).update({categories:categories}).catch(function(e){return console.log(\"ERROR HAS OCCURE FB: \",e);});};export var updateWooCredentials=function updateWooCredentials(wooCredentials){var _auth$currentUser2;db.collection(\"users\").doc((_auth$currentUser2=auth.currentUser)==null?void 0:_auth$currentUser2.uid).update({wooCredentials:wooCredentials});};export var updateTransList=function updateTransList(receipt){var _auth$currentUser3;db.collection(\"users\").doc((_auth$currentUser3=auth.currentUser)==null?void 0:_auth$currentUser3.uid).collection(\"transList\").add(receipt);};export var updateStoreDetails=function updateStoreDetails(storeDetails){var _auth$currentUser4;db.collection(\"users\").doc((_auth$currentUser4=auth.currentUser)==null?void 0:_auth$currentUser4.uid).update({storeDetails:storeDetails});if(storeDetails.onlineStoreActive){var _auth$currentUser5;db.collection(\"public\").doc((_auth$currentUser5=auth.currentUser)==null?void 0:_auth$currentUser5.uid).update({storeDetails:storeDetails});}};export var updateFreeTrial=function updateFreeTrial(endDate){var _auth$currentUser6;db.collection(\"users\").doc((_auth$currentUser6=auth.currentUser)==null?void 0:_auth$currentUser6.uid).update({freeTrial:endDate});};export var logout=function logout(){localStorage.removeItem(\"isAuthedBackend\");localStorage.removeItem(\"savedUserState\");auth.signOut();window.location.href=\"https://divinepos.com\";};export var addCustomerDetailsToDb=function addCustomerDetailsToDb(customer){var _auth$currentUser7;return db.collection(\"users\").doc((_auth$currentUser7=auth.currentUser)==null?void 0:_auth$currentUser7.uid).collection(\"customers\").add(customer);};","map":{"version":3,"names":["auth","db","signIn","email","password","signInWithEmailAndPassword","signUp","name","phoneNumber","createUserWithEmailAndPassword","then","userAuth","user","collection","doc","uid","set","products","categories","wooCredentials","ck","cs","useWoocommerce","storeDetails","address","website","comSelected","deliveryPrice","ownerDetails","updateData","currentUser","update","catch","e","console","log","updateWooCredentials","updateTransList","receipt","add","updateStoreDetails","onlineStoreActive","updateFreeTrial","endDate","freeTrial","logout","localStorage","removeItem","signOut","window","location","href","addCustomerDetailsToDb","customer"],"sources":["/Users/peterputros/Desktop/PosMate/state/firebaseFunctions.ts"],"sourcesContent":["import { auth, db } from \"./firebaseConfig\";\n\nexport const signIn = (email: string, password: string) =>\n  auth.signInWithEmailAndPassword(email, password);\n\nexport const signUp = (\n  email: string,\n  password: string,\n  name: string,\n  phoneNumber: string\n) =>\n  auth.createUserWithEmailAndPassword(email, password).then((userAuth) => {\n    if (userAuth.user) {\n      db.collection(\"users\")\n        .doc(userAuth.user.uid)\n        .set({\n          products: [],\n          categories: [],\n          wooCredentials: { ck: null, cs: null, useWoocommerce: false },\n          storeDetails: {\n            name: null,\n            address: null,\n            phoneNumber: null,\n            website: null,\n            comSelected: null,\n            deliveryPrice: null,\n          },\n          ownerDetails: {\n            name: name,\n            address: null,\n            phoneNumber: phoneNumber,\n            email: email,\n          },\n        });\n    }\n  });\n\nexport const updateData = (categories: any) => {\n  db.collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .update({\n      categories: categories,\n    })\n    .catch((e) => console.log(\"ERROR HAS OCCURE FB: \", e));\n};\n\nexport const updateWooCredentials = (wooCredentials: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    wooCredentials: wooCredentials,\n  });\n};\n\nexport const updateTransList = (receipt: any) => {\n  db.collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .collection(\"transList\")\n    .add(receipt);\n};\n\nexport const updateStoreDetails = (storeDetails: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    storeDetails: storeDetails,\n  });\n  if (storeDetails.onlineStoreActive) {\n    db.collection(\"public\").doc(auth.currentUser?.uid).update({\n      storeDetails: storeDetails,\n    });\n  }\n};\n\nexport const updateFreeTrial = (endDate: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    freeTrial: endDate,\n  });\n};\n\nexport const logout = () => {\n  localStorage.removeItem(\"isAuthedBackend\");\n  localStorage.removeItem(\"savedUserState\");\n  auth.signOut();\n  // window.location.reload();\n  window.location.href = \"https://divinepos.com\";\n};\n\nexport const addCustomerDetailsToDb = (customer: any) =>\n  db\n    .collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .collection(\"customers\")\n    .add(customer);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}