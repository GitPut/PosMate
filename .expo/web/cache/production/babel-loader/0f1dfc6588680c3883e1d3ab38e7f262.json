{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Modal from\"react-native-web/dist/exports/Modal\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import React,{useEffect,useState}from\"react\";import{cartState,setCartState,storeDetailState,setIsSignedInSettingsState}from\"../../state/state\";import DeliveryScreen from\"../../components/DeliveryScreen\";import CashScreen from\"../../components/CashScreen\";import ChangeScreen from\"../../components/ChangeScreen\";import{updateTransList}from\"../../state/firebaseFunctions\";import Ionicons from\"@expo/vector-icons/Ionicons\";import MaterialCommunityIcons from\"@expo/vector-icons/MaterialCommunityIcons\";import Feather from\"@expo/vector-icons/Feather\";import SaveCustomer from\"./SaveCustomer\";import{auth,db}from\"../../state/firebaseConfig\";import Entypo from\"@expo/vector-icons/Entypo\";import{useHistory}from\"react-router-dom\";import CompletePaymentPhoneOrder from\"../../components/CompletePaymentPhoneOrder\";import SettingsPasswordModal from\"../../components/SettingsPasswordModal\";import CartItemEditable from\"../../components/CartItemEditable\";import useWindowDimensions from\"../../components/useWindowDimensions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartButton=function CartButton(props){return _jsx(TouchableOpacity,{style:props.style,onPress:props.onPress,disabled:props.disabled,children:_jsx(props.icon,{})});};var CartScreen=function CartScreen(_ref){var navigation=_ref.navigation;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),deliveryModal=_useState2[0],setDeliveryModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),cashModal=_useState4[0],setCashModal=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),changeModal=_useState6[0],setChangeModal=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),ongoingDelivery=_useState8[0],setOngoingDelivery=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),name=_useState10[0],setName=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),phone=_useState12[0],setPhone=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),address=_useState14[0],setAddress=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),deliveryChecked=_useState16[0],setDeliveryChecked=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),changeDue=_useState18[0],setChangeDue=_useState18[1];var cart=cartState.use();var storeDetails=storeDetailState.use();var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),cartSub=_useState20[0],setCartSub=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),saveCustomerModal=_useState22[0],setSaveCustomerModal=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),savedCustomerDetails=_useState24[0],setsavedCustomerDetails=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),ongoingOrderListModal=_useState26[0],setongoingOrderListModal=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),settingsPasswordModalVis=_useState28[0],setsettingsPasswordModalVis=_useState28[1];var history=useHistory();var height=useWindowDimensions().height;useEffect(function(){if(cart.length>0){var newVal=0;for(var i=0;i<cart.length;i++){try{if(cart[i].quantity>1){newVal+=parseFloat(cart[i].price)*cart[i].quantity;}else{newVal+=parseFloat(cart[i].price);}}catch(error){console.log(error);}}if(deliveryChecked){setCartSub(newVal+parseFloat(storeDetails.deliveryPrice));}else{setCartSub(newVal);}}else{setCartSub(0);}},[cart]);var AddToList=function(){var _ref2=_asyncToGenerator(function*(payload){updateTransList(payload);});return function AddToList(_x){return _ref2.apply(this,arguments);};}();var Print=function Print(method){if(savedCustomerDetails){var _savedCustomerDetails;if(((_savedCustomerDetails=savedCustomerDetails.orders)==null?void 0:_savedCustomerDetails.length)>0){var _auth$currentUser;db.collection(\"users\").doc((_auth$currentUser=auth.currentUser)==null?void 0:_auth$currentUser.uid).collection(\"customers\").doc(savedCustomerDetails.id).update({orders:[].concat(_toConsumableArray(savedCustomerDetails.orders),[{cart:cart}])});}else{var _auth$currentUser2;db.collection(\"users\").doc((_auth$currentUser2=auth.currentUser)==null?void 0:_auth$currentUser2.uid).collection(\"customers\").doc(savedCustomerDetails.id).update({orders:[{cart:cart}]});}}var transNum=Math.random().toString(36).substr(2,9);if(method===\"deliveryOrder\"){var _storeDetails$address;var total=cartSub;var today=new Date();var data=[\"\\x1B\"+\"\\x40\",\"\\x1B\"+\"\\x61\"+\"\\x31\",storeDetails.name,\"\\x0A\",((_storeDetails$address=storeDetails.address)==null?void 0:_storeDetails$address.label)+\"\\x0A\",storeDetails.website+\"\\x0A\",storeDetails.phoneNumber+\"\\x0A\",today.toLocaleDateString()+\" \"+today.toLocaleTimeString()+\"\\x0A\",\"\\x0A\",\"Transaction ID \"+transNum+\"\\x0A\",\"\\x0A\",\"Delivery Order: $\"+(storeDetails.deliveryPrice?storeDetails.deliveryPrice:\"0\")+\" Fee\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1B\"+\"\\x61\"+\"\\x30\"];cart.map(function(cartItem){data.push(\"Name: \"+cartItem.name);data.push(\"\\x0A\");if(cartItem.quantity>1){total+=parseFloat(cartItem.price)*cartItem.quantity;data.push(\"Quantity: \"+cartItem.quantity);data.push(\"\\x0A\");data.push(\"Price: $\"+cartItem.price*cartItem.quantity);}else{total+=parseFloat(cartItem.price);data.push(\"Price: $\"+cartItem.price);}if(cartItem.description){data.push(\"\\x0A\");data.push(cartItem.description);}if(cartItem.options){data.push(\"\\x0A\");cartItem.options.map(function(option){data.push(option);data.push(\"\\x0A\");});}if(cartItem.extraDetails){data.push(cartItem.extraDetails);data.push(\"\\x0A\");}data.push(\"\\x0A\"+\"\\x0A\");});total=storeDetails.taxRate?total*(1+storeDetails.taxRate/100):total*1.13;total=total.toFixed(2);data.push(\"\\x0A\",\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"+\"\\x0A\",\"\\x0A\"+\"\\x0A\",\"Customer Name: \"+name,\"\\x0A\"+\"\\x0A\",\"Customer Phone #:  \"+phone,\"\\x0A\"+\"\\x0A\",\"Customer Address #:  \"+(address==null?void 0:address.label),\"\\x0A\"+\"\\x0A\",\"Total Including (\"+(storeDetails.taxRate?storeDetails.taxRate:\"13\")+\"% Tax): \"+total+\"\\x0A\"+\"\\x0A\",\"------------------------------------------\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1D\"+\"\\x56\"+\"\\x30\");var qz=require(\"qz-tray\");qz.websocket.connect().then(function(){var config=qz.configs.create(storeDetails.comSelected);return qz.print(config,data);}).then(qz.websocket.disconnect).catch(function(err){console.error(err);});AddToList({id:Math.random().toString(36).substr(2,9)+\"-l\",date:today,transNum:transNum,total:total,method:\"deliveryOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}});var ongoingList=JSON.parse(localStorage.getItem(\"ongoingList\"));if(ongoingList){ongoingList.push({id:Math.random().toString(36).substr(2,9)+\"-l\",date:today,transNum:transNum,total:total,method:\"deliveryOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}});localStorage.setItem(\"ongoingList\",JSON.stringify(ongoingList));}else{localStorage.setItem(\"ongoingList\",JSON.stringify([{id:Math.random().toString(36).substr(2,9)+\"-l\",date:today,transNum:transNum,total:total,method:\"deliveryOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}}]));}setCartState([]);setDeliveryModal(false);}else if(method===\"pickupOrder\"){var _storeDetails$address2;var _total=0;var _today=new Date();var _data=[\"\\x1B\"+\"\\x40\",\"\\x1B\"+\"\\x61\"+\"\\x31\",storeDetails.name,\"\\x0A\",((_storeDetails$address2=storeDetails.address)==null?void 0:_storeDetails$address2.label)+\"\\x0A\",storeDetails.website+\"\\x0A\",storeDetails.phoneNumber+\"\\x0A\",_today.toLocaleDateString()+\" \"+_today.toLocaleTimeString()+\"\\x0A\",\"\\x0A\",\"Transaction ID \"+transNum+\"\\x0A\",\"\\x0A\",\"Pickup Order\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1B\"+\"\\x61\"+\"\\x30\"];cart.map(function(cartItem){_data.push(\"Name: \"+cartItem.name);_data.push(\"\\x0A\");if(cartItem.quantity>1){_total+=parseFloat(cartItem.price)*cartItem.quantity;_data.push(\"Quantity: \"+cartItem.quantity);_data.push(\"\\x0A\");_data.push(\"Price: $\"+cartItem.price*cartItem.quantity);}else{_total+=parseFloat(cartItem.price);_data.push(\"Price: $\"+cartItem.price);}if(cartItem.description){_data.push(\"\\x0A\");_data.push(cartItem.description);}if(cartItem.options){_data.push(\"\\x0A\");cartItem.options.map(function(option){_data.push(option);_data.push(\"\\x0A\");});}if(cartItem.extraDetails){_data.push(cartItem.extraDetails);_data.push(\"\\x0A\");}_data.push(\"\\x0A\"+\"\\x0A\");});_total=_total*1.13;_total=_total.toFixed(2);_data.push(\"\\x0A\",\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"+\"\\x0A\",\"\\x0A\"+\"\\x0A\",\"Customer Name: \"+name,\"\\x0A\"+\"\\x0A\",\"Customer Phone #:  \"+phone,\"\\x0A\"+\"\\x0A\",\"Total Including (\"+(storeDetails.taxRate?storeDetails.taxRate:\"13\")+\"% Tax): \"+_total+\"\\x0A\"+\"\\x0A\",\"------------------------------------------\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1D\"+\"\\x56\"+\"\\x30\");var _qz=require(\"qz-tray\");_qz.websocket.connect().then(function(){var config=_qz.configs.create(storeDetails.comSelected);return _qz.print(config,_data);}).then(_qz.websocket.disconnect).catch(function(err){console.error(err);});AddToList({id:Math.random().toString(36).substr(2,9)+\"-l\",date:_today,transNum:transNum,total:_total,method:\"pickupOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}});var _ongoingList=JSON.parse(localStorage.getItem(\"ongoingList\"));if(_ongoingList){_ongoingList.push({id:Math.random().toString(36).substr(2,9)+\"-l\",date:_today,transNum:transNum,total:_total,method:\"pickupOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}});localStorage.setItem(\"ongoingList\",JSON.stringify(_ongoingList));}else{localStorage.setItem(\"ongoingList\",JSON.stringify([{id:Math.random().toString(36).substr(2,9)+\"-l\",date:_today,transNum:transNum,total:_total,method:\"pickupOrder\",cart:cart,customer:{name:name,phone:phone,address:address?address:null}}]));}setCartState([]);setDeliveryModal(false);}else{var _storeDetails$address3;var _total2=0;var _today2=new Date();var _data2=[\"\\x1B\"+\"\\x40\",\"\\x1B\"+\"\\x61\"+\"\\x31\",storeDetails.name,\"\\x0A\",((_storeDetails$address3=storeDetails.address)==null?void 0:_storeDetails$address3.label)+\"\\x0A\",storeDetails.website+\"\\x0A\",storeDetails.phoneNumber+\"\\x0A\",_today2.toLocaleDateString()+\" \"+_today2.toLocaleTimeString()+\"\\x0A\",\"\\x0A\",\"Transaction ID \"+transNum+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1B\"+\"\\x61\"+\"\\x30\"];cart.map(function(cartItem){_data2.push(\"Name: \"+cartItem.name);_data2.push(\"\\x0A\");if(cartItem.quantity>1){_total2+=parseFloat(cartItem.price)*cartItem.quantity;_data2.push(\"Quantity: \"+cartItem.quantity);_data2.push(\"\\x0A\");_data2.push(\"Price: $\"+cartItem.price*cartItem.quantity);}else{_total2+=parseFloat(cartItem.price);_data2.push(\"Price: $\"+cartItem.price);}if(cartItem.description){_data2.push(\"\\x0A\");_data2.push(cartItem.description);}if(cartItem.options){_data2.push(\"\\x0A\");cartItem.options.map(function(option){_data2.push(option);_data2.push(\"\\x0A\");});}if(cartItem.extraDetails){_data2.push(cartItem.extraDetails);_data2.push(\"\\x0A\");}_data2.push(\"\\x0A\"+\"\\x0A\");});_total2=_total2*1.13;_total2=_total2.toFixed(2);if(method===\"Cash\"){_data2.push(\"\\x0A\",\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"+\"\\x0A\",\"\\x0A\"+\"\\x0A\",\"Payment Method: \"+method+\"\\x0A\"+\"\\x0A\",\"Total Including (\"+(storeDetails.taxRate?storeDetails.taxRate:\"13\")+\"% Tax): \"+\"$\"+_total2+\"\\x0A\"+\"\\x0A\",\"Change Due: \"+\"$\"+changeDue+\"\\x0A\"+\"\\x0A\",\"------------------------------------------\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1D\"+\"\\x56\"+\"\\x30\"+\"\\x10\"+\"\\x14\"+\"\\x01\"+\"\\x00\"+\"\\x05\");}else{_data2.push(\"\\x0A\",\"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\"+\"\\x0A\",\"\\x0A\"+\"\\x0A\",\"Payment Method: \"+method+\"\\x0A\"+\"\\x0A\",\"Total Including (\"+(storeDetails.taxRate?storeDetails.taxRate:\"13\")+\"% Tax): \"+\"$\"+_total2+\"\\x0A\"+\"\\x0A\",\"------------------------------------------\"+\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x0A\",\"\\x1D\"+\"\\x56\"+\"\\x30\");}var _qz2=require(\"qz-tray\");_qz2.websocket.connect().then(function(){var config=_qz2.configs.create(storeDetails.comSelected);return _qz2.print(config,_data2);}).then(_qz2.websocket.disconnect).catch(function(err){console.error(err);});AddToList({id:Math.random().toString(36).substr(2,9)+\"-l\",date:_today2,transNum:transNum,total:_total2,method:method,cart:cart});}setCartState([]);};var DeliveryBtn=function DeliveryBtn(){if(ongoingDelivery===null){return _jsxs(View,{style:{flexDirection:\"row\",width:\"100%\",alignSelf:\"center\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[_jsx(TouchableOpacity,{style:[styles.cashButton,cartSub===0&&{opacity:0.5}],onPress:function onPress(){return setCashModal(true);},disabled:cart.length<1||ongoingDelivery,children:_jsx(Text,{style:styles.btnTxt,children:\"Cash\"})}),_jsx(TouchableOpacity,{style:[styles.cardButton,cartSub===0&&{opacity:0.5}],onPress:function onPress(){return Print(\"Card\");},disabled:cart.length<1||ongoingDelivery,children:_jsx(Text,{style:styles.btnTxt,children:\"Card\"})})]});}if(ongoingDelivery&&cart.length>0){return _jsx(TouchableOpacity,{style:styles.bigButton,onPress:function onPress(){Print(deliveryChecked?\"deliveryOrder\":\"pickupOrder\");setOngoingDelivery(null);setName(null);setPhone(null);setAddress(null);},children:_jsx(Text,{style:styles.btnTxt,children:\"Complete\"})});}else{return _jsx(TouchableOpacity,{style:styles.bigButton,onPress:function onPress(){setOngoingDelivery(null);setDeliveryChecked(false);},children:_jsx(Text,{style:styles.btnTxt,children:\"Cancel\"})});}};return _jsxs(View,{style:styles.container,children:[_jsxs(View,{style:styles.cartHeader,children:[_jsx(Text,{style:{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:25},children:\"Order\"}),_jsxs(View,{style:{flexDirection:\"row\",alignItems:\"center\",justifyContent:\"space-between\"},children:[_jsx(CartButton,{style:[styles.iconContainer,cart.length>0&&{opacity:0.5}],onPress:function onPress(){return setSaveCustomerModal(true);},disabled:cart.length>0,icon:function icon(){return _jsx(MaterialCommunityIcons,{name:\"history\",size:26,color:\"white\"});}}),_jsx(CartButton,{style:[styles.iconContainer,cart.length>0&&{opacity:0.5}],onPress:function onPress(){return setDeliveryModal(true);},disabled:cart.length>0,icon:function icon(){return _jsx(Feather,{name:\"phone-call\",size:28,color:\"white\"});}}),_jsx(CartButton,{style:[styles.iconContainer,cart.length>0&&{opacity:0.5}],onPress:function onPress(){return setongoingOrderListModal(true);},icon:function icon(){return _jsx(Ionicons,{name:\"chevron-down\",size:28,color:\"white\"});}}),_jsx(CartButton,{style:[styles.iconContainer,cart.length>0&&{opacity:0.5}],onPress:function onPress(){if(storeDetails.settingsPassword){setsettingsPasswordModalVis(true);}else{setIsSignedInSettingsState(true);history.push(\"/authed/dashboard\");}},icon:function icon(){return _jsx(Entypo,{name:\"cog\",size:28,color:\"white\"});}})]})]}),_jsx(ScrollView,{contentContainerStyle:styles.contentContainer,style:{marginBottom:10},children:_jsx(View,{children:cart.length>0?cart.map(function(cartItem,index){return _jsx(CartItemEditable,{cartItem:cartItem,index:index,removeAction:function removeAction(){console.log(\"Removing\");var local=structuredClone(cart);local.splice(index,1);setCartState(local);},decreaseAction:function decreaseAction(){var local=structuredClone(cart);local[index].quantity--;setCartState(local);},increaseAction:function increaseAction(){var local=structuredClone(cart);if(local[index].quantity){local[index].quantity++;}else{local[index].quantity=2;}setCartState(local);}},index);}):_jsxs(View,{style:{height:height*0.7,width:\"100%\",justifyContent:\"center\",alignItems:\"center\"},children:[_jsx(Text,{style:styles.empty,children:\"Empty...\"}),_jsx(Text,{style:styles.fillTheCart,children:\"Fill the Cart!\"})]})})}),_jsxs(View,{style:{justifyContent:\"space-around\",alignItems:\"center\",width:\"90%\",alignSelf:\"center\"},children:[deliveryChecked&&parseFloat(storeDetails.deliveryPrice)&&_jsxs(View,{style:{alignSelf:\"stretch\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:2,paddingTop:5},children:[_jsx(Text,{style:{fontFamily:\"archivo-600\",color:\"rgba(74,74,74,1)\",fontSize:16,alignSelf:\"flex-start\"},children:\"Delivery\"}),_jsxs(Text,{style:[{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:20,alignSelf:\"flex-start\"},cartSub===0&&{opacity:0.5}],children:[\"$\",parseFloat(storeDetails.deliveryPrice).toFixed(2)]})]}),_jsxs(View,{style:{alignSelf:\"stretch\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:2},children:[_jsx(Text,{style:{fontFamily:\"archivo-600\",color:\"rgba(74,74,74,1)\",fontSize:16,alignSelf:\"flex-start\"},children:\"Sub Total\"}),_jsxs(Text,{style:[{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:20,alignSelf:\"flex-start\"},cartSub===0&&{opacity:0.5}],children:[\"$\",cartSub.toFixed(2)]})]}),_jsxs(View,{style:{alignSelf:\"stretch\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:2},children:[_jsx(Text,{style:{fontFamily:\"archivo-600\",color:\"rgba(74,74,74,1)\",fontSize:16,alignSelf:\"flex-start\"},children:\"Tax\"}),_jsxs(Text,{style:[{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:20,alignSelf:\"flex-start\"},cartSub===0&&{opacity:0.5}],children:[\"$\",(cartSub*(storeDetails.taxRate?storeDetails.taxRate/100:0.13)).toFixed(2)]})]}),_jsxs(View,{style:{alignSelf:\"stretch\",flexDirection:\"row\",justifyContent:\"space-between\",alignItems:\"center\",marginBottom:10},children:[_jsx(Text,{style:{fontFamily:\"archivo-600\",color:\"rgba(74,74,74,1)\",fontSize:16,alignSelf:\"flex-start\"},children:\"Total\"}),_jsxs(Text,{style:[{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:20,alignSelf:\"flex-start\"},cartSub===0&&{opacity:0.5}],children:[\"$\",(cartSub*1.13).toFixed(2)]})]}),_jsx(DeliveryBtn,{})]}),_jsx(Modal,{visible:saveCustomerModal,transparent:true,children:_jsx(SaveCustomer,{setSaveCustomerModal:setSaveCustomerModal,setOngoingDelivery:setOngoingDelivery,setNameForDelivery:setName,setPhoneForDelivery:setPhone,setAddressForDelivery:setAddress,setDeliveryChecked:setDeliveryChecked,setsavedCustomerDetails:setsavedCustomerDetails})}),_jsx(Modal,{visible:deliveryModal,transparent:true,children:_jsx(DeliveryScreen,{setsavedCustomerDetails:setsavedCustomerDetails,setDeliveryModal:setDeliveryModal,setOngoingDelivery:setOngoingDelivery,setName:setName,setPhone:setPhone,setAddress:setAddress,name:name,phone:phone,address:address,deliveryChecked:deliveryChecked,setDeliveryChecked:setDeliveryChecked})}),_jsx(Modal,{visible:cashModal,transparent:true,children:_jsx(CashScreen,{setCashModal:setCashModal,GetTrans:function GetTrans(){return Print(\"Cash\");},total:(cartSub*1.13).toFixed(2),setChangeDue:setChangeDue})}),_jsx(Modal,{visible:changeModal,children:_jsx(ChangeScreen,{setChangeModal:setChangeModal})}),_jsx(Modal,{visible:ongoingOrderListModal,transparent:true,children:_jsx(CompletePaymentPhoneOrder,{setongoingOrderListModal:setongoingOrderListModal})}),_jsx(Modal,{visible:settingsPasswordModalVis,transparent:true,children:_jsx(SettingsPasswordModal,{setsettingsPasswordModalVis:setsettingsPasswordModalVis,navigation:navigation})})]});};export default CartScreen;var styles=StyleSheet.create({container:{height:\"100%\",width:\"30%\",padding:20,backgroundColor:\"rgba(31,35,48,1)\",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:2,borderBottomLeftRadius:2,shadowColor:\"rgba(0,0,0,1)\",shadowOffset:{width:-3,height:3},elevation:30,shadowOpacity:0.92,shadowRadius:5},contentContainer:{height:\"100%\",justifyContent:\"space-between\",width:\"100%\"},totalContainer:{height:\"14%\",paddingTop:10},cartHeader:{height:\"6%\",justifyContent:\"space-between\",width:\"100%\",flexDirection:\"row\",alignItems:\"center\",marginBottom:20},iconContainer:{alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"rgba(41,44,56,1)\",borderRadius:15,width:50,height:50,margin:10},cashButton:{backgroundColor:\"rgba(51,81,243,1)\",borderRadius:30,borderTopRightRadius:0,borderBottomRightRadius:0,width:\"49.5%\",height:55,alignItems:\"center\",justifyContent:\"center\"},cardButton:{backgroundColor:\"rgba(51,81,243,1)\",borderRadius:30,borderTopRightRadius:30,borderBottomRightRadius:30,borderTopLeftRadius:0,borderBottomLeftRadius:0,width:\"49.5%\",height:55,alignItems:\"center\",justifyContent:\"center\"},btnTxt:{fontSize:20,color:\"white\"},totalTxt:{fontSize:16,marginBottom:5,color:\"rgba(255,255,255,1)\",fontWeight:\"600\"},totalTxtPrice:{fontSize:16,marginBottom:5,color:\"rgba(255,255,255,1)\",fontWeight:\"600\"},bigButton:{backgroundColor:\"rgba(51,81,243,1)\",borderRadius:30,width:\"98%\",height:55,alignItems:\"center\",justifyContent:\"center\"},innerTxt:{fontSize:13,marginBottom:10},headerTxt:{fontSize:15,fontWeight:\"600\"},empty:{fontFamily:\"archivo-600\",color:\"rgba(255,255,255,1)\",fontSize:20,opacity:0.44,marginTop:20},fillTheCart:{fontFamily:\"archivo-500\",color:\"rgba(74,74,74,1)\",fontSize:20}});","map":{"version":3,"names":["React","useEffect","useState","cartState","setCartState","storeDetailState","setIsSignedInSettingsState","DeliveryScreen","CashScreen","ChangeScreen","updateTransList","Ionicons","MaterialCommunityIcons","Feather","SaveCustomer","auth","db","Entypo","useHistory","CompletePaymentPhoneOrder","SettingsPasswordModal","CartItemEditable","useWindowDimensions","CartButton","props","style","onPress","disabled","CartScreen","navigation","deliveryModal","setDeliveryModal","cashModal","setCashModal","changeModal","setChangeModal","ongoingDelivery","setOngoingDelivery","name","setName","phone","setPhone","address","setAddress","deliveryChecked","setDeliveryChecked","changeDue","setChangeDue","cart","use","storeDetails","cartSub","setCartSub","saveCustomerModal","setSaveCustomerModal","savedCustomerDetails","setsavedCustomerDetails","ongoingOrderListModal","setongoingOrderListModal","settingsPasswordModalVis","setsettingsPasswordModalVis","history","height","length","newVal","i","quantity","parseFloat","price","error","console","log","deliveryPrice","AddToList","payload","Print","method","orders","collection","doc","currentUser","uid","id","update","transNum","Math","random","toString","substr","total","today","Date","data","label","website","phoneNumber","toLocaleDateString","toLocaleTimeString","map","cartItem","push","description","options","option","extraDetails","taxRate","toFixed","qz","require","websocket","connect","then","config","configs","create","comSelected","print","disconnect","catch","err","date","customer","ongoingList","JSON","parse","localStorage","getItem","setItem","stringify","DeliveryBtn","flexDirection","width","alignSelf","justifyContent","alignItems","marginBottom","styles","cashButton","opacity","btnTxt","cardButton","bigButton","container","cartHeader","fontFamily","color","fontSize","iconContainer","settingsPassword","contentContainer","index","local","structuredClone","splice","empty","fillTheCart","paddingTop","StyleSheet","padding","backgroundColor","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","shadowColor","shadowOffset","elevation","shadowOpacity","shadowRadius","totalContainer","borderRadius","margin","totalTxt","fontWeight","totalTxtPrice","innerTxt","headerTxt","marginTop"],"sources":["/Users/peterputros/Desktop/PosMate/screens/authed/CartScreen.tsx"],"sourcesContent":["import {\n  Modal,\n  ScrollView,\n  StyleSheet,\n  Text,\n  View,\n  TouchableOpacity,\n  Animated,\n} from \"react-native\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport {\n  cartState,\n  setCartState,\n  storeDetailState,\n  setIsSignedInSettingsState,\n} from \"state/state\";\nimport DeliveryScreen from \"components/DeliveryScreen\";\nimport CashScreen from \"components/CashScreen\";\nimport ChangeScreen from \"components/ChangeScreen\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport MaterialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport Feather from \"@expo/vector-icons/Feather\";\nimport SaveCustomer from \"./SaveCustomer\";\nimport { auth, db } from \"state/firebaseConfig\";\nimport CartItem from \"components/CartItem\";\nimport ProductListing from \"components/ProductListing\";\nimport Entypo from \"@expo/vector-icons/Entypo\";\nimport { useHistory } from \"react-router-dom\";\nimport CompletePaymentPhoneOrder from \"components/CompletePaymentPhoneOrder\";\nimport SettingsPasswordModal from \"components/SettingsPasswordModal\";\nimport CartItemEditable from \"components/CartItemEditable\";\nimport useWindowDimensions from \"components/useWindowDimensions\";\n\nconst CartButton = (props) => {\n  return (\n    <TouchableOpacity\n      style={props.style}\n      onPress={props.onPress}\n      disabled={props.disabled}\n    >\n      <props.icon />\n    </TouchableOpacity>\n  );\n};\n\nconst CartScreen = ({ navigation }) => {\n  const [deliveryModal, setDeliveryModal] = useState(false);\n  const [cashModal, setCashModal] = useState(false);\n  const [changeModal, setChangeModal] = useState(false);\n  const [ongoingDelivery, setOngoingDelivery] = useState(null);\n  const [name, setName] = useState(null);\n  const [phone, setPhone] = useState(null);\n  const [address, setAddress] = useState(null);\n  const [deliveryChecked, setDeliveryChecked] = useState(false);\n  const [changeDue, setChangeDue] = useState();\n  const cart = cartState.use();\n  const storeDetails = storeDetailState.use();\n  const [cartSub, setCartSub] = useState(0);\n  const [saveCustomerModal, setSaveCustomerModal] = useState(false);\n  const [savedCustomerDetails, setsavedCustomerDetails] = useState(null);\n  const [ongoingOrderListModal, setongoingOrderListModal] = useState(false);\n  const [settingsPasswordModalVis, setsettingsPasswordModalVis] =\n    useState(false);\n  const history = useHistory();\n  const height = useWindowDimensions().height;\n\n  useEffect(() => {\n    // console.log(\"cart\", cart);\n    if (cart.length > 0) {\n      let newVal = 0;\n      for (let i = 0; i < cart.length; i++) {\n        try {\n          if (cart[i].quantity > 1) {\n            newVal += parseFloat(cart[i].price) * cart[i].quantity;\n            // console.log(\"Cart item quantity \", cart[i].quantity);\n          } else {\n            newVal += parseFloat(cart[i].price);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n      if (deliveryChecked) {\n        setCartSub(newVal + parseFloat(storeDetails.deliveryPrice));\n      } else {\n        setCartSub(newVal);\n      }\n    } else {\n      setCartSub(0);\n    }\n  }, [cart]);\n\n  const AddToList = async (payload) => {\n    updateTransList(payload);\n  };\n\n  const Print = (method) => {\n    if (savedCustomerDetails) {\n      if (savedCustomerDetails.orders?.length > 0) {\n        db.collection(\"users\")\n          .doc(auth.currentUser?.uid)\n          .collection(\"customers\")\n          .doc(savedCustomerDetails.id)\n          .update({\n            orders: [...savedCustomerDetails.orders, { cart }],\n          });\n      } else {\n        db.collection(\"users\")\n          .doc(auth.currentUser?.uid)\n          .collection(\"customers\")\n          .doc(savedCustomerDetails.id)\n          .update({\n            orders: [{ cart }],\n          });\n      }\n    }\n\n    const transNum = Math.random().toString(36).substr(2, 9);\n    if (method === \"deliveryOrder\") {\n      let total = cartSub;\n      const today = new Date();\n\n      const data = [\n        \"\\x1B\" + \"\\x40\", // init\n        \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n        storeDetails.name,\n        \"\\x0A\",\n        storeDetails.address?.label + \"\\x0A\",\n        storeDetails.website + \"\\x0A\", // text and line break\n        storeDetails.phoneNumber + \"\\x0A\", // text and line break\n        today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\",\n        \"\\x0A\",\n        `Transaction ID ${transNum}` + \"\\x0A\",\n        \"\\x0A\",\n        `Delivery Order: $${\n          storeDetails.deliveryPrice ? storeDetails.deliveryPrice : \"0\"\n        } Fee` + \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n      ];\n\n      cart.map((cartItem) => {\n        data.push(`Name: ${cartItem.name}`);\n        data.push(\"\\x0A\");\n\n        if (cartItem.quantity > 1) {\n          total += parseFloat(cartItem.price) * cartItem.quantity;\n          data.push(`Quantity: ${cartItem.quantity}`);\n          data.push(\"\\x0A\");\n          data.push(`Price: $${cartItem.price * cartItem.quantity}`);\n        } else {\n          total += parseFloat(cartItem.price);\n          data.push(`Price: $${cartItem.price}`);\n        }\n\n        if (cartItem.description) {\n          data.push(\"\\x0A\");\n          data.push(cartItem.description);\n        }\n\n        if (cartItem.options) {\n          data.push(\"\\x0A\");\n          cartItem.options.map((option) => {\n            data.push(option);\n            data.push(\"\\x0A\");\n          });\n        }\n\n        if (cartItem.extraDetails) {\n          data.push(cartItem.extraDetails);\n          data.push(\"\\x0A\");\n        }\n\n        data.push(\"\\x0A\" + \"\\x0A\");\n      });\n\n      total = storeDetails.taxRate\n        ? total * (1 + storeDetails.taxRate / 100)\n        : total * 1.13;\n      total = total.toFixed(2);\n\n      //push ending\n      data.push(\n        \"\\x0A\",\n        \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n        \"\\x0A\" + \"\\x0A\",\n        \"Customer Name: \" + name,\n        \"\\x0A\" + \"\\x0A\",\n        \"Customer Phone #:  \" + phone,\n        \"\\x0A\" + \"\\x0A\",\n        \"Customer Address #:  \" + address?.label,\n        \"\\x0A\" + \"\\x0A\",\n        `Total Including (${\n          storeDetails.taxRate ? storeDetails.taxRate : \"13\"\n        }% Tax): ` +\n          total +\n          \"\\x0A\" +\n          \"\\x0A\",\n        \"------------------------------------------\" + \"\\x0A\",\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x1D\" + \"\\x56\" + \"\\x30\"\n      );\n      // fetch(\"http://localhost:8080/print\", {\n      //   method: \"POST\",\n      //   headers: {\n      //     \"Content-Type\": \"application/json\",\n      //   },\n      //   body: JSON.stringify({\n      //     printData: data,\n      //     comSelected: storeDetails.comSelected,\n      //   }),\n      // })\n      //   .then((response) => response.json())\n      //   .then((respData) => {\n      //     console.log(respData);\n      //   })\n      //   .catch((e) => alert(\"Error with printer\"));\n      const qz = require(\"qz-tray\");\n      qz.websocket\n        .connect()\n        .then(function () {\n          const config = qz.configs.create(storeDetails.comSelected);\n          return qz.print(config, data);\n        })\n        .then(qz.websocket.disconnect)\n        .catch(function (err) {\n          console.error(err);\n        });\n\n      AddToList({\n        id: Math.random().toString(36).substr(2, 9) + \"-l\",\n        date: today,\n        transNum: transNum,\n        total: total,\n        method: \"deliveryOrder\",\n        cart: cart,\n        // completed: false,\n        customer: {\n          name: name,\n          phone: phone,\n          address: address ? address : null,\n        },\n      });\n\n      const ongoingList = JSON.parse(localStorage.getItem(\"ongoingList\"));\n      if (ongoingList) {\n        ongoingList.push({\n          id: Math.random().toString(36).substr(2, 9) + \"-l\",\n          date: today,\n          transNum: transNum,\n          total: total,\n          method: \"deliveryOrder\",\n          cart: cart,\n          customer: {\n            name: name,\n            phone: phone,\n            address: address ? address : null,\n          },\n        });\n        localStorage.setItem(\"ongoingList\", JSON.stringify(ongoingList));\n      } else {\n        localStorage.setItem(\n          \"ongoingList\",\n          JSON.stringify([\n            {\n              id: Math.random().toString(36).substr(2, 9) + \"-l\",\n              date: today,\n              transNum: transNum,\n              total: total,\n              method: \"deliveryOrder\",\n              cart: cart,\n              customer: {\n                name: name,\n                phone: phone,\n                address: address ? address : null,\n              },\n            },\n          ])\n        );\n      }\n\n      setCartState([]);\n      setDeliveryModal(false);\n    } else if (method === \"pickupOrder\") {\n      let total = 0;\n      const today = new Date();\n\n      const data = [\n        \"\\x1B\" + \"\\x40\", // init\n        \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n        storeDetails.name,\n        \"\\x0A\",\n        storeDetails.address?.label + \"\\x0A\",\n        storeDetails.website + \"\\x0A\", // text and line break\n        storeDetails.phoneNumber + \"\\x0A\", // text and line break\n        today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\",\n        \"\\x0A\",\n        `Transaction ID ${transNum}` + \"\\x0A\",\n        \"\\x0A\",\n        \"Pickup Order\" + \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n      ];\n\n      cart.map((cartItem) => {\n        data.push(`Name: ${cartItem.name}`);\n        data.push(\"\\x0A\");\n\n        if (cartItem.quantity > 1) {\n          total += parseFloat(cartItem.price) * cartItem.quantity;\n          data.push(`Quantity: ${cartItem.quantity}`);\n          data.push(\"\\x0A\");\n          data.push(`Price: $${cartItem.price * cartItem.quantity}`);\n        } else {\n          total += parseFloat(cartItem.price);\n          data.push(`Price: $${cartItem.price}`);\n        }\n\n        if (cartItem.description) {\n          data.push(\"\\x0A\");\n          data.push(cartItem.description);\n        }\n\n        if (cartItem.options) {\n          data.push(\"\\x0A\");\n          cartItem.options.map((option) => {\n            data.push(option);\n            data.push(\"\\x0A\");\n          });\n        }\n\n        if (cartItem.extraDetails) {\n          data.push(cartItem.extraDetails);\n          data.push(\"\\x0A\");\n        }\n\n        data.push(\"\\x0A\" + \"\\x0A\");\n      });\n\n      total = total * 1.13;\n      total = total.toFixed(2);\n\n      //push ending\n      data.push(\n        \"\\x0A\",\n        \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n        \"\\x0A\" + \"\\x0A\",\n        \"Customer Name: \" + name,\n        \"\\x0A\" + \"\\x0A\",\n        \"Customer Phone #:  \" + phone,\n        \"\\x0A\" + \"\\x0A\",\n        `Total Including (${\n          storeDetails.taxRate ? storeDetails.taxRate : \"13\"\n        }% Tax): ` +\n          total +\n          \"\\x0A\" +\n          \"\\x0A\",\n        \"------------------------------------------\" + \"\\x0A\",\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x0A\", // line break\n        \"\\x1D\" + \"\\x56\" + \"\\x30\"\n      );\n      // fetch(\"http://localhost:8080/print\", {\n      //   method: \"POST\",\n      //   headers: {\n      //     \"Content-Type\": \"application/json\",\n      //   },\n      //   body: JSON.stringify({\n      //     printData: data,\n      //     comSelected: storeDetails.comSelected,\n      //   }),\n      // })\n      //   .then((response) => response.json())\n      //   .then((respData) => {\n      //     console.log(respData);\n      //   })\n      //   .catch((e) => alert(\"Error with printer\"));\n      const qz = require(\"qz-tray\");\n      qz.websocket\n        .connect()\n        .then(function () {\n          const config = qz.configs.create(storeDetails.comSelected);\n          return qz.print(config, data);\n        })\n        .then(qz.websocket.disconnect)\n        .catch(function (err) {\n          console.error(err);\n        });\n\n      AddToList({\n        id: Math.random().toString(36).substr(2, 9) + \"-l\",\n        date: today,\n        transNum: transNum,\n        total: total,\n        method: \"pickupOrder\",\n        cart: cart,\n        customer: {\n          name: name,\n          phone: phone,\n          address: address ? address : null,\n        },\n      });\n\n      const ongoingList = JSON.parse(localStorage.getItem(\"ongoingList\"));\n      if (ongoingList) {\n        ongoingList.push({\n          id: Math.random().toString(36).substr(2, 9) + \"-l\",\n          date: today,\n          transNum: transNum,\n          total: total,\n          method: \"pickupOrder\",\n          cart: cart,\n          customer: {\n            name: name,\n            phone: phone,\n            address: address ? address : null,\n          },\n        });\n        localStorage.setItem(\"ongoingList\", JSON.stringify(ongoingList));\n      } else {\n        localStorage.setItem(\n          \"ongoingList\",\n          JSON.stringify([\n            {\n              id: Math.random().toString(36).substr(2, 9) + \"-l\",\n              date: today,\n              transNum: transNum,\n              total: total,\n              method: \"pickupOrder\",\n              cart: cart,\n              customer: {\n                name: name,\n                phone: phone,\n                address: address ? address : null,\n              },\n            },\n          ])\n        );\n      }\n\n      setCartState([]);\n      setDeliveryModal(false);\n    } else {\n      let total = 0;\n      const today = new Date();\n\n      const data = [\n        \"\\x1B\" + \"\\x40\", // init\n        \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n        storeDetails.name,\n        \"\\x0A\",\n        storeDetails.address?.label + \"\\x0A\",\n        storeDetails.website + \"\\x0A\", // text and line break\n        storeDetails.phoneNumber + \"\\x0A\", // text and line break\n        today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\",\n        \"\\x0A\",\n        `Transaction ID ${transNum}` + \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x0A\",\n        \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n      ];\n\n      cart.map((cartItem) => {\n        data.push(`Name: ${cartItem.name}`);\n        data.push(\"\\x0A\");\n\n        if (cartItem.quantity > 1) {\n          total += parseFloat(cartItem.price) * cartItem.quantity;\n          data.push(`Quantity: ${cartItem.quantity}`);\n          data.push(\"\\x0A\");\n          data.push(`Price: $${cartItem.price * cartItem.quantity}`);\n        } else {\n          total += parseFloat(cartItem.price);\n          data.push(`Price: $${cartItem.price}`);\n        }\n\n        if (cartItem.description) {\n          data.push(\"\\x0A\");\n          data.push(cartItem.description);\n        }\n\n        if (cartItem.options) {\n          data.push(\"\\x0A\");\n          cartItem.options.map((option) => {\n            data.push(option);\n            data.push(\"\\x0A\");\n          });\n        }\n\n        if (cartItem.extraDetails) {\n          data.push(cartItem.extraDetails);\n          data.push(\"\\x0A\");\n        }\n\n        data.push(\"\\x0A\" + \"\\x0A\");\n      });\n\n      total = total * 1.13;\n      total = total.toFixed(2);\n\n      if (method === \"Cash\") {\n        //push ending\n        data.push(\n          \"\\x0A\",\n          \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n          \"\\x0A\" + \"\\x0A\",\n          \"Payment Method: \" + method + \"\\x0A\" + \"\\x0A\",\n          `Total Including (${\n            storeDetails.taxRate ? storeDetails.taxRate : \"13\"\n          }% Tax): ` +\n            \"$\" +\n            total +\n            \"\\x0A\" +\n            \"\\x0A\",\n          \"Change Due: \" + \"$\" + changeDue + \"\\x0A\" + \"\\x0A\",\n          \"------------------------------------------\" + \"\\x0A\",\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          //\"\\x1D\" + \"\\x56\" + \"\\x00\",\n          \"\\x1D\" + \"\\x56\" + \"\\x30\" + \"\\x10\" + \"\\x14\" + \"\\x01\" + \"\\x00\" + \"\\x05\"\n        );\n      } else {\n        data.push(\n          \"\\x0A\",\n          \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n          \"\\x0A\" + \"\\x0A\",\n          \"Payment Method: \" + method + \"\\x0A\" + \"\\x0A\",\n          `Total Including (${\n            storeDetails.taxRate ? storeDetails.taxRate : \"13\"\n          }% Tax): ` +\n            \"$\" +\n            total +\n            \"\\x0A\" +\n            \"\\x0A\",\n          \"------------------------------------------\" + \"\\x0A\",\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          \"\\x0A\", // line break\n          //\"\\x1D\" + \"\\x56\" + \"\\x00\",\n          \"\\x1D\" + \"\\x56\" + \"\\x30\"\n        );\n      }\n\n      // fetch(\"http://localhost:8080/print\", {\n      //   method: \"POST\",\n      //   headers: {\n      //     \"Content-Type\": \"application/json\",\n      //   },\n      //   body: JSON.stringify({\n      //     printData: data,\n      //     comSelected: storeDetails.comSelected,\n      //   }),\n      // })\n      //   .then((response) => response.json())\n      //   .then((respData) => {\n      //     console.log(respData);\n      //   })\n      //   .catch((e) => alert(\"Error with printer\"));\n      const qz = require(\"qz-tray\");\n      qz.websocket\n        .connect()\n        .then(function () {\n          const config = qz.configs.create(storeDetails.comSelected);\n          return qz.print(config, data);\n        })\n        .then(qz.websocket.disconnect)\n        .catch(function (err) {\n          console.error(err);\n        });\n\n      AddToList({\n        id: Math.random().toString(36).substr(2, 9) + \"-l\",\n        date: today,\n        transNum: transNum,\n        total: total,\n        method: method,\n        cart: cart,\n      });\n    }\n\n    setCartState([]);\n  };\n\n  const DeliveryBtn = () => {\n    if (ongoingDelivery === null) {\n      return (\n        <View\n          style={{\n            flexDirection: \"row\",\n            width: \"100%\",\n            alignSelf: \"center\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 10,\n          }}\n        >\n          <TouchableOpacity\n            style={[styles.cashButton, cartSub === 0 && { opacity: 0.5 }]}\n            onPress={() => setCashModal(true)}\n            disabled={cart.length < 1 || ongoingDelivery}\n          >\n            <Text style={styles.btnTxt}>Cash</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[styles.cardButton, cartSub === 0 && { opacity: 0.5 }]}\n            onPress={() => Print(\"Card\")}\n            disabled={cart.length < 1 || ongoingDelivery}\n          >\n            <Text style={styles.btnTxt}>Card</Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }\n    if (ongoingDelivery && cart.length > 0) {\n      return (\n        <TouchableOpacity\n          style={styles.bigButton}\n          onPress={() => {\n            Print(deliveryChecked ? \"deliveryOrder\" : \"pickupOrder\");\n            setOngoingDelivery(null);\n            setName(null);\n            setPhone(null);\n            setAddress(null);\n          }}\n        >\n          <Text style={styles.btnTxt}>Complete</Text>\n        </TouchableOpacity>\n      );\n    } else {\n      return (\n        <TouchableOpacity\n          style={styles.bigButton}\n          onPress={() => {\n            setOngoingDelivery(null);\n            setDeliveryChecked(false);\n          }}\n        >\n          <Text style={styles.btnTxt}>Cancel</Text>\n        </TouchableOpacity>\n      );\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.cartHeader}>\n        <Text\n          style={{\n            fontFamily: \"archivo-600\",\n            color: \"rgba(255,255,255,1)\",\n            fontSize: 25,\n          }}\n        >\n          Order\n        </Text>\n        <View\n          style={{\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n          }}\n        >\n          <CartButton\n            style={[styles.iconContainer, cart.length > 0 && { opacity: 0.5 }]}\n            onPress={() => setSaveCustomerModal(true)}\n            disabled={cart.length > 0}\n            icon={() => (\n              <MaterialCommunityIcons name=\"history\" size={26} color=\"white\" />\n            )}\n          />\n          <CartButton\n            style={[styles.iconContainer, cart.length > 0 && { opacity: 0.5 }]}\n            onPress={() => setDeliveryModal(true)}\n            disabled={cart.length > 0}\n            icon={() => <Feather name=\"phone-call\" size={28} color=\"white\" />}\n          />\n\n          <CartButton\n            style={[styles.iconContainer, cart.length > 0 && { opacity: 0.5 }]}\n            onPress={() => setongoingOrderListModal(true)}\n            icon={() => (\n              <Ionicons name=\"chevron-down\" size={28} color=\"white\" />\n            )}\n          />\n          <CartButton\n            style={[styles.iconContainer, cart.length > 0 && { opacity: 0.5 }]}\n            onPress={() => {\n              if (storeDetails.settingsPassword) {\n                setsettingsPasswordModalVis(true);\n              } else {\n                setIsSignedInSettingsState(true);\n                history.push(\"/authed/dashboard\");\n              }\n            }}\n            icon={() => <Entypo name=\"cog\" size={28} color=\"white\" />}\n          />\n        </View>\n      </View>\n      <ScrollView\n        contentContainerStyle={styles.contentContainer}\n        style={{ marginBottom: 10 }}\n      >\n        <View>\n          {cart.length > 0 ? (\n            cart.map((cartItem, index) => (\n              <CartItemEditable\n                key={index}\n                cartItem={cartItem}\n                index={index}\n                removeAction={() => {\n                  console.log(\"Removing\");\n                  const local = structuredClone(cart);\n                  local.splice(index, 1);\n                  setCartState(local);\n                }}\n                decreaseAction={() => {\n                  const local = structuredClone(cart);\n                  local[index].quantity--;\n                  setCartState(local);\n                }}\n                increaseAction={() => {\n                  const local = structuredClone(cart);\n                  if (local[index].quantity) {\n                    local[index].quantity++;\n                  } else {\n                    local[index].quantity = 2;\n                  }\n                  setCartState(local);\n                }}\n              />\n            ))\n          ) : (\n            <View\n              style={{\n                height: height * 0.7,\n                width: \"100%\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n              }}\n            >\n              <Text style={styles.empty}>Empty...</Text>\n              <Text style={styles.fillTheCart}>Fill the Cart!</Text>\n            </View>\n          )}\n        </View>\n      </ScrollView>\n      <View\n        style={{\n          justifyContent: \"space-around\",\n          alignItems: \"center\",\n          width: \"90%\",\n          alignSelf: \"center\",\n        }}\n      >\n        {deliveryChecked && parseFloat(storeDetails.deliveryPrice) && (\n          <View\n            style={{\n              alignSelf: \"stretch\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: 2,\n              paddingTop: 5,\n            }}\n          >\n            <Text\n              style={{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(74,74,74,1)\",\n                fontSize: 16,\n                alignSelf: \"flex-start\",\n              }}\n            >\n              Delivery\n            </Text>\n            <Text\n              style={[\n                {\n                  fontFamily: \"archivo-600\",\n                  color: \"rgba(255,255,255,1)\",\n                  fontSize: 20,\n                  alignSelf: \"flex-start\",\n                },\n                cartSub === 0 && { opacity: 0.5 },\n              ]}\n            >\n              ${parseFloat(storeDetails.deliveryPrice).toFixed(2)}\n            </Text>\n          </View>\n        )}\n        <View\n          style={{\n            alignSelf: \"stretch\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 2,\n          }}\n        >\n          <Text\n            style={{\n              fontFamily: \"archivo-600\",\n              color: \"rgba(74,74,74,1)\",\n              fontSize: 16,\n              alignSelf: \"flex-start\",\n            }}\n          >\n            Sub Total\n          </Text>\n          <Text\n            style={[\n              {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\",\n              },\n              cartSub === 0 && { opacity: 0.5 },\n            ]}\n          >\n            ${cartSub.toFixed(2)}\n          </Text>\n        </View>\n        <View\n          style={{\n            alignSelf: \"stretch\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 2,\n          }}\n        >\n          <Text\n            style={{\n              fontFamily: \"archivo-600\",\n              color: \"rgba(74,74,74,1)\",\n              fontSize: 16,\n              alignSelf: \"flex-start\",\n            }}\n          >\n            Tax\n          </Text>\n          <Text\n            style={[\n              {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\",\n              },\n              cartSub === 0 && { opacity: 0.5 },\n            ]}\n          >\n            $\n            {(\n              cartSub *\n              (storeDetails.taxRate ? storeDetails.taxRate / 100 : 0.13)\n            ).toFixed(2)}\n          </Text>\n        </View>\n        <View\n          style={{\n            alignSelf: \"stretch\",\n            flexDirection: \"row\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\",\n            marginBottom: 10,\n          }}\n        >\n          <Text\n            style={{\n              fontFamily: \"archivo-600\",\n              color: \"rgba(74,74,74,1)\",\n              fontSize: 16,\n              alignSelf: \"flex-start\",\n            }}\n          >\n            Total\n          </Text>\n          <Text\n            style={[\n              {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\",\n              },\n              cartSub === 0 && { opacity: 0.5 },\n            ]}\n          >\n            ${(cartSub * 1.13).toFixed(2)}\n          </Text>\n        </View>\n        <DeliveryBtn />\n      </View>\n      <Modal visible={saveCustomerModal} transparent={true}>\n        <SaveCustomer\n          setSaveCustomerModal={setSaveCustomerModal}\n          setOngoingDelivery={setOngoingDelivery}\n          setNameForDelivery={setName}\n          setPhoneForDelivery={setPhone}\n          setAddressForDelivery={setAddress}\n          setDeliveryChecked={setDeliveryChecked}\n          setsavedCustomerDetails={setsavedCustomerDetails}\n        />\n      </Modal>\n      <Modal visible={deliveryModal} transparent={true}>\n        <DeliveryScreen\n          setsavedCustomerDetails={setsavedCustomerDetails}\n          setDeliveryModal={setDeliveryModal}\n          setOngoingDelivery={setOngoingDelivery}\n          setName={setName}\n          setPhone={setPhone}\n          setAddress={setAddress}\n          name={name}\n          phone={phone}\n          address={address}\n          deliveryChecked={deliveryChecked}\n          setDeliveryChecked={setDeliveryChecked}\n        />\n      </Modal>\n      <Modal visible={cashModal} transparent>\n        <CashScreen\n          setCashModal={setCashModal}\n          GetTrans={() => Print(\"Cash\")}\n          total={(cartSub * 1.13).toFixed(2)}\n          setChangeDue={setChangeDue}\n        />\n      </Modal>\n      <Modal visible={changeModal}>\n        <ChangeScreen setChangeModal={setChangeModal} />\n      </Modal>\n      <Modal visible={ongoingOrderListModal} transparent={true}>\n        <CompletePaymentPhoneOrder\n          setongoingOrderListModal={setongoingOrderListModal}\n        />\n      </Modal>\n      <Modal visible={settingsPasswordModalVis} transparent={true}>\n        <SettingsPasswordModal\n          setsettingsPasswordModalVis={setsettingsPasswordModalVis}\n          navigation={navigation}\n        />\n      </Modal>\n    </View>\n  );\n};\n\nexport default CartScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    height: \"100%\",\n    width: \"30%\",\n    padding: 20,\n    backgroundColor: \"rgba(31,35,48,1)\",\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n    borderTopLeftRadius: 2,\n    borderBottomLeftRadius: 2,\n    shadowColor: \"rgba(0,0,0,1)\",\n    shadowOffset: {\n      width: -3,\n      height: 3,\n    },\n    elevation: 30,\n    shadowOpacity: 0.92,\n    shadowRadius: 5,\n  },\n  contentContainer: {\n    height: \"100%\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n  },\n  totalContainer: {\n    height: \"14%\",\n    paddingTop: 10,\n  },\n  cartHeader: {\n    height: \"6%\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: 20,\n  },\n  iconContainer: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backgroundColor: \"rgba(41,44,56,1)\",\n    borderRadius: 15,\n    width: 50,\n    height: 50,\n    margin: 10,\n  },\n  cashButton: {\n    backgroundColor: \"rgba(51,81,243,1)\",\n    borderRadius: 30,\n    borderTopRightRadius: 0,\n    borderBottomRightRadius: 0,\n    width: \"49.5%\",\n    height: 55,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  cardButton: {\n    backgroundColor: \"rgba(51,81,243,1)\",\n    borderRadius: 30,\n    borderTopRightRadius: 30,\n    borderBottomRightRadius: 30,\n    borderTopLeftRadius: 0,\n    borderBottomLeftRadius: 0,\n    width: \"49.5%\",\n    height: 55,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  btnTxt: {\n    fontSize: 20,\n    color: \"white\",\n  },\n  totalTxt: {\n    fontSize: 16,\n    marginBottom: 5,\n    color: \"rgba(255,255,255,1)\",\n    fontWeight: \"600\",\n  },\n  totalTxtPrice: {\n    fontSize: 16,\n    marginBottom: 5,\n    color: \"rgba(255,255,255,1)\",\n    fontWeight: \"600\",\n  },\n  bigButton: {\n    backgroundColor: \"rgba(51,81,243,1)\",\n    borderRadius: 30,\n    width: \"98%\",\n    height: 55,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  innerTxt: {\n    fontSize: 13,\n    marginBottom: 10,\n  },\n  headerTxt: {\n    fontSize: 15,\n    fontWeight: \"600\",\n  },\n  empty: {\n    fontFamily: \"archivo-600\",\n    color: \"rgba(255,255,255,1)\",\n    fontSize: 20,\n    opacity: 0.44,\n    marginTop: 20,\n  },\n  fillTheCart: {\n    fontFamily: \"archivo-500\",\n    color: \"rgba(74,74,74,1)\",\n    fontSize: 20,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}