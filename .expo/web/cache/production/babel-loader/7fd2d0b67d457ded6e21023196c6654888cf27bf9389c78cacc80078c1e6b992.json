{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty2(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,\"string\");return typeof key===\"symbol\"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!==\"object\"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||\"default\");if(typeof res!==\"object\")return res;throw new TypeError(\"@@toPrimitive must return a primitive value.\");}return(hint===\"string\"?String:Number)(input);}import NativeReanimatedModule from\"./NativeReanimated\";import{registerEventHandler,unregisterEventHandler}from\"./core\";function jsListener(eventName,handler){return function(evt){handler(_objectSpread(_objectSpread({},evt.nativeEvent),{},{eventName:eventName}));};}var WorkletEventHandler=function(){function WorkletEventHandler(worklet){_classCallCheck(this,WorkletEventHandler);var eventNames=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_defineProperty(this,\"worklet\",void 0);_defineProperty(this,\"eventNames\",void 0);_defineProperty(this,\"reattachNeeded\",void 0);_defineProperty(this,\"listeners\",void 0);_defineProperty(this,\"viewTag\",void 0);_defineProperty(this,\"registrations\",void 0);this.worklet=worklet;this.eventNames=eventNames;this.reattachNeeded=false;this.listeners={};this.viewTag=undefined;this.registrations=[];if(!NativeReanimatedModule.native){this.listeners=eventNames.reduce(function(acc,eventName){acc[eventName]=jsListener(eventName,worklet);return acc;},{});}}_createClass(WorkletEventHandler,[{key:\"updateWorklet\",value:function updateWorklet(newWorklet){this.worklet=newWorklet;this.reattachNeeded=true;}},{key:\"registerForEvents\",value:function registerForEvents(viewTag,fallbackEventName){var _this=this;this.viewTag=viewTag;this.registrations=this.eventNames.map(function(eventName){return registerEventHandler(viewTag+eventName,_this.worklet);});if(this.registrations.length===0&&fallbackEventName){this.registrations.push(registerEventHandler(viewTag+fallbackEventName,this.worklet));}}},{key:\"unregisterFromEvents\",value:function unregisterFromEvents(){this.registrations.forEach(function(id){return unregisterEventHandler(id);});this.registrations=[];}}]);return WorkletEventHandler;}();export{WorkletEventHandler as default};","map":{"version":3,"mappings":"slDACA,MAAOA,uBAAsB,0BAC7B,OAASC,oBAAoB,CAAEC,sBAAsB,cAErD,QAASC,WAAUA,CACjBC,SAAiB,CACjBC,OAA2B,CAC3B,CACA,MAAQC,aAAM,CAAK,CACjBD,OAAO,gCAAMC,GAAG,CAACC,WAAW,MAAEH,sBAAY,CAC5C,CAAC,CACH,IAEqBI,oBAAmB,YAOtCC,6BAAYC,OAA2B,CAA6B,8CAA3BC,WAAoB,2DAAG,EAAE,6PAChE,IAAI,CAACD,OAAO,CAAGA,OAAO,CACtB,IAAI,CAACC,UAAU,CAAGA,UAAU,CAC5B,IAAI,CAACC,cAAc,CAAG,KAAK,CAC3B,IAAI,CAACC,SAAS,CAAG,CAAC,CAAC,CACnB,IAAI,CAACC,OAAO,CAAGC,SAAS,CACxB,IAAI,CAACC,aAAa,CAAG,EAAE,CAEvB,GAAI,CAAChB,sBAAsB,CAACiB,MAAM,CAAE,CAClC,IAAI,CAACJ,SAAS,CAAGF,UAAU,CAACO,MAAM,CAChC,SAACC,GAAuC,CAAEf,SAAiB,CAAK,CAC9De,GAAG,CAACf,SAAS,CAAC,CAAGD,UAAU,CAACC,SAAS,CAAEM,OAAO,CAAC,CAC/C,MAAOS,IAAG,CACZ,CAAC,CACD,CAAC,CAAC,CACH,CACH,CACF,8DAEAC,uBAAcC,UAA8B,CAAQ,CAClD,IAAI,CAACX,OAAO,CAAGW,UAAU,CACzB,IAAI,CAACT,cAAc,CAAG,IAAI,CAC5B,kCAEAU,2BAAkBR,OAAe,CAAES,iBAA0B,CAAQ,gBACnE,IAAI,CAACT,OAAO,CAAGA,OAAO,CACtB,IAAI,CAACE,aAAa,CAAG,IAAI,CAACL,UAAU,CAACa,GAAG,CAAEpB,kBAAS,QACjDH,qBAAoB,CAACa,OAAO,CAAGV,SAAS,CAAE,KAAI,CAACM,OAAO,CAAC,GACxD,CACD,GAAI,IAAI,CAACM,aAAa,CAACS,MAAM,GAAK,CAAC,EAAIF,iBAAiB,CAAE,CACxD,IAAI,CAACP,aAAa,CAACU,IAAI,CACrBzB,oBAAoB,CAACa,OAAO,CAAGS,iBAAiB,CAAE,IAAI,CAACb,OAAO,CAAC,CAChE,CACH,CACF,qCAEAiB,+BAA6B,CAC3B,IAAI,CAACX,aAAa,CAACY,OAAO,CAAEC,WAAE,QAAK3B,uBAAsB,CAAC2B,EAAE,CAAC,GAAC,CAC9D,IAAI,CAACb,aAAa,CAAG,EAAE,CACzB,2CA9CmBR,mBAAmB","names":["NativeReanimatedModule","registerEventHandler","unregisterEventHandler","jsListener","eventName","handler","evt","nativeEvent","WorkletEventHandler","constructor","worklet","eventNames","reattachNeeded","listeners","viewTag","undefined","registrations","native","reduce","acc","updateWorklet","newWorklet","registerForEvents","fallbackEventName","map","length","push","unregisterFromEvents","forEach","id"],"sources":["/Users/peterputros/Desktop/PosMate/node_modules/react-native-reanimated/lib/module/reanimated2/WorkletEventHandler.ts"],"sourcesContent":["import { NativeEvent } from './commonTypes';\nimport NativeReanimatedModule from './NativeReanimated';\nimport { registerEventHandler, unregisterEventHandler } from './core';\n\nfunction jsListener<T extends NativeEvent<T>>(\n  eventName: string,\n  handler: (event: T) => void\n) {\n  return (evt: T) => {\n    handler({ ...evt.nativeEvent, eventName });\n  };\n}\n\nexport default class WorkletEventHandler<T extends NativeEvent<T>> {\n  worklet: (event: T) => void;\n  eventNames: string[];\n  reattachNeeded: boolean;\n  listeners: Record<string, (event: T) => void>;\n  viewTag: number | undefined;\n  registrations: string[];\n  constructor(worklet: (event: T) => void, eventNames: string[] = []) {\n    this.worklet = worklet;\n    this.eventNames = eventNames;\n    this.reattachNeeded = false;\n    this.listeners = {};\n    this.viewTag = undefined;\n    this.registrations = [];\n\n    if (!NativeReanimatedModule.native) {\n      this.listeners = eventNames.reduce(\n        (acc: Record<string, (event: T) => void>, eventName: string) => {\n          acc[eventName] = jsListener(eventName, worklet);\n          return acc;\n        },\n        {}\n      );\n    }\n  }\n\n  updateWorklet(newWorklet: (event: T) => void): void {\n    this.worklet = newWorklet;\n    this.reattachNeeded = true;\n  }\n\n  registerForEvents(viewTag: number, fallbackEventName?: string): void {\n    this.viewTag = viewTag;\n    this.registrations = this.eventNames.map((eventName) =>\n      registerEventHandler(viewTag + eventName, this.worklet)\n    );\n    if (this.registrations.length === 0 && fallbackEventName) {\n      this.registrations.push(\n        registerEventHandler(viewTag + fallbackEventName, this.worklet)\n      );\n    }\n  }\n\n  unregisterFromEvents(): void {\n    this.registrations.forEach((id) => unregisterEventHandler(id));\n    this.registrations = [];\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}