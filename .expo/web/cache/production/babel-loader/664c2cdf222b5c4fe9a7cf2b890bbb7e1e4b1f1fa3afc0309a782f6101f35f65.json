{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _objectSpread from\"@babel/runtime/helpers/objectSpread2\";import invariant from'fbjs/lib/invariant';var TaskQueue=function(){function TaskQueue(_ref){_classCallCheck(this,TaskQueue);var onMoreTasks=_ref.onMoreTasks;this._onMoreTasks=onMoreTasks;this._queueStack=[{tasks:[],popable:true}];}_createClass(TaskQueue,[{key:\"enqueue\",value:function enqueue(task){this._getCurrentQueue().push(task);}},{key:\"enqueueTasks\",value:function enqueueTasks(tasks){var _this=this;tasks.forEach(function(task){return _this.enqueue(task);});}},{key:\"cancelTasks\",value:function cancelTasks(tasksToCancel){this._queueStack=this._queueStack.map(function(queue){return _objectSpread(_objectSpread({},queue),{},{tasks:queue.tasks.filter(function(task){return tasksToCancel.indexOf(task)===-1;})});}).filter(function(queue,idx){return queue.tasks.length>0||idx===0;});}},{key:\"hasTasksToProcess\",value:function hasTasksToProcess(){return this._getCurrentQueue().length>0;}},{key:\"processNext\",value:function processNext(){var queue=this._getCurrentQueue();if(queue.length){var task=queue.shift();try{if(typeof task==='object'&&task.gen){this._genPromise(task);}else if(typeof task==='object'&&task.run){task.run();}else{invariant(typeof task==='function','Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(task,null,2));task();}}catch(e){e.message='TaskQueue: Error with task '+(task.name||'')+': '+e.message;throw e;}}}},{key:\"_getCurrentQueue\",value:function _getCurrentQueue(){var stackIdx=this._queueStack.length-1;var queue=this._queueStack[stackIdx];if(queue.popable&&queue.tasks.length===0&&stackIdx>0){this._queueStack.pop();return this._getCurrentQueue();}else{return queue.tasks;}}},{key:\"_genPromise\",value:function _genPromise(task){var _this2=this;var length=this._queueStack.push({tasks:[],popable:false});var stackIdx=length-1;var stackItem=this._queueStack[stackIdx];task.gen().then(function(){stackItem.popable=true;_this2.hasTasksToProcess()&&_this2._onMoreTasks();}).catch(function(ex){setTimeout(function(){ex.message=\"TaskQueue: Error resolving Promise in task \"+task.name+\": \"+ex.message;throw ex;},0);});}}]);return TaskQueue;}();export default TaskQueue;","map":{"version":3,"names":["_objectSpread","invariant","TaskQueue","_ref","onMoreTasks","_onMoreTasks","_queueStack","tasks","popable","task","_getCurrentQueue","push","forEach","enqueue","tasksToCancel","map","queue","filter","indexOf","idx","length","shift","gen","_genPromise","run","JSON","stringify","e","message","name","stackIdx","pop","stackItem","then","hasTasksToProcess","catch","ex","setTimeout"],"sources":["/Users/peterputros/Desktop/PosMate/node_modules/react-native-web/dist/exports/InteractionManager/TaskQueue.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\n/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport invariant from 'fbjs/lib/invariant';\nclass TaskQueue {\n  constructor(_ref) {\n    var onMoreTasks = _ref.onMoreTasks;\n    this._onMoreTasks = onMoreTasks;\n    this._queueStack = [{\n      tasks: [],\n      popable: true\n    }];\n  }\n  enqueue(task) {\n    this._getCurrentQueue().push(task);\n  }\n  enqueueTasks(tasks) {\n    tasks.forEach(task => this.enqueue(task));\n  }\n  cancelTasks(tasksToCancel) {\n    this._queueStack = this._queueStack.map(queue => _objectSpread(_objectSpread({}, queue), {}, {\n      tasks: queue.tasks.filter(task => tasksToCancel.indexOf(task) === -1)\n    })).filter((queue, idx) => queue.tasks.length > 0 || idx === 0);\n  }\n  hasTasksToProcess() {\n    return this._getCurrentQueue().length > 0;\n  }\n\n  /**\n   * Executes the next task in the queue.\n   */\n  processNext() {\n    var queue = this._getCurrentQueue();\n    if (queue.length) {\n      var task = queue.shift();\n      try {\n        if (typeof task === 'object' && task.gen) {\n          this._genPromise(task);\n        } else if (typeof task === 'object' && task.run) {\n          task.run();\n        } else {\n          invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\\n' + JSON.stringify(task, null, 2));\n          task();\n        }\n      } catch (e) {\n        e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;\n        throw e;\n      }\n    }\n  }\n  _getCurrentQueue() {\n    var stackIdx = this._queueStack.length - 1;\n    var queue = this._queueStack[stackIdx];\n    if (queue.popable && queue.tasks.length === 0 && stackIdx > 0) {\n      this._queueStack.pop();\n      return this._getCurrentQueue();\n    } else {\n      return queue.tasks;\n    }\n  }\n  _genPromise(task) {\n    var length = this._queueStack.push({\n      tasks: [],\n      popable: false\n    });\n    var stackIdx = length - 1;\n    var stackItem = this._queueStack[stackIdx];\n    task.gen().then(() => {\n      stackItem.popable = true;\n      this.hasTasksToProcess() && this._onMoreTasks();\n    }).catch(ex => {\n      setTimeout(() => {\n        ex.message = \"TaskQueue: Error resolving Promise in task \" + task.name + \": \" + ex.message;\n        throw ex;\n      }, 0);\n    });\n  }\n}\nexport default TaskQueue;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}