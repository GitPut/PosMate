{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import Modal from\"react-native-web/dist/exports/Modal\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import React,{useState}from\"react\";import{Button,Text}from\"@react-native-material/core\";import{transListState}from\"../state/state\";import{updateTransList}from\"../state/firebaseFunctions\";import ChangeScreen from\"./ChangeScreen\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CompletePaymentPhoneOrder=function CompletePaymentPhoneOrder(){var transList=transListState.use();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),changeModal=_useState2[0],setChangeModal=_useState2[1];var _useState3=useState({element:null,index:null}),_useState4=_slicedToArray(_useState3,2),currentOrder=_useState4[0],setcurrentOrder=_useState4[1];return _jsxs(View,{style:styles.container,children:[_jsx(Text,{style:{textAlign:\"center\",margin:25},children:\"Current Open Orders\"}),_jsx(View,{style:styles.contentContainer,children:transList?transList==null?void 0:transList.map(function(element,index){var _element$id,_element$id2;if(((_element$id=element.id)==null?void 0:_element$id.substr(((_element$id2=element.id)==null?void 0:_element$id2.length)-2,2))===\"-l\"&&element.completed===false&&element.cancelled!==true){var _element$cart,_element$line_items,_element$customer,_element$customer2,_element$customer3;var date=element.date?new Date(element.date.seconds*1000):element.date_created?new Date(element.date_created):null;return _jsxs(View,{style:{backgroundColor:\"grey\",padding:30,margin:10},children:[_jsx(Text,{children:date.toLocaleString()}),(_element$cart=element.cart)==null?void 0:_element$cart.map(function(cartItem,index){var _cartItem$options;return _jsxs(View,{style:{marginBottom:20},children:[_jsxs(Text,{children:[\"Name: \",cartItem.name]}),_jsxs(Text,{children:[\"Quantity: \",cartItem.quantity]}),_jsxs(Text,{children:[\"Price: \",cartItem.price]}),cartItem.options&&((_cartItem$options=cartItem.options)==null?void 0:_cartItem$options.map(function(option){return _jsx(Text,{children:option});}))]},index);}),(_element$line_items=element.line_items)==null?void 0:_element$line_items.map(function(cartItem,index){var _cartItem$meta_data;return _jsxs(View,{style:{marginBottom:20},children:[_jsxs(Text,{children:[\"Name: \",cartItem.name]}),_jsxs(Text,{children:[\"Quantity: \",cartItem.quantity]}),_jsxs(Text,{children:[\"Price: \",cartItem.price]}),(_cartItem$meta_data=cartItem.meta_data)==null?void 0:_cartItem$meta_data.map(function(meta,index){if(index===cartItem.meta_data.length-1)return;return _jsx(Text,{children:meta.key+\" : \"+meta.value});})]},index);}),_jsx(Text,{children:(_element$customer=element.customer)==null?void 0:_element$customer.name}),_jsx(Text,{children:(_element$customer2=element.customer)==null?void 0:_element$customer2.phone}),_jsx(Text,{children:(_element$customer3=element.customer)==null?void 0:_element$customer3.address}),_jsxs(Text,{children:[\"Method:\",\" \",element.method===\"pickupOrder\"?\"Pick Up\":\"Delivery\"]}),_jsx(Button,{title:\"Complete Order\",onPress:function onPress(){if(element.method===\"pickupOrder\"){setChangeModal(true);setcurrentOrder({element:element,index:index});}else{var localChange=structuredClone(transList);localChange[index].completed=true;updateTransList(localChange);}},style:{marginBottom:10}}),_jsx(Button,{title:\"Cancel Order\",onPress:function onPress(){var localChange=structuredClone(transList);localChange[index].cancelled=true;updateTransList(localChange);}})]},index);}}):_jsx(Text,{children:\"No Orders Yet\"})}),_jsx(Modal,{visible:changeModal,children:_jsx(ChangeScreen,{setChangeModal:setChangeModal,setcurrentOrder:setcurrentOrder,order:currentOrder.element,completeOrder:function completeOrder(){var localChange=structuredClone(transList);localChange[currentOrder.index].completed=true;updateTransList(localChange);setChangeModal(false);}})})]});};export default CompletePaymentPhoneOrder;var styles=StyleSheet.create({container:{backgroundColor:\"white\",flex:1,height:\"100%\"},contentContainer:{flex:1,flexDirection:\"row\",flexWrap:\"wrap\",justifyContent:\"space-between\",paddingLeft:50,paddingRight:50,paddingBottom:50,height:\"100%\",width:\"100%\",alignItems:\"center\"}});","map":{"version":3,"names":["React","useState","Button","Text","transListState","updateTransList","ChangeScreen","CompletePaymentPhoneOrder","transList","use","changeModal","setChangeModal","element","index","currentOrder","setcurrentOrder","styles","container","textAlign","margin","contentContainer","map","id","substr","length","completed","cancelled","date","Date","seconds","date_created","backgroundColor","padding","toLocaleString","cart","cartItem","marginBottom","name","quantity","price","options","option","line_items","meta_data","meta","key","value","customer","phone","address","method","localChange","structuredClone","StyleSheet","create","flex","height","flexDirection","flexWrap","justifyContent","paddingLeft","paddingRight","paddingBottom","width","alignItems"],"sources":["/Users/peterputros/Desktop/PosMate-1/components/CompletePaymentPhoneOrder.tsx"],"sourcesContent":["import { Modal, ScrollView, StyleSheet, View } from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { storeDetailState, transListState } from \"state/state\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\n\nconst CompletePaymentPhoneOrder = () => {\n  const transList = transListState.use();\n  const [changeModal, setChangeModal] = useState(false);\n  const [currentOrder, setcurrentOrder] = useState({\n    element: null,\n    index: null,\n  });\n\n  return (\n    <View style={styles.container}>\n      <Text style={{ textAlign: \"center\", margin: 25 }}>\n        Current Open Orders\n      </Text>\n      <View style={styles.contentContainer}>\n        {transList ? (\n          transList?.map((element, index) => {\n            if (\n              element.id?.substr(element.id?.length - 2, 2) === \"-l\" &&\n              element.completed === false &&\n              element.cancelled !== true\n            ) {\n              const date = element.date\n                ? new Date(element.date.seconds * 1000)\n                : element.date_created\n                ? new Date(element.date_created)\n                : null;\n\n              return (\n                <View\n                  style={{\n                    backgroundColor: \"grey\",\n                    padding: 30,\n                    margin: 10,\n                  }}\n                  key={index}\n                >\n                  <Text>{date.toLocaleString()}</Text>\n                  {element.cart?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.options &&\n                        cartItem.options?.map((option) => (\n                          <Text>{option}</Text>\n                        ))}\n                    </View>\n                  ))}\n                  {element.line_items?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.meta_data?.map((meta, index) => {\n                        if (index === cartItem.meta_data.length - 1) return;\n                        return <Text>{`${meta.key} : ${meta.value}`}</Text>;\n                      })}\n                    </View>\n                  ))}\n                  <Text>{element.customer?.name}</Text>\n                  <Text>{element.customer?.phone}</Text>\n                  <Text>{element.customer?.address}</Text>\n                  <Text>\n                    Method:{\" \"}\n                    {element.method === \"pickupOrder\" ? \"Pick Up\" : \"Delivery\"}\n                  </Text>\n                  <Button\n                    title=\"Complete Order\"\n                    onPress={() => {\n                      if (element.method === \"pickupOrder\") {\n                        setChangeModal(true);\n                        setcurrentOrder({ element: element, index: index });\n                      } else {\n                        const localChange = structuredClone(transList);\n                        localChange[index].completed = true;\n                        updateTransList(localChange);\n                      }\n                    }}\n                    style={{ marginBottom: 10 }}\n                  />\n                  <Button\n                    title=\"Cancel Order\"\n                    onPress={() => {\n                      const localChange = structuredClone(transList);\n                      localChange[index].cancelled = true;\n                      updateTransList(localChange);\n                    }}\n                  />\n                </View>\n              );\n            }\n          })\n        ) : (\n          <Text>No Orders Yet</Text>\n        )}\n      </View>\n      <Modal visible={changeModal}>\n        <ChangeScreen\n          setChangeModal={setChangeModal}\n          setcurrentOrder={setcurrentOrder}\n          order={currentOrder.element}\n          completeOrder={() => {\n            const localChange = structuredClone(transList);\n            localChange[currentOrder.index].completed = true;\n            updateTransList(localChange);\n            setChangeModal(false);\n          }}\n        />\n      </Modal>\n    </View>\n  );\n};\n\nexport default CompletePaymentPhoneOrder;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"8OACA,MAAOA,MAAK,EAAgCC,QAAQ,KAAQ,OAAO,CACnE,OAASC,MAAM,CAAEC,IAAI,KAAQ,6BAA6B,CAC1D,OAA2BC,cAAc,sBACzC,OAASC,eAAe,kCACxB,MAAOC,aAAY,sBAAuB,wFAE1C,GAAMC,0BAAyB,CAAG,QAA5BA,0BAAyB,EAAS,CACtC,GAAMC,UAAS,CAAGJ,cAAc,CAACK,GAAG,EAAE,CACtC,cAAsCR,QAAQ,CAAC,KAAK,CAAC,wCAA9CS,WAAW,eAAEC,cAAc,eAClC,eAAwCV,QAAQ,CAAC,CAC/CW,OAAO,CAAE,IAAI,CACbC,KAAK,CAAE,IACT,CAAC,CAAC,yCAHKC,YAAY,eAAEC,eAAe,eAKpC,MACE,OAAC,IAAI,EAAC,KAAK,CAAEC,MAAM,CAACC,SAAU,WAC5B,KAAC,IAAI,EAAC,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,MAAM,CAAE,EAAG,CAAE,iCAE1C,CACP,KAAC,IAAI,EAAC,KAAK,CAAEH,MAAM,CAACI,gBAAiB,UAClCZ,SAAS,CACRA,SAAS,cAATA,SAAS,CAAEa,GAAG,CAAC,SAACT,OAAO,CAAEC,KAAK,CAAK,8BACjC,GACE,cAAAD,OAAO,CAACU,EAAE,eAAV,YAAYC,MAAM,CAAC,eAAAX,OAAO,CAACU,EAAE,eAAV,aAAYE,MAAM,EAAG,CAAC,CAAE,CAAC,CAAC,IAAK,IAAI,EACtDZ,OAAO,CAACa,SAAS,GAAK,KAAK,EAC3Bb,OAAO,CAACc,SAAS,GAAK,IAAI,CAC1B,+FACA,GAAMC,KAAI,CAAGf,OAAO,CAACe,IAAI,CACrB,GAAIC,KAAI,CAAChB,OAAO,CAACe,IAAI,CAACE,OAAO,CAAG,IAAI,CAAC,CACrCjB,OAAO,CAACkB,YAAY,CACpB,GAAIF,KAAI,CAAChB,OAAO,CAACkB,YAAY,CAAC,CAC9B,IAAI,CAER,MACE,OAAC,IAAI,EACH,KAAK,CAAE,CACLC,eAAe,CAAE,MAAM,CACvBC,OAAO,CAAE,EAAE,CACXb,MAAM,CAAE,EACV,CAAE,WAGF,KAAC,IAAI,WAAEQ,IAAI,CAACM,cAAc,EAAE,EAAQ,gBACnCrB,OAAO,CAACsB,IAAI,eAAZ,cAAcb,GAAG,CAAC,SAACc,QAAQ,CAAEtB,KAAK,8BACjC,OAAC,IAAI,EAAC,KAAK,CAAE,CAAEuB,YAAY,CAAE,EAAG,CAAE,WAChC,MAAC,IAAI,qBAAQD,QAAQ,CAACE,IAAI,GAAQ,CAClC,MAAC,IAAI,yBAAYF,QAAQ,CAACG,QAAQ,GAAQ,CAC1C,MAAC,IAAI,sBAASH,QAAQ,CAACI,KAAK,GAAQ,CACnCJ,QAAQ,CAACK,OAAO,sBACfL,QAAQ,CAACK,OAAO,eAAhB,kBAAkBnB,GAAG,CAAC,SAACoB,MAAM,QAC3B,MAAC,IAAI,WAAEA,MAAM,EAAQ,EACtB,CAAC,IAPkC5B,KAAK,CAQtC,EACR,CAAC,sBACDD,OAAO,CAAC8B,UAAU,eAAlB,oBAAoBrB,GAAG,CAAC,SAACc,QAAQ,CAAEtB,KAAK,gCACvC,OAAC,IAAI,EAAC,KAAK,CAAE,CAAEuB,YAAY,CAAE,EAAG,CAAE,WAChC,MAAC,IAAI,qBAAQD,QAAQ,CAACE,IAAI,GAAQ,CAClC,MAAC,IAAI,yBAAYF,QAAQ,CAACG,QAAQ,GAAQ,CAC1C,MAAC,IAAI,sBAASH,QAAQ,CAACI,KAAK,GAAQ,sBACnCJ,QAAQ,CAACQ,SAAS,eAAlB,oBAAoBtB,GAAG,CAAC,SAACuB,IAAI,CAAE/B,KAAK,CAAK,CACxC,GAAIA,KAAK,GAAKsB,QAAQ,CAACQ,SAAS,CAACnB,MAAM,CAAG,CAAC,CAAE,OAC7C,MAAO,MAAC,IAAI,WAAKoB,IAAI,CAACC,GAAG,OAAMD,IAAI,CAACE,KAAK,EAAU,CACrD,CAAC,CAAC,GAPoCjC,KAAK,CAQtC,EACR,CAAC,CACF,KAAC,IAAI,8BAAED,OAAO,CAACmC,QAAQ,eAAhB,kBAAkBV,IAAI,EAAQ,CACrC,KAAC,IAAI,+BAAEzB,OAAO,CAACmC,QAAQ,eAAhB,mBAAkBC,KAAK,EAAQ,CACtC,KAAC,IAAI,+BAAEpC,OAAO,CAACmC,QAAQ,eAAhB,mBAAkBE,OAAO,EAAQ,CACxC,MAAC,IAAI,sBACK,GAAG,CACVrC,OAAO,CAACsC,MAAM,GAAK,aAAa,CAAG,SAAS,CAAG,UAAU,GACrD,CACP,KAAC,MAAM,EACL,KAAK,CAAC,gBAAgB,CACtB,OAAO,CAAE,kBAAM,CACb,GAAItC,OAAO,CAACsC,MAAM,GAAK,aAAa,CAAE,CACpCvC,cAAc,CAAC,IAAI,CAAC,CACpBI,eAAe,CAAC,CAAEH,OAAO,CAAEA,OAAO,CAAEC,KAAK,CAAEA,KAAM,CAAC,CAAC,CACrD,CAAC,IAAM,CACL,GAAMsC,YAAW,CAAGC,eAAe,CAAC5C,SAAS,CAAC,CAC9C2C,WAAW,CAACtC,KAAK,CAAC,CAACY,SAAS,CAAG,IAAI,CACnCpB,eAAe,CAAC8C,WAAW,CAAC,CAC9B,CACF,CAAE,CACF,KAAK,CAAE,CAAEf,YAAY,CAAE,EAAG,CAAE,EAC5B,CACF,KAAC,MAAM,EACL,KAAK,CAAC,cAAc,CACpB,OAAO,CAAE,kBAAM,CACb,GAAMe,YAAW,CAAGC,eAAe,CAAC5C,SAAS,CAAC,CAC9C2C,WAAW,CAACtC,KAAK,CAAC,CAACa,SAAS,CAAG,IAAI,CACnCrB,eAAe,CAAC8C,WAAW,CAAC,CAC9B,CAAE,EACF,GArDGtC,KAAK,CAsDL,CAEX,CACF,CAAC,CAAC,CAEF,KAAC,IAAI,4BACN,EACI,CACP,KAAC,KAAK,EAAC,OAAO,CAAEH,WAAY,UAC1B,KAAC,YAAY,EACX,cAAc,CAAEC,cAAe,CAC/B,eAAe,CAAEI,eAAgB,CACjC,KAAK,CAAED,YAAY,CAACF,OAAQ,CAC5B,aAAa,CAAE,wBAAM,CACnB,GAAMuC,YAAW,CAAGC,eAAe,CAAC5C,SAAS,CAAC,CAC9C2C,WAAW,CAACrC,YAAY,CAACD,KAAK,CAAC,CAACY,SAAS,CAAG,IAAI,CAChDpB,eAAe,CAAC8C,WAAW,CAAC,CAC5BxC,cAAc,CAAC,KAAK,CAAC,CACvB,CAAE,EACF,EACI,GACH,CAEX,CAAC,CAED,cAAeJ,0BAAyB,CAExC,GAAMS,OAAM,CAAGqC,UAAU,CAACC,MAAM,CAAC,CAC/BrC,SAAS,CAAE,CACTc,eAAe,CAAE,OAAO,CACxBwB,IAAI,CAAE,CAAC,CACPC,MAAM,CAAE,MACV,CAAC,CACDpC,gBAAgB,CAAE,CAChBmC,IAAI,CAAE,CAAC,CACPE,aAAa,CAAE,KAAK,CACpBC,QAAQ,CAAE,MAAM,CAChBC,cAAc,CAAE,eAAe,CAC/BC,WAAW,CAAE,EAAE,CACfC,YAAY,CAAE,EAAE,CAChBC,aAAa,CAAE,EAAE,CACjBN,MAAM,CAAE,MAAM,CACdO,KAAK,CAAE,MAAM,CACbC,UAAU,CAAE,QACd,CACF,CAAC,CAAC"},"metadata":{},"sourceType":"module"}