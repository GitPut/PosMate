{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Button, TextInput } from \"@react-native-material/core\";\nimport { storeDetailState, woocommerceState } from \"../../state/state\";\nimport { auth, db } from \"../../state/firebaseConfig\";\nvar tz = require(\"moment-timezone\");\nimport { ReactGrid } from \"@silevis/reactgrid\";\nimport \"@silevis/reactgrid/styles.css\";\nimport ReceiptPrint from \"../../components/ReceiptPrint\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar getDate = function getDate(seconds) {\n  var newDate = new Date(seconds * 1000);\n  var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  var result = tz(newDate).tz(targetTimezone, true).format(\"YYYY-MM-DD, h:mm:ss a z\");\n  return result;\n};\nvar ViewTransactions = function ViewTransactions() {\n  var today = new Date();\n  var storeDetails = storeDetailState.use();\n  var wooCredentials = woocommerceState.use();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    transList = _useState2[0],\n    settransList = _useState2[1];\n  var _useState3 = useState({\n      todaysReceiptValue: 0,\n      todaysReceipts: 0\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    todaysDetails = _useState4[0],\n    setTodaysDetails = _useState4[1];\n  var _useWindowDimensions = useWindowDimensions(),\n    width = _useWindowDimensions.width,\n    height = _useWindowDimensions.height;\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    search = _useState6[0],\n    setsearch = _useState6[1];\n  var refContainer = useRef();\n  var _useState7 = useState({\n      width: 0,\n      height: 0\n    }),\n    _useState8 = _slicedToArray(_useState7, 2),\n    dimensions = _useState8[0],\n    setDimensions = _useState8[1];\n  useEffect(function () {\n    if (refContainer.current) {\n      setDimensions({\n        width: refContainer.current.offsetWidth,\n        height: refContainer.current.offsetHeight\n      });\n    }\n  }, []);\n  var getColumns = function getColumns() {\n    return [{\n      columnId: \"name\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"phone\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"address\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"orderFrom\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"method\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"cart\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"total\",\n      width: dimensions.width / 8\n    }, {\n      columnId: \"date\",\n      width: dimensions.width / 8\n    }];\n  };\n  var headerRow = {\n    rowId: \"header\",\n    cells: [{\n      type: \"header\",\n      text: \"Name\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Phone #\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Address\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Order From\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Method\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"ID\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Total\",\n      nonEditable: true\n    }, {\n      type: \"header\",\n      text: \"Date\",\n      nonEditable: true\n    }]\n  };\n  var getRows = function getRows() {\n    return [headerRow].concat(_toConsumableArray(transList.map(function (receipt, idx) {\n      var _receipt$customer$nam, _receipt$customer$pho, _receipt$customer$add, _receipt$cart_hash, _receipt$method, _receipt$transNum;\n      if ((search == null ? void 0 : search.length) > 0 && !((_receipt$customer$nam = receipt.customer.name) != null && _receipt$customer$nam.includes(search)) && !((_receipt$customer$pho = receipt.customer.phone) != null && _receipt$customer$pho.includes(search)) && !((_receipt$customer$add = receipt.customer.address) != null && _receipt$customer$add.includes(search)) && !((_receipt$cart_hash = receipt.cart_hash) != null && _receipt$cart_hash.includes(search)) && !((_receipt$method = receipt.method) != null && _receipt$method.includes(search)) && !((_receipt$transNum = receipt.transNum) != null && _receipt$transNum.includes(search)) && !getDate(receipt.date.seconds).includes(search)) {\n        return {\n          height: 0,\n          rowId: idx,\n          cells: []\n        };\n      }\n      return {\n        rowId: idx,\n        cells: [{\n          type: \"text\",\n          text: receipt.customer.name,\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.customer.phone ? receipt.customer.phone : \"\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.customer.address ? receipt.customer.address : \"\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.cart_hash ? \"Online\" : \"POS\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.method === \"deliveryOrder\" ? \"Delivery\" : \"Pickup\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.transNum ? receipt.transNum : \"\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.total ? \"$\" + receipt.total : \"\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }, {\n          type: \"text\",\n          text: receipt.date ? getDate(receipt.date.seconds) : \"\",\n          nonEditable: true,\n          style: {\n            flex: 1\n          }\n        }]\n      };\n    })));\n  };\n\n  var rows = getRows();\n  var columns = getColumns();\n  var testRef = useRef(null);\n\n  useEffect(function () {\n    try {\n      var _auth$currentUser;\n      db.collection(\"users\").doc((_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid).collection(\"transList\").get().then(function (querySnapshot) {\n        querySnapshot.forEach(function (doc) {\n          settransList(function (prevState) {\n            return [].concat(_toConsumableArray(prevState), [doc.data(), doc.data(), doc.data(), doc.data()]);\n          });\n          console.log(doc.data());\n        });\n      });\n    } catch (_unused) {\n      console.log(\"Error occured retrieving tranasctions\");\n    }\n    if (wooCredentials.useWoocommerce === true) {\n      try {\n        var WooCommerceAPI = require(\"woocommerce-api\");\n        var WooCommerce = new WooCommerceAPI({\n          url: wooCredentials.apiUrl,\n          consumerKey: wooCredentials.ck,\n          consumerSecret: wooCredentials.cs,\n          wpAPI: true,\n          version: \"wc/v1\"\n        });\n        var page = 1;\n        var orders = [];\n        var getOrders = function () {\n          var _ref = _asyncToGenerator(function* () {\n            var response = yield WooCommerce.getAsync(\"orders?page=\" + page + \"&per_page=100\");\n            var data = JSON.parse(response.body);\n            orders = [].concat(_toConsumableArray(orders), _toConsumableArray(data));\n            if (data.length === 100) {\n              page++;\n              getOrders();\n            } else {\n            }\n          });\n          return function getOrders() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n        getOrders().then(function () {\n          return settransList(function (prevState) {\n            return [].concat(_toConsumableArray(prevState), _toConsumableArray(orders));\n          });\n        }).catch(function (e) {\n          return console.log(\"error has occured\");\n        });\n      } catch (_unused2) {\n        console.log(\"Something occured with woo\");\n      }\n    }\n  }, []);\n  useEffect(function () {\n    try {\n      if (transList.length > 0) {\n        settransList(function (prev) {\n          return prev.sort(function (a, b) {\n            if (a.date && b.date) {\n              return a.date.seconds - b.date.seconds;\n            } else if (a.date && b.date_created) {\n              var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n              var newDateA = new Date(a.date.seconds * 1000);\n              var newDateB = new Date(b.date_created + \"Z\");\n              var resultA = tz(newDateA).tz(targetTimezone, true);\n              var resultB = tz(newDateB).tz(targetTimezone, true);\n              return resultA.valueOf() - resultB.valueOf();\n            } else if (a.date_created && b.date) {\n              var _targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n              var _newDateA = new Date(a.date_created + \"Z\");\n              var _newDateB = new Date(b.date.seconds * 1000);\n              var _resultA = tz(_newDateA).tz(_targetTimezone, true);\n              var _resultB = tz(_newDateB).tz(_targetTimezone, true);\n              return _resultA.valueOf() - _resultB.valueOf();\n            } else {\n              var _targetTimezone2 = Intl.DateTimeFormat().resolvedOptions().timeZone;\n              var _newDateA2 = new Date(a.date_created + \"Z\");\n              var _newDateB2 = new Date(b.date_created + \"Z\");\n              var _resultA2 = tz(_newDateA2).tz(_targetTimezone2, true);\n              var _resultB2 = tz(_newDateB2).tz(_targetTimezone2, true);\n              return _resultA2.valueOf() - _resultB2.valueOf();\n            }\n          }).reverse();\n        });\n        var todaysReceiptValue = transList.reduce(function (accumulator, current) {\n          var date;\n          var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            var localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            var _localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(_localDatePreConv).tz(targetTimezone, true);\n          }\n          var today = tz().tz(targetTimezone);\n          if (today.year() === date.year() && today.month() === date.month() && today.dayOfYear() === date.dayOfYear()) {\n            return accumulator + parseFloat(current.date ? current.total : current.total / 1.13);\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        var todaysReceipts = transList.reduce(function (accumulator, current) {\n          var date;\n          var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            var localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            var _localDatePreConv2 = new Date(current.date_created + \"Z\");\n            date = tz(_localDatePreConv2).tz(targetTimezone, true);\n          }\n          var today = tz().tz(targetTimezone);\n          if (today.year() === date.year() && today.month() === date.month() && today.dayOfYear() === date.dayOfYear()) {\n            return accumulator + 1;\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        setTodaysDetails({\n          todaysReceiptValue: todaysReceiptValue.toFixed(2),\n          todaysReceipts: todaysReceipts\n        });\n      }\n    } catch (_unused3) {\n      console.log(\"Error Occured when sorting dates\");\n    }\n  }, [transList]);\n  var PrintTodaysTotal = function PrintTodaysTotal() {\n    var data = [\"\\x1B\" + \"\\x40\",\n    \"\\x1B\" + \"\\x61\" + \"\\x31\",\n    storeDetails.name, \"\\x0A\", storeDetails.address + \"\\x0A\", storeDetails.website + \"\\x0A\",\n    storeDetails.phoneNumber + \"\\x0A\",\n    today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x1B\" + \"\\x61\" + \"\\x30\",\n    \"\\x0A\" + \"\\x0A\", \"Number Of Receipts: \" + todaysDetails.todaysReceipts + \"\\x0A\" + \"\\x0A\", \"Sub-Total: \" + \"$\" + (todaysDetails.todaysReceiptValue / 1.13).toFixed(2) + \"\\x0A\" + \"\\x0A\", \"Tax: \" + \"$\" + (todaysDetails.todaysReceiptValue / 1.13 * 0.13).toFixed(2) + \"\\x0A\" + \"\\x0A\", \"Total Including (13% Tax): \" + \"$\" + todaysDetails.todaysReceiptValue + \"\\x0A\" + \"\\x0A\", \"------------------------------------------\" + \"\\x0A\", \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x1D\" + \"\\x56\" + \"\\x30\"];\n    var qz = require(\"qz-tray\");\n    qz.websocket.connect().then(function () {\n      var config = qz.configs.create(storeDetails.comSelected);\n      return qz.print(config, data);\n    }).then(qz.websocket.disconnect).catch(function (err) {\n      console.error(err);\n    });\n  };\n\n  return _jsx(View, {\n    style: styles.container,\n    ref: refContainer,\n    children: _jsx(ScrollView, {\n      contentContainerStyle: styles.contentContainer,\n      children: _jsxs(ScrollView, {\n        horizontal: true,\n        children: [_jsxs(View, {\n          style: {\n            flexDirection: \"row\",\n            width: \"100%\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            marginBottom: 15\n          },\n          children: [_jsx(TextInput, {\n            placeholder: \"Enter term to search by (name, phone, address, method, id, date)\",\n            onChangeText: function onChangeText(val) {\n              return setsearch(val);\n            },\n            value: search,\n            style: {\n              minWidth: \"60%\"\n            }\n          }), _jsx(Button, {\n            style: {\n              backgroundColor: \"rgba(31,35,48,1)\",\n              margin: 0,\n              padding: 10\n            },\n            title: \"Print Selected Receipts\"\n            ,\n            onPress: function onPress() {\n              if (testRef.current.state.selectedIds.length > 0) {\n                var data = [];\n                testRef.current.state.selectedIds.forEach(function (idx) {\n                  var element = transList[idx];\n                  var formatedData = ReceiptPrint(element, storeDetails);\n                  data = data.concat(formatedData);\n                });\n                var qz = require(\"qz-tray\");\n                qz.websocket.connect().then(function () {\n                  var config = qz.configs.create(storeDetails.comSelected);\n                  return qz.print(config, data);\n                }).then(qz.websocket.disconnect).catch(function (err) {\n                  console.error(err);\n                });\n              } else if (testRef.current.state.selectedRanges[0].rows[0]) {\n                var _data = [];\n                var element = transList[testRef.current.state.selectedRanges[0].rows[0].rowId];\n                var formatedData = ReceiptPrint(element, storeDetails);\n                _data = _data.concat(formatedData);\n                var _qz = require(\"qz-tray\");\n                _qz.websocket.connect().then(function () {\n                  var config = _qz.configs.create(storeDetails.comSelected);\n                  return _qz.print(config, _data);\n                }).then(_qz.websocket.disconnect).catch(function (err) {\n                  console.error(err);\n                });\n              }\n            }\n          })]\n        }), _jsx(ReactGrid, {\n          ref: testRef,\n          rows: rows,\n          columns: columns,\n          enableRowSelection: true,\n          enableFillHandle: true\n        })]\n      })\n    })\n  });\n};\nexport default ViewTransactions;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n    width: \"100%\"\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    padding: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","TextInput","storeDetailState","woocommerceState","auth","db","tz","require","ReactGrid","ReceiptPrint","getDate","seconds","newDate","Date","targetTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","result","format","ViewTransactions","today","storeDetails","use","wooCredentials","transList","settransList","todaysReceiptValue","todaysReceipts","todaysDetails","setTodaysDetails","useWindowDimensions","width","height","search","setsearch","refContainer","dimensions","setDimensions","current","offsetWidth","offsetHeight","getColumns","columnId","headerRow","rowId","cells","type","text","nonEditable","getRows","map","receipt","idx","length","customer","name","includes","phone","address","cart_hash","method","transNum","date","style","flex","total","rows","columns","testRef","collection","doc","currentUser","uid","get","then","querySnapshot","forEach","prevState","data","console","log","useWoocommerce","WooCommerceAPI","WooCommerce","url","apiUrl","consumerKey","ck","consumerSecret","cs","wpAPI","version","page","orders","getOrders","response","getAsync","JSON","parse","body","catch","e","prev","sort","a","b","date_created","newDateA","newDateB","resultA","resultB","valueOf","reverse","reduce","accumulator","localDatePreConv","year","month","dayOfYear","parseFloat","toFixed","PrintTodaysTotal","website","phoneNumber","toLocaleDateString","toLocaleTimeString","qz","websocket","connect","config","configs","create","comSelected","print","disconnect","err","error","styles","container","contentContainer","flexDirection","alignItems","justifyContent","marginBottom","val","minWidth","backgroundColor","margin","padding","state","selectedIds","element","formatedData","concat","selectedRanges","StyleSheet","flexWrap"],"sources":["/Users/peterputros/Desktop/PosMate/screens/authed/ViewTransactions.tsx"],"sourcesContent":["import {\n  FlatList,\n  ScrollView,\n  StyleSheet,\n  useWindowDimensions,\n  View,\n} from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useRef, useState } from \"react\";\nimport { Button, Text, TextInput } from \"@react-native-material/core\";\nimport {\n  storeDetailState,\n  transListState,\n  woocommerceState,\n} from \"state/state\";\nimport { auth, db } from \"state/firebaseConfig\";\nconst tz = require(\"moment-timezone\");\nimport {\n  ReactGrid,\n  CellChange,\n  Row,\n  Column,\n  Id,\n  MenuOption,\n  SelectionMode,\n} from \"@silevis/reactgrid\";\n\nimport \"@silevis/reactgrid/styles.css\";\nimport ReceiptPrint from \"components/ReceiptPrint\";\n\nconst getDate = (seconds) => {\n  const newDate = new Date(seconds * 1000);\n  const targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n  const result = tz(newDate)\n    .tz(targetTimezone, true)\n    .format(\"YYYY-MM-DD, h:mm:ss a z\");\n\n  return result;\n};\n\nconst ViewTransactions = () => {\n  const today = new Date();\n  const storeDetails = storeDetailState.use();\n  const wooCredentials = woocommerceState.use();\n  const [transList, settransList] = useState([]);\n  const [todaysDetails, setTodaysDetails] = useState({\n    todaysReceiptValue: 0,\n    todaysReceipts: 0,\n  });\n  const { width, height } = useWindowDimensions();\n  const [search, setsearch] = useState(null);\n  const refContainer = useRef();\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  useEffect(() => {\n    if (refContainer.current) {\n      setDimensions({\n        width: refContainer.current.offsetWidth,\n        height: refContainer.current.offsetHeight,\n      });\n    }\n  }, []);\n\n  const getColumns = (): Column[] => [\n    { columnId: \"name\", width: dimensions.width / 8 },\n    { columnId: \"phone\", width: dimensions.width / 8 },\n    { columnId: \"address\", width: dimensions.width / 8 },\n    { columnId: \"orderFrom\", width: dimensions.width / 8 },\n    { columnId: \"method\", width: dimensions.width / 8 },\n    { columnId: \"cart\", width: dimensions.width / 8 },\n    { columnId: \"total\", width: dimensions.width / 8 },\n    { columnId: \"date\", width: dimensions.width / 8 },\n  ];\n\n  const headerRow: Row = {\n    rowId: \"header\",\n    cells: [\n      { type: \"header\", text: \"Name\", nonEditable: true },\n      { type: \"header\", text: \"Phone #\", nonEditable: true },\n      { type: \"header\", text: \"Address\", nonEditable: true },\n      { type: \"header\", text: \"Order From\", nonEditable: true },\n      { type: \"header\", text: \"Method\", nonEditable: true },\n      { type: \"header\", text: \"ID\", nonEditable: true },\n      { type: \"header\", text: \"Total\", nonEditable: true },\n      { type: \"header\", text: \"Date\", nonEditable: true },\n    ],\n  };\n\n  const getRows = () => [\n    headerRow,\n    ...transList.map<Row>((receipt, idx) => {\n      if (\n        search?.length > 0 &&\n        !receipt.customer.name?.includes(search) &&\n        !receipt.customer.phone?.includes(search) &&\n        !receipt.customer.address?.includes(search) &&\n        !receipt.cart_hash?.includes(search) &&\n        !receipt.method?.includes(search) &&\n        !receipt.transNum?.includes(search) &&\n        !getDate(receipt.date.seconds).includes(search)\n      ) {\n        return { height: 0, rowId: idx, cells: [] };\n      }\n      return {\n        rowId: idx,\n        cells: [\n          {\n            type: \"text\",\n            text: receipt.customer.name,\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.customer.phone ? receipt.customer.phone : \"\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.customer.address ? receipt.customer.address : \"\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.cart_hash ? \"Online\" : \"POS\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.method === \"deliveryOrder\" ? \"Delivery\" : \"Pickup\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.transNum ? receipt.transNum : \"\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.total ? \"$\" + receipt.total : \"\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n          {\n            type: \"text\",\n            text: receipt.date ? getDate(receipt.date.seconds) : \"\",\n            nonEditable: true,\n            style: { flex: 1 },\n          },\n        ],\n      };\n    }),\n  ];\n\n  ///\n\n  const rows = getRows();\n  const columns = getColumns();\n\n  const testRef = useRef(null);\n\n  ///\n\n  useEffect(() => {\n    try {\n      db.collection(\"users\")\n        .doc(auth.currentUser?.uid)\n        .collection(\"transList\")\n        .get()\n        .then((querySnapshot) => {\n          querySnapshot.forEach((doc) => {\n            // doc.data() is never undefined for query doc snapshots\n            // console.log(doc.id, \" => \", doc.data());\n            settransList((prevState) => [\n              ...prevState,\n              doc.data(),\n              doc.data(),\n              doc.data(),\n              doc.data(),\n            ]);\n            console.log(doc.data());\n          });\n        });\n    } catch {\n      console.log(\"Error occured retrieving tranasctions\");\n    }\n\n    if (wooCredentials.useWoocommerce === true) {\n      try {\n        const WooCommerceAPI = require(\"woocommerce-api\");\n\n        const WooCommerce = new WooCommerceAPI({\n          url: wooCredentials.apiUrl,\n          consumerKey: wooCredentials.ck,\n          consumerSecret: wooCredentials.cs,\n          wpAPI: true,\n          version: \"wc/v1\",\n        });\n\n        let page = 1;\n        let orders = [];\n\n        const getOrders = async () => {\n          const response = await WooCommerce.getAsync(\n            `orders?page=${page}&per_page=100`\n          );\n          const data = JSON.parse(response.body);\n          orders = [...orders, ...data];\n          if (data.length === 100) {\n            page++;\n            getOrders();\n          } else {\n            // console.log(orders);\n          }\n        };\n\n        getOrders()\n          .then(() => settransList((prevState) => [...prevState, ...orders]))\n          .catch((e) => console.log(\"error has occured\"));\n      } catch {\n        console.log(\"Something occured with woo\");\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    try {\n      if (transList.length > 0) {\n        settransList((prev) =>\n          prev\n            .sort(function (a, b) {\n              if (a.date && b.date) {\n                return a.date.seconds - b.date.seconds;\n              } else if (a.date && b.date_created) {\n                const targetTimezone =\n                  Intl.DateTimeFormat().resolvedOptions().timeZone;\n                const newDateA = new Date(a.date.seconds * 1000);\n                const newDateB = new Date(b.date_created + \"Z\");\n                const resultA = tz(newDateA).tz(targetTimezone, true);\n                const resultB = tz(newDateB).tz(targetTimezone, true);\n\n                return resultA.valueOf() - resultB.valueOf();\n              } else if (a.date_created && b.date) {\n                const targetTimezone =\n                  Intl.DateTimeFormat().resolvedOptions().timeZone;\n                const newDateA = new Date(a.date_created + \"Z\");\n                const newDateB = new Date(b.date.seconds * 1000);\n                const resultA = tz(newDateA).tz(targetTimezone, true);\n                const resultB = tz(newDateB).tz(targetTimezone, true);\n\n                return resultA.valueOf() - resultB.valueOf();\n              } else {\n                const targetTimezone =\n                  Intl.DateTimeFormat().resolvedOptions().timeZone;\n                const newDateA = new Date(a.date_created + \"Z\");\n                const newDateB = new Date(b.date_created + \"Z\");\n                const resultA = tz(newDateA).tz(targetTimezone, true);\n                const resultB = tz(newDateB).tz(targetTimezone, true);\n\n                return resultA.valueOf() - resultB.valueOf();\n              }\n            })\n            .reverse()\n        );\n        // settransList(sortedTransList);\n        const todaysReceiptValue = transList.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return (\n              accumulator +\n              parseFloat(current.date ? current.total : current.total / 1.13)\n            );\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        const todaysReceipts = transList.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return accumulator + 1;\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        setTodaysDetails({\n          todaysReceiptValue: todaysReceiptValue.toFixed(2),\n          todaysReceipts: todaysReceipts,\n        });\n      }\n    } catch {\n      console.log(\"Error Occured when sorting dates\");\n    }\n  }, [transList]);\n\n  const PrintTodaysTotal = () => {\n    let data = [\n      \"\\x1B\" + \"\\x40\", // init\n      \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n      storeDetails.name,\n      \"\\x0A\",\n      storeDetails.address + \"\\x0A\",\n      storeDetails.website + \"\\x0A\", // text and line break\n      storeDetails.phoneNumber + \"\\x0A\", // text and line break\n      today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n      \"\\x0A\" + \"\\x0A\",\n      \"Number Of Receipts: \" + todaysDetails.todaysReceipts + \"\\x0A\" + \"\\x0A\",\n      \"Sub-Total: \" +\n        \"$\" +\n        (todaysDetails.todaysReceiptValue / 1.13).toFixed(2) +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"Tax: \" +\n        \"$\" +\n        ((todaysDetails.todaysReceiptValue / 1.13) * 0.13).toFixed(2) +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"Total Including (13% Tax): \" +\n        \"$\" +\n        todaysDetails.todaysReceiptValue +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"------------------------------------------\" + \"\\x0A\",\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x1D\" + \"\\x56\" + \"\\x30\",\n    ];\n\n    const qz = require(\"qz-tray\");\n    qz.websocket\n      .connect()\n      .then(function () {\n        let config = qz.configs.create(storeDetails.comSelected);\n        return qz.print(config, data);\n      })\n      .then(qz.websocket.disconnect)\n      .catch(function (err) {\n        console.error(err);\n      });\n  };\n\n  // useEffect(() => {\n  //   if(transList.length > )\n  // }, [search])\n\n  return (\n    <View style={styles.container} ref={refContainer}>\n      {/* <Text style={{ textAlign: \"center\", margin: 25 }}>\n        List Of Transactions\n      </Text>\n      <View\n        style={{\n          flexDirection: \"row\",\n          width: \"100%\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Text style={{ textAlign: \"center\", margin: 25 }}>\n          Todays Total Price: {todaysDetails.todaysReceiptValue}\n        </Text>\n        <Button\n          style={{ height: 40, alignItems: \"center\", justifyContent: \"center\" }}\n          title=\"Print Todays Receipts\"\n          onPress={PrintTodaysTotal}\n        />\n        <Text style={{ textAlign: \"center\", margin: 25 }}>\n          Todays Total Receipts: {todaysDetails.todaysReceipts}\n        </Text>\n      </View> */}\n      <ScrollView contentContainerStyle={styles.contentContainer}>\n        <ScrollView horizontal>\n          <View\n            style={{\n              flexDirection: \"row\",\n              width: \"100%\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              marginBottom: 15,\n            }}\n          >\n            <TextInput\n              placeholder=\"Enter term to search by (name, phone, address, method, id, date)\"\n              onChangeText={(val) => setsearch(val)}\n              value={search}\n              style={{ minWidth: \"60%\" }}\n            />\n            <Button\n              style={{\n                backgroundColor: \"rgba(31,35,48,1)\",\n                margin: 0,\n                padding: 10,\n              }}\n              title=\"Print Selected Receipts\"\n              // onPress={() => console.log(testRef.current.state.selectedIds)}\n              // onPress={() => console.log(testRef.current)}\n              onPress={() => {\n                if (testRef.current.state.selectedIds.length > 0) {\n                  let data = [];\n                  testRef.current.state.selectedIds.forEach((idx) => {\n                    const element = transList[idx];\n                    const formatedData = ReceiptPrint(element, storeDetails);\n                    data = data.concat(formatedData);\n                  });\n                  const qz = require(\"qz-tray\");\n                  qz.websocket\n                    .connect()\n                    .then(function () {\n                      let config = qz.configs.create(storeDetails.comSelected);\n                      return qz.print(config, data);\n                    })\n                    .then(qz.websocket.disconnect)\n                    .catch(function (err) {\n                      console.error(err);\n                    });\n                } else if (testRef.current.state.selectedRanges[0].rows[0]) {\n                  let data = [];\n                  const element =\n                    transList[\n                      testRef.current.state.selectedRanges[0].rows[0].rowId\n                    ];\n\n                  const formatedData = ReceiptPrint(element, storeDetails);\n                  data = data.concat(formatedData);\n\n                  const qz = require(\"qz-tray\");\n                  qz.websocket\n                    .connect()\n                    .then(function () {\n                      let config = qz.configs.create(storeDetails.comSelected);\n                      return qz.print(config, data);\n                    })\n                    .then(qz.websocket.disconnect)\n                    .catch(function (err) {\n                      console.error(err);\n                    });\n                }\n              }}\n            />\n          </View>\n          <ReactGrid\n            ref={testRef}\n            rows={rows}\n            columns={columns}\n            enableRowSelection={true}\n            enableFillHandle\n          />\n        </ScrollView>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default ViewTransactions;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n    width: \"100%\",\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    // paddingLeft: 50,\n    // paddingRight: 50,\n    // paddingBottom: 50,\n    padding: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}