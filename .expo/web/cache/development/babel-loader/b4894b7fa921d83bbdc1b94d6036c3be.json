{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { setStoreDetailState, setTrialDetailsState, setTutorialDetailsState, setUserState, setUserStoreState, setWoocommerceState, trialDetailsState, tutorialDetailsState, userState } from \"../state/state\";\nimport { auth, db, storage } from \"../state/firebaseConfig\";\nimport { updateFreeTrial } from \"../state/firebaseFunctions\";\nvar tz = require(\"moment-timezone\");\nimport PlanUpdateTest from \"../screens/authed/PlanUpdateTest\";\nimport NewUserPayment from \"../screens/authed/NewUserPayment\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"../components/TrialEnded\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RouteManagerNew = function RouteManagerNew() {\n  var savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  var isTutorialCompleteLocal = JSON.parse(localStorage.getItem(\"tutorialComplete\") || null);\n  var userS = userState.use();\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setloading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isNewUser = _useState4[0],\n    setisNewUser = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isSubscribed = _useState6[0],\n    setisSubscribed = _useState6[1];\n  var fadeAnim = useRef(new Animated.Value(1)).current;\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    viewVisible = _useState8[0],\n    setviewVisible = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isCanceled = _useState10[0],\n    setisCanceled = _useState10[1];\n  var trialDetails = trialDetailsState.use();\n  var tutorialDetails = tutorialDetailsState.use();\n  var _Font$useFonts = Font.useFonts({\n      \"archivo-600\": require(\"../assets/fonts/Archivo-SemiBold.ttf\"),\n      \"archivo-500\": require(\"../assets/fonts/Archivo-Regular.ttf\")\n    }),\n    _Font$useFonts2 = _slicedToArray(_Font$useFonts, 1),\n    fontsLoaded = _Font$useFonts2[0];\n  var UpdateStoreStateDataPictures = function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var products = _ref.products,\n        categories = _ref.categories;\n      var getProductUrl = function () {\n        var _ref3 = _asyncToGenerator(function* (id) {\n          return yield storage.ref(auth.currentUser.uid + \"/images/\" + id).getDownloadURL();\n        });\n        return function getProductUrl(_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }();\n      var newCatalog = [];\n      for (var i = 0; i < products.length; i++) {\n        var product = products[i];\n        if (product.hasImage) {\n          var url = yield getProductUrl(product.id);\n          newCatalog.push(_objectSpread(_objectSpread({}, product), {}, {\n            imageUrl: url\n          }));\n        } else {\n          newCatalog.push(product);\n        }\n      }\n      setUserStoreState({\n        categories: categories,\n        products: newCatalog\n      });\n    });\n    return function UpdateStoreStateDataPictures(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    setUserState(savedUserState || null);\n    var unsubscribeAuthStateChanged = auth.onAuthStateChanged(function (user) {\n      fadeAnim.setValue(1);\n      setviewVisible(true);\n      if (user) {\n        localStorage.setItem(\"savedUserState\", true);\n        setUserState(user);\n        var customers = localStorage.getItem(\"customers\");\n        if (customers) {\n          customers = JSON.parse(customers);\n        }\n        db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n          doc.ref.collection(\"subscriptions\").get().then(function (docs) {\n            if (!docs.empty) {\n              docs.forEach(function (element) {\n                if (element.data().role === \"Test Plan\") {\n                  if (element.data().status === \"active\") {\n                    setisSubscribed(true);\n                    setisNewUser(false);\n                    if (doc.data().freeTrial) {\n                      setTrialDetailsState({\n                        endDate: null,\n                        hasEnded: null\n                      });\n                      updateFreeTrial(null);\n                    }\n                  } else if (element.data().status === \"canceled\") {\n                    setisSubscribed(false);\n                    setisNewUser(false);\n                    setisCanceled(true);\n                  } else {\n                    setisSubscribed(false);\n                    setisNewUser(false);\n                  }\n                }\n              });\n            } else {\n              setisNewUser(true);\n              setisSubscribed(false);\n            }\n          }).catch(function () {\n            return console.log(\"Error has occured with db\");\n          });\n          doc.ref.collection(\"customers\").get().then(function (docs) {\n            var newCustomerList = [];\n            docs.forEach(function (element) {\n              newCustomerList.push(_objectSpread(_objectSpread({}, element.data()), {}, {\n                id: element.id\n              }));\n            });\n            if (JSON.stringify(customers) !== JSON.stringify(newCustomerList)) {\n              localStorage.setItem(\"customers\", JSON.stringify(newCustomerList));\n            }\n          }).catch(function () {\n            return console.log(\"Error has occured with db\");\n          });\n          if (doc.data().freeTrial) {\n            setisNewUser(false);\n            var firstDate = new Date(doc.data().freeTrial.seconds * 1000);\n            var today = new Date();\n            if (firstDate <= today) {\n              setTrialDetailsState({\n                endDate: doc.data().freeTrial,\n                hasEnded: true\n              });\n            } else {\n              setTrialDetailsState({\n                endDate: doc.data().freeTrial,\n                hasEnded: false\n              });\n            }\n          }\n\n          UpdateStoreStateDataPictures({\n            products: doc.data().products ? doc.data().products : [],\n            categories: doc.data().categories ? doc.data().categories : []\n          });\n          if (doc.data().wooCredentials) {\n            setWoocommerceState(doc.data().wooCredentials);\n          }\n          if (doc.data().storeDetails) {\n            setStoreDetailState(doc.data().storeDetails);\n          }\n          if (isTutorialCompleteLocal) {\n            if (isTutorialCompleteLocal.complete !== null) {\n              setTutorialDetailsState({\n                complete: isTutorialCompleteLocal.complete,\n                step: isTutorialCompleteLocal.step\n              });\n            }\n          } else {\n            setTutorialDetailsState({\n              complete: false,\n              step: 0\n            });\n          }\n        }).catch(function () {\n          return console.log(\"Error has occured with db\");\n        });\n      } else {\n        localStorage.removeItem(\"savedUserState\");\n        setUserState(null);\n        setUserStoreState({\n          products: null,\n          categories: null\n        });\n        setisNewUser(false);\n        setisSubscribed(false);\n      }\n    });\n    return function () {\n      unsubscribeAuthStateChanged();\n    };\n  }, [savedUserState]);\n  useEffect(function () {\n    if (userS && isSubscribed || trialDetails.hasEnded === false) {\n      import(\"../assets/plugins/fontawesome/css/fontawesome.min.css\");\n      import(\"../assets/plugins/fontawesome/css/all.min.css\");\n      import(\"../assets/css/bootstrap.min.css\");\n      import(\"../assets/js/bootstrap.bundle.min.js\");\n      import(\"../assets/css/font-awesome.min.css\");\n      import(\"../assets/css/line-awesome.min.css\");\n      import(\"../assets/css/style.css\");\n      var unsub = db.collection(\"users\").doc(userS == null ? void 0 : userS.uid).onSnapshot(function (doc) {\n        var _doc$data, _doc$data2;\n        UpdateStoreStateDataPictures({\n          products: ((_doc$data = doc.data()) == null ? void 0 : _doc$data.products) || [],\n          categories: ((_doc$data2 = doc.data()) == null ? void 0 : _doc$data2.categories) || []\n        });\n        if (doc.data().wooCredentials) {\n          setWoocommerceState(doc.data().wooCredentials);\n        }\n        if (doc.data().storeDetails) {\n          setStoreDetailState(doc.data().storeDetails);\n        }\n      });\n      return function () {\n        return unsub();\n      };\n    }\n  }, [userS, isSubscribed, trialDetails]);\n  useEffect(function () {\n    if (isNewUser !== null && isSubscribed !== null) {\n      setloading(false);\n      fadeOut();\n    }\n  }, [isNewUser, isSubscribed]);\n  var fadeIn = function fadeIn() {\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false\n    }).start();\n  };\n  var fadeOut = function fadeOut() {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false\n    }).start(function () {\n      return setviewVisible(false);\n    });\n  };\n  var resetLoader = function resetLoader() {\n    setviewVisible(true);\n    fadeIn();\n  };\n  var NavigationContent = function NavigationContent() {\n    if (trialDetails.endDate) {\n      return _jsxs(_Fragment, {\n        children: [_jsx(Route, {\n          path: \"/\",\n          component: AuthRoute\n        }), trialDetails.hasEnded && _jsx(TrialEnded, {\n          resetLoader: resetLoader\n        })]\n      });\n    } else if (isSubscribed) {\n      return _jsx(_Fragment, {\n        children: _jsx(Route, {\n          path: \"/\",\n          component: AuthRoute\n        })\n      });\n    } else if (isNewUser) {\n      return _jsx(NewUserPayment, {\n        resetLoader: resetLoader\n      });\n    } else {\n      return _jsx(PlanUpdateTest, {\n        resetLoader: resetLoader,\n        isCanceled: isCanceled\n      });\n    }\n  };\n  return _jsx(Router, {\n    children: _jsxs(Switch, {\n      children: [userS && _jsxs(_Fragment, {\n        children: [_jsx(NavigationContent, {}), viewVisible && _jsx(Animated.View, {\n          style: {\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            backgroundColor: \"white\",\n            position: \"absolute\",\n            opacity: fadeAnim,\n            height: \"100%\",\n            width: \"100%\"\n          },\n          children: _jsx(Image, {\n            source: require(\"../assets/loading.gif\"),\n            style: {\n              width: 450,\n              height: 450,\n              resizeMode: \"contain\"\n            }\n          })\n        })]\n      }), !userS && !loading && _jsx(Route, {\n        path: \"/\",\n        component: NonAuthRoute\n      })]\n    })\n  });\n};\nexport default React.memo(RouteManagerNew);","map":{"version":3,"names":["React","useEffect","useRef","useState","setStoreDetailState","setTrialDetailsState","setTutorialDetailsState","setUserState","setUserStoreState","setWoocommerceState","trialDetailsState","tutorialDetailsState","userState","auth","db","storage","updateFreeTrial","tz","require","PlanUpdateTest","NewUserPayment","Font","TrialEnded","BrowserRouter","Router","Route","Switch","AuthRoute","NonAuthRoute","RouteManagerNew","savedUserState","JSON","parse","localStorage","getItem","isTutorialCompleteLocal","userS","use","loading","setloading","isNewUser","setisNewUser","isSubscribed","setisSubscribed","fadeAnim","Animated","Value","current","viewVisible","setviewVisible","isCanceled","setisCanceled","trialDetails","tutorialDetails","useFonts","fontsLoaded","UpdateStoreStateDataPictures","products","categories","getProductUrl","id","ref","currentUser","uid","getDownloadURL","newCatalog","i","length","product","hasImage","url","push","imageUrl","unsubscribeAuthStateChanged","onAuthStateChanged","user","setValue","setItem","customers","collection","doc","get","then","docs","empty","forEach","element","data","role","status","freeTrial","endDate","hasEnded","catch","console","log","newCustomerList","stringify","firstDate","Date","seconds","today","wooCredentials","storeDetails","complete","step","removeItem","unsub","onSnapshot","fadeOut","fadeIn","timing","toValue","duration","useNativeDriver","start","resetLoader","NavigationContent","alignItems","justifyContent","backgroundColor","position","opacity","height","width","resizeMode","memo"],"sources":["/Users/peterputros/Desktop/PosMate/navigation/RouteManagerNew.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport {\n  setStoreDetailState,\n  setTrialDetailsState,\n  setTutorialDetailsState,\n  setUserState,\n  setUserStoreState,\n  setWoocommerceState,\n  storeDetailState,\n  trialDetailsState,\n  tutorialDetailsState,\n  userState,\n  woocommerceState,\n} from \"state/state\";\nimport { auth, db, storage } from \"state/firebaseConfig\";\nimport { updateFreeTrial } from \"state/firebaseFunctions\";\nconst tz = require(\"moment-timezone\");\nimport useSound from \"use-sound\";\nimport mySound from \"assets/alarm.mp3\";\nimport PlanUpdateTest from \"screens/authed/PlanUpdateTest\";\nimport NewUserPayment from \"screens/authed/NewUserPayment\";\nimport { Animated, Image, Modal, Text, View } from \"react-native\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"components/TrialEnded\";\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\n\nconst RouteManagerNew = () => {\n  const savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  const isTutorialCompleteLocal = JSON.parse(\n    localStorage.getItem(\"tutorialComplete\") || null\n  );\n  const userS = userState.use();\n  const [loading, setloading] = useState(true);\n  const [isNewUser, setisNewUser] = useState(null);\n  const [isSubscribed, setisSubscribed] = useState(null);\n  const fadeAnim = useRef(new Animated.Value(1)).current;\n  const [viewVisible, setviewVisible] = useState(true);\n  const [isCanceled, setisCanceled] = useState(null);\n  const trialDetails = trialDetailsState.use();\n  const tutorialDetails = tutorialDetailsState.use();\n\n  const [fontsLoaded] = Font.useFonts({\n    \"archivo-600\": require(\"assets/fonts/Archivo-SemiBold.ttf\"),\n    \"archivo-500\": require(\"assets/fonts/Archivo-Regular.ttf\"),\n  });\n\n  const UpdateStoreStateDataPictures = async ({ products, categories }) => {\n    const getProductUrl = async (id) =>\n      await storage\n        .ref(auth.currentUser.uid + \"/images/\" + id)\n        .getDownloadURL();\n\n    const newCatalog = [];\n    for (let i = 0; i < products.length; i++) {\n      const product = products[i];\n      if (product.hasImage) {\n        const url = await getProductUrl(product.id);\n        newCatalog.push({ ...product, imageUrl: url });\n      } else {\n        newCatalog.push(product);\n      }\n    }\n    setUserStoreState({ categories: categories, products: newCatalog });\n  };\n\n  useEffect(() => {\n    setUserState(savedUserState || null);\n\n    const unsubscribeAuthStateChanged = auth.onAuthStateChanged((user) => {\n      fadeAnim.setValue(1);\n      setviewVisible(true);\n      if (user) {\n        localStorage.setItem(\"savedUserState\", true);\n        setUserState(user);\n\n        let customers = localStorage.getItem(\"customers\");\n        if (customers) {\n          customers = JSON.parse(customers);\n        }\n\n        db.collection(\"users\")\n          .doc(user.uid)\n          .get()\n          .then((doc) => {\n            doc.ref\n              .collection(\"subscriptions\")\n              .get()\n              .then((docs) => {\n                if (!docs.empty) {\n                  docs.forEach((element) => {\n                    if (element.data().role === \"Test Plan\") {\n                      if (element.data().status === \"active\") {\n                        setisSubscribed(true);\n                        setisNewUser(false);\n                        if (doc.data().freeTrial) {\n                          setTrialDetailsState({\n                            endDate: null,\n                            hasEnded: null,\n                          });\n                          updateFreeTrial(null);\n                        }\n                      } else if (element.data().status === \"canceled\") {\n                        setisSubscribed(false);\n                        setisNewUser(false);\n                        setisCanceled(true);\n                      } else {\n                        setisSubscribed(false);\n                        setisNewUser(false);\n                      }\n                    }\n                    // console.log(\"DATA: \", element.data());\n                  });\n                } else {\n                  setisNewUser(true);\n                  setisSubscribed(false);\n                }\n              })\n              .catch(() => console.log(\"Error has occured with db\"));\n\n            doc.ref\n              .collection(\"customers\")\n              .get()\n              .then((docs) => {\n                const newCustomerList = [];\n\n                docs.forEach((element) => {\n                  newCustomerList.push({ ...element.data(), id: element.id });\n                });\n\n                if (\n                  JSON.stringify(customers) !== JSON.stringify(newCustomerList)\n                ) {\n                  localStorage.setItem(\n                    \"customers\",\n                    JSON.stringify(newCustomerList)\n                  );\n                }\n              })\n              .catch(() => console.log(\"Error has occured with db\"));\n\n            if (doc.data().freeTrial) {\n              setisNewUser(false);\n              const firstDate = new Date(doc.data().freeTrial.seconds * 1000);\n              const today = new Date();\n              if (firstDate <= today) {\n                setTrialDetailsState({\n                  endDate: doc.data().freeTrial,\n                  hasEnded: true,\n                });\n              } else {\n                setTrialDetailsState({\n                  endDate: doc.data().freeTrial,\n                  hasEnded: false,\n                });\n              }\n            }\n\n            // setUserStoreState({\n            //   products: doc.data().products ? doc.data().products : [],\n            //   categories: doc.data().categories ? doc.data().categories : [],\n            // });\n            UpdateStoreStateDataPictures({\n              products: doc.data().products ? doc.data().products : [],\n              categories: doc.data().categories ? doc.data().categories : [],\n            });\n            //Dont need now\n            // if (doc.data().transList) {\n            //   setTransListState(doc.data().transList);\n            // }\n            //dont plz :)\n            if (doc.data().wooCredentials) {\n              setWoocommerceState(doc.data().wooCredentials);\n            }\n            if (doc.data().storeDetails) {\n              setStoreDetailState(doc.data().storeDetails);\n            }\n            if (isTutorialCompleteLocal) {\n              if (isTutorialCompleteLocal.complete !== null) {\n                setTutorialDetailsState({\n                  complete: isTutorialCompleteLocal.complete,\n                  step: isTutorialCompleteLocal.step,\n                });\n              }\n            } else {\n              setTutorialDetailsState({ complete: false, step: 0 });\n            }\n          })\n          .catch(() => console.log(\"Error has occured with db\"));\n      } else {\n        localStorage.removeItem(\"savedUserState\");\n        setUserState(null);\n        setUserStoreState({ products: null, categories: null });\n        setisNewUser(false);\n        setisSubscribed(false);\n      }\n    });\n\n    return () => {\n      unsubscribeAuthStateChanged();\n    };\n  }, [savedUserState]);\n\n  useEffect(() => {\n    if ((userS && isSubscribed) || trialDetails.hasEnded === false) {\n      import(\"assets/plugins/fontawesome/css/fontawesome.min.css\");\n      import(\"assets/plugins/fontawesome/css/all.min.css\");\n      import(\"assets/css/bootstrap.min.css\");\n      import(\"assets/js/bootstrap.bundle.min.js\");\n      import(\"assets/css/font-awesome.min.css\");\n      import(\"assets/css/line-awesome.min.css\");\n      import(\"assets/css/style.css\");\n\n      const unsub = db\n        .collection(\"users\")\n        .doc(userS?.uid)\n        .onSnapshot((doc) => {\n          UpdateStoreStateDataPictures({\n            products: doc.data()?.products || [],\n            categories: doc.data()?.categories || [],\n          });\n          if (doc.data().wooCredentials) {\n            setWoocommerceState(doc.data().wooCredentials);\n          }\n          if (doc.data().storeDetails) {\n            setStoreDetailState(doc.data().storeDetails);\n          }\n        });\n\n      return () => unsub();\n    }\n  }, [userS, isSubscribed, trialDetails]);\n\n  useEffect(() => {\n    if (isNewUser !== null && isSubscribed !== null) {\n      setloading(false);\n      fadeOut();\n    }\n  }, [isNewUser, isSubscribed]);\n\n  const fadeIn = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const fadeOut = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false,\n    }).start(() => setviewVisible(false));\n  };\n\n  const resetLoader = () => {\n    setviewVisible(true);\n    fadeIn();\n  };\n\n  const NavigationContent = () => {\n    if (trialDetails.endDate) {\n      return (\n        <>\n          <Route path=\"/\" component={AuthRoute} />\n          {trialDetails.hasEnded && <TrialEnded resetLoader={resetLoader} />}\n        </>\n      );\n    } else if (isSubscribed) {\n      return (\n        <>\n          <Route path=\"/\" component={AuthRoute} />\n        </>\n      );\n    } else if (isNewUser) {\n      return <NewUserPayment resetLoader={resetLoader} />;\n    } else {\n      return (\n        <PlanUpdateTest resetLoader={resetLoader} isCanceled={isCanceled} />\n      );\n    }\n  };\n\n  return (\n    <Router>\n      <Switch>\n        {userS && (\n          <>\n            <NavigationContent />\n            {viewVisible && (\n              <Animated.View\n                style={{\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  backgroundColor: \"white\",\n                  position: \"absolute\",\n                  opacity: fadeAnim,\n                  height: \"100%\",\n                  width: \"100%\",\n                }}\n              >\n                <Image\n                  source={require(\"assets/loading.gif\")}\n                  style={{ width: 450, height: 450, resizeMode: \"contain\" }}\n                />\n              </Animated.View>\n            )}\n          </>\n        )}\n        {!userS && !loading && <Route path=\"/\" component={NonAuthRoute} />}\n      </Switch>\n    </Router>\n  );\n};\n\nexport default React.memo(RouteManagerNew);\n"],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SACEC,mBAAmB,EACnBC,oBAAoB,EACpBC,uBAAuB,EACvBC,YAAY,EACZC,iBAAiB,EACjBC,mBAAmB,EAEnBC,iBAAiB,EACjBC,oBAAoB,EACpBC,SAAS;AAGX,SAASC,IAAI,EAAEC,EAAE,EAAEC,OAAO;AAC1B,SAASC,eAAe;AACxB,IAAMC,EAAE,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAGrC,OAAOC,cAAc;AACrB,OAAOC,cAAc;AAAsC;AAAA;AAE3D,OAAO,KAAKC,IAAI,MAAM,WAAW;AACjC,OAAOC,UAAU;AAEjB,SACEC,aAAa,IAAIC,MAAM,EACvBC,KAAK,EACLC,MAAM,QACD,kBAAkB;AACzB,OAAOC,SAAS;AAChB,OAAOC,YAAY;AAAkC;AAAA;AAAA;AAErD,IAAMC,eAAe,GAAG,SAAlBA,eAAe,GAAS;EAC5B,IAAMC,cAAc,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC,CAAC;EACzE,IAAMC,uBAAuB,GAAGJ,IAAI,CAACC,KAAK,CACxCC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,IAAI,IAAI,CACjD;EACD,IAAME,KAAK,GAAGxB,SAAS,CAACyB,GAAG,EAAE;EAC7B,gBAA8BlC,QAAQ,CAAC,IAAI,CAAC;IAAA;IAArCmC,OAAO;IAAEC,UAAU;EAC1B,iBAAkCpC,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzCqC,SAAS;IAAEC,YAAY;EAC9B,iBAAwCtC,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA/CuC,YAAY;IAAEC,eAAe;EACpC,IAAMC,QAAQ,GAAG1C,MAAM,CAAC,IAAI2C,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EACtD,iBAAsC5C,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA7C6C,WAAW;IAAEC,cAAc;EAClC,iBAAoC9C,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA3C+C,UAAU;IAAEC,aAAa;EAChC,IAAMC,YAAY,GAAG1C,iBAAiB,CAAC2B,GAAG,EAAE;EAC5C,IAAMgB,eAAe,GAAG1C,oBAAoB,CAAC0B,GAAG,EAAE;EAElD,qBAAsBhB,IAAI,CAACiC,QAAQ,CAAC;MAClC,aAAa,EAAEpC,OAAO,wCAAqC;MAC3D,aAAa,EAAEA,OAAO;IACxB,CAAC,CAAC;IAAA;IAHKqC,WAAW;EAKlB,IAAMC,4BAA4B;IAAA,8BAAG,iBAAoC;MAAA,IAA3BC,QAAQ,QAARA,QAAQ;QAAEC,UAAU,QAAVA,UAAU;MAChE,IAAMC,aAAa;QAAA,8BAAG,WAAOC,EAAE;UAAA,aACvB7C,OAAO,CACV8C,GAAG,CAAChD,IAAI,CAACiD,WAAW,CAACC,GAAG,GAAG,UAAU,GAAGH,EAAE,CAAC,CAC3CI,cAAc,EAAE;QAAA;QAAA,gBAHfL,aAAa;UAAA;QAAA;MAAA,GAGE;MAErB,IAAMM,UAAU,GAAG,EAAE;MACrB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGT,QAAQ,CAACU,MAAM,EAAED,CAAC,EAAE,EAAE;QACxC,IAAME,OAAO,GAAGX,QAAQ,CAACS,CAAC,CAAC;QAC3B,IAAIE,OAAO,CAACC,QAAQ,EAAE;UACpB,IAAMC,GAAG,SAASX,aAAa,CAACS,OAAO,CAACR,EAAE,CAAC;UAC3CK,UAAU,CAACM,IAAI,iCAAMH,OAAO;YAAEI,QAAQ,EAAEF;UAAG,GAAG;QAChD,CAAC,MAAM;UACLL,UAAU,CAACM,IAAI,CAACH,OAAO,CAAC;QAC1B;MACF;MACA5D,iBAAiB,CAAC;QAAEkD,UAAU,EAAEA,UAAU;QAAED,QAAQ,EAAEQ;MAAW,CAAC,CAAC;IACrE,CAAC;IAAA,gBAjBKT,4BAA4B;MAAA;IAAA;EAAA,GAiBjC;EAEDvD,SAAS,CAAC,YAAM;IACdM,YAAY,CAACuB,cAAc,IAAI,IAAI,CAAC;IAEpC,IAAM2C,2BAA2B,GAAG5D,IAAI,CAAC6D,kBAAkB,CAAC,UAACC,IAAI,EAAK;MACpE/B,QAAQ,CAACgC,QAAQ,CAAC,CAAC,CAAC;MACpB3B,cAAc,CAAC,IAAI,CAAC;MACpB,IAAI0B,IAAI,EAAE;QACR1C,YAAY,CAAC4C,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC;QAC5CtE,YAAY,CAACoE,IAAI,CAAC;QAElB,IAAIG,SAAS,GAAG7C,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;QACjD,IAAI4C,SAAS,EAAE;UACbA,SAAS,GAAG/C,IAAI,CAACC,KAAK,CAAC8C,SAAS,CAAC;QACnC;QAEAhE,EAAE,CAACiE,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAACL,IAAI,CAACZ,GAAG,CAAC,CACbkB,GAAG,EAAE,CACLC,IAAI,CAAC,UAACF,GAAG,EAAK;UACbA,GAAG,CAACnB,GAAG,CACJkB,UAAU,CAAC,eAAe,CAAC,CAC3BE,GAAG,EAAE,CACLC,IAAI,CAAC,UAACC,IAAI,EAAK;YACd,IAAI,CAACA,IAAI,CAACC,KAAK,EAAE;cACfD,IAAI,CAACE,OAAO,CAAC,UAACC,OAAO,EAAK;gBACxB,IAAIA,OAAO,CAACC,IAAI,EAAE,CAACC,IAAI,KAAK,WAAW,EAAE;kBACvC,IAAIF,OAAO,CAACC,IAAI,EAAE,CAACE,MAAM,KAAK,QAAQ,EAAE;oBACtC9C,eAAe,CAAC,IAAI,CAAC;oBACrBF,YAAY,CAAC,KAAK,CAAC;oBACnB,IAAIuC,GAAG,CAACO,IAAI,EAAE,CAACG,SAAS,EAAE;sBACxBrF,oBAAoB,CAAC;wBACnBsF,OAAO,EAAE,IAAI;wBACbC,QAAQ,EAAE;sBACZ,CAAC,CAAC;sBACF5E,eAAe,CAAC,IAAI,CAAC;oBACvB;kBACF,CAAC,MAAM,IAAIsE,OAAO,CAACC,IAAI,EAAE,CAACE,MAAM,KAAK,UAAU,EAAE;oBAC/C9C,eAAe,CAAC,KAAK,CAAC;oBACtBF,YAAY,CAAC,KAAK,CAAC;oBACnBU,aAAa,CAAC,IAAI,CAAC;kBACrB,CAAC,MAAM;oBACLR,eAAe,CAAC,KAAK,CAAC;oBACtBF,YAAY,CAAC,KAAK,CAAC;kBACrB;gBACF;cAEF,CAAC,CAAC;YACJ,CAAC,MAAM;cACLA,YAAY,CAAC,IAAI,CAAC;cAClBE,eAAe,CAAC,KAAK,CAAC;YACxB;UACF,CAAC,CAAC,CACDkD,KAAK,CAAC;YAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;UAAA,EAAC;UAExDf,GAAG,CAACnB,GAAG,CACJkB,UAAU,CAAC,WAAW,CAAC,CACvBE,GAAG,EAAE,CACLC,IAAI,CAAC,UAACC,IAAI,EAAK;YACd,IAAMa,eAAe,GAAG,EAAE;YAE1Bb,IAAI,CAACE,OAAO,CAAC,UAACC,OAAO,EAAK;cACxBU,eAAe,CAACzB,IAAI,iCAAMe,OAAO,CAACC,IAAI,EAAE;gBAAE3B,EAAE,EAAE0B,OAAO,CAAC1B;cAAE,GAAG;YAC7D,CAAC,CAAC;YAEF,IACE7B,IAAI,CAACkE,SAAS,CAACnB,SAAS,CAAC,KAAK/C,IAAI,CAACkE,SAAS,CAACD,eAAe,CAAC,EAC7D;cACA/D,YAAY,CAAC4C,OAAO,CAClB,WAAW,EACX9C,IAAI,CAACkE,SAAS,CAACD,eAAe,CAAC,CAChC;YACH;UACF,CAAC,CAAC,CACDH,KAAK,CAAC;YAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;UAAA,EAAC;UAExD,IAAIf,GAAG,CAACO,IAAI,EAAE,CAACG,SAAS,EAAE;YACxBjD,YAAY,CAAC,KAAK,CAAC;YACnB,IAAMyD,SAAS,GAAG,IAAIC,IAAI,CAACnB,GAAG,CAACO,IAAI,EAAE,CAACG,SAAS,CAACU,OAAO,GAAG,IAAI,CAAC;YAC/D,IAAMC,KAAK,GAAG,IAAIF,IAAI,EAAE;YACxB,IAAID,SAAS,IAAIG,KAAK,EAAE;cACtBhG,oBAAoB,CAAC;gBACnBsF,OAAO,EAAEX,GAAG,CAACO,IAAI,EAAE,CAACG,SAAS;gBAC7BE,QAAQ,EAAE;cACZ,CAAC,CAAC;YACJ,CAAC,MAAM;cACLvF,oBAAoB,CAAC;gBACnBsF,OAAO,EAAEX,GAAG,CAACO,IAAI,EAAE,CAACG,SAAS;gBAC7BE,QAAQ,EAAE;cACZ,CAAC,CAAC;YACJ;UACF;;UAMApC,4BAA4B,CAAC;YAC3BC,QAAQ,EAAEuB,GAAG,CAACO,IAAI,EAAE,CAAC9B,QAAQ,GAAGuB,GAAG,CAACO,IAAI,EAAE,CAAC9B,QAAQ,GAAG,EAAE;YACxDC,UAAU,EAAEsB,GAAG,CAACO,IAAI,EAAE,CAAC7B,UAAU,GAAGsB,GAAG,CAACO,IAAI,EAAE,CAAC7B,UAAU,GAAG;UAC9D,CAAC,CAAC;UAMF,IAAIsB,GAAG,CAACO,IAAI,EAAE,CAACe,cAAc,EAAE;YAC7B7F,mBAAmB,CAACuE,GAAG,CAACO,IAAI,EAAE,CAACe,cAAc,CAAC;UAChD;UACA,IAAItB,GAAG,CAACO,IAAI,EAAE,CAACgB,YAAY,EAAE;YAC3BnG,mBAAmB,CAAC4E,GAAG,CAACO,IAAI,EAAE,CAACgB,YAAY,CAAC;UAC9C;UACA,IAAIpE,uBAAuB,EAAE;YAC3B,IAAIA,uBAAuB,CAACqE,QAAQ,KAAK,IAAI,EAAE;cAC7ClG,uBAAuB,CAAC;gBACtBkG,QAAQ,EAAErE,uBAAuB,CAACqE,QAAQ;gBAC1CC,IAAI,EAAEtE,uBAAuB,CAACsE;cAChC,CAAC,CAAC;YACJ;UACF,CAAC,MAAM;YACLnG,uBAAuB,CAAC;cAAEkG,QAAQ,EAAE,KAAK;cAAEC,IAAI,EAAE;YAAE,CAAC,CAAC;UACvD;QACF,CAAC,CAAC,CACDZ,KAAK,CAAC;UAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;QAAA,EAAC;MAC1D,CAAC,MAAM;QACL9D,YAAY,CAACyE,UAAU,CAAC,gBAAgB,CAAC;QACzCnG,YAAY,CAAC,IAAI,CAAC;QAClBC,iBAAiB,CAAC;UAAEiD,QAAQ,EAAE,IAAI;UAAEC,UAAU,EAAE;QAAK,CAAC,CAAC;QACvDjB,YAAY,CAAC,KAAK,CAAC;QACnBE,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC,CAAC;IAEF,OAAO,YAAM;MACX8B,2BAA2B,EAAE;IAC/B,CAAC;EACH,CAAC,EAAE,CAAC3C,cAAc,CAAC,CAAC;EAEpB7B,SAAS,CAAC,YAAM;IACd,IAAKmC,KAAK,IAAIM,YAAY,IAAKU,YAAY,CAACwC,QAAQ,KAAK,KAAK,EAAE;MAC9D,MAAM,yDAAsD;MAC5D,MAAM,iDAA8C;MACpD,MAAM,mCAAgC;MACtC,MAAM,wCAAqC;MAC3C,MAAM,sCAAmC;MACzC,MAAM,sCAAmC;MACzC,MAAM,2BAAwB;MAE9B,IAAMe,KAAK,GAAG7F,EAAE,CACbiE,UAAU,CAAC,OAAO,CAAC,CACnBC,GAAG,CAAC5C,KAAK,oBAALA,KAAK,CAAE2B,GAAG,CAAC,CACf6C,UAAU,CAAC,UAAC5B,GAAG,EAAK;QAAA;QACnBxB,4BAA4B,CAAC;UAC3BC,QAAQ,EAAE,cAAAuB,GAAG,CAACO,IAAI,EAAE,qBAAV,UAAY9B,QAAQ,KAAI,EAAE;UACpCC,UAAU,EAAE,eAAAsB,GAAG,CAACO,IAAI,EAAE,qBAAV,WAAY7B,UAAU,KAAI;QACxC,CAAC,CAAC;QACF,IAAIsB,GAAG,CAACO,IAAI,EAAE,CAACe,cAAc,EAAE;UAC7B7F,mBAAmB,CAACuE,GAAG,CAACO,IAAI,EAAE,CAACe,cAAc,CAAC;QAChD;QACA,IAAItB,GAAG,CAACO,IAAI,EAAE,CAACgB,YAAY,EAAE;UAC3BnG,mBAAmB,CAAC4E,GAAG,CAACO,IAAI,EAAE,CAACgB,YAAY,CAAC;QAC9C;MACF,CAAC,CAAC;MAEJ,OAAO;QAAA,OAAMI,KAAK,EAAE;MAAA;IACtB;EACF,CAAC,EAAE,CAACvE,KAAK,EAAEM,YAAY,EAAEU,YAAY,CAAC,CAAC;EAEvCnD,SAAS,CAAC,YAAM;IACd,IAAIuC,SAAS,KAAK,IAAI,IAAIE,YAAY,KAAK,IAAI,EAAE;MAC/CH,UAAU,CAAC,KAAK,CAAC;MACjBsE,OAAO,EAAE;IACX;EACF,CAAC,EAAE,CAACrE,SAAS,EAAEE,YAAY,CAAC,CAAC;EAE7B,IAAMoE,MAAM,GAAG,SAATA,MAAM,GAAS;IAEnBjE,QAAQ,CAACkE,MAAM,CAACnE,QAAQ,EAAE;MACxBoE,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACnB,CAAC,CAAC,CAACC,KAAK,EAAE;EACZ,CAAC;EAED,IAAMN,OAAO,GAAG,SAAVA,OAAO,GAAS;IAEpBhE,QAAQ,CAACkE,MAAM,CAACnE,QAAQ,EAAE;MACxBoE,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACnB,CAAC,CAAC,CAACC,KAAK,CAAC;MAAA,OAAMlE,cAAc,CAAC,KAAK,CAAC;IAAA,EAAC;EACvC,CAAC;EAED,IAAMmE,WAAW,GAAG,SAAdA,WAAW,GAAS;IACxBnE,cAAc,CAAC,IAAI,CAAC;IACpB6D,MAAM,EAAE;EACV,CAAC;EAED,IAAMO,iBAAiB,GAAG,SAApBA,iBAAiB,GAAS;IAC9B,IAAIjE,YAAY,CAACuC,OAAO,EAAE;MACxB,OACE;QAAA,WACE,KAAC,KAAK;UAAC,IAAI,EAAC,GAAG;UAAC,SAAS,EAAEhE;QAAU,EAAG,EACvCyB,YAAY,CAACwC,QAAQ,IAAI,KAAC,UAAU;UAAC,WAAW,EAAEwB;QAAY,EAAG;MAAA,EACjE;IAEP,CAAC,MAAM,IAAI1E,YAAY,EAAE;MACvB,OACE;QAAA,UACE,KAAC,KAAK;UAAC,IAAI,EAAC,GAAG;UAAC,SAAS,EAAEf;QAAU;MAAG,EACvC;IAEP,CAAC,MAAM,IAAIa,SAAS,EAAE;MACpB,OAAO,KAAC,cAAc;QAAC,WAAW,EAAE4E;MAAY,EAAG;IACrD,CAAC,MAAM;MACL,OACE,KAAC,cAAc;QAAC,WAAW,EAAEA,WAAY;QAAC,UAAU,EAAElE;MAAW,EAAG;IAExE;EACF,CAAC;EAED,OACE,KAAC,MAAM;IAAA,UACL,MAAC,MAAM;MAAA,WACJd,KAAK,IACJ;QAAA,WACE,KAAC,iBAAiB,KAAG,EACpBY,WAAW,IACV,KAAC,QAAQ,CAAC,IAAI;UACZ,KAAK,EAAE;YACLsE,UAAU,EAAE,QAAQ;YACpBC,cAAc,EAAE,QAAQ;YACxBC,eAAe,EAAE,OAAO;YACxBC,QAAQ,EAAE,UAAU;YACpBC,OAAO,EAAE9E,QAAQ;YACjB+E,MAAM,EAAE,MAAM;YACdC,KAAK,EAAE;UACT,CAAE;UAAA,UAEF,KAAC,KAAK;YACJ,MAAM,EAAE1G,OAAO,yBAAuB;YACtC,KAAK,EAAE;cAAE0G,KAAK,EAAE,GAAG;cAAED,MAAM,EAAE,GAAG;cAAEE,UAAU,EAAE;YAAU;UAAE;QAC1D,EAEL;MAAA,EAEJ,EACA,CAACzF,KAAK,IAAI,CAACE,OAAO,IAAI,KAAC,KAAK;QAAC,IAAI,EAAC,GAAG;QAAC,SAAS,EAAEV;MAAa,EAAG;IAAA;EAC3D,EACF;AAEb,CAAC;AAED,eAAe5B,KAAK,CAAC8H,IAAI,CAACjG,eAAe,CAAC"},"metadata":{},"sourceType":"module"}