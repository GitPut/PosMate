{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { db, storage } from \"../../state/firebaseConfig\";\nimport GooglePlacesAutocomplete from \"react-google-places-autocomplete\";\nimport { useHistory } from \"react-router-dom\";\nimport Logo from \"../../assets/dpos-logo.png\";\nimport CartItemEditable from \"../../components/cart/CartItemEditable\";\nimport ProductListing from \"../../components/product/ProductListing\";\nimport { addCartState, cartState, setCartState } from \"../../state/state\";\nvar GOOGLE_API_KEY = \"AIzaSyDjx4LBIEDNRYKEt-0_TJ6jUcst4a2YON4\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport OnlineOrderHome from \"./OnlineOrderPages/OnlineOrderHome\";\nimport OrderCartMain from \"./OnlineOrderPages/OrderCartMain\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar OrderPage = function OrderPage() {\n  var history = useHistory();\n  var _useParams = useParams(),\n    urlEnding = _useParams.urlEnding;\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    storeDetails = _useState2[0],\n    setstoreDetails = _useState2[1];\n  var _useState3 = useState({\n      categories: [],\n      products: []\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    catalog = _useState4[0],\n    setcatalog = _useState4[1];\n  var height = useWindowDimensions().height;\n  var width = useWindowDimensions().width;\n  var _useState5 = useState({\n      delivery: null,\n      address: null,\n      customer: {\n        name: \"\",\n        phoneNumber: \"\",\n        email: \"\",\n        address: null\n      }\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    orderDetails = _useState6[0],\n    setorderDetails = _useState6[1];\n  var _useState7 = useState(1),\n    _useState8 = _slicedToArray(_useState7, 2),\n    page = _useState8[0],\n    setpage = _useState8[1];\n  var fadeAnim = useRef(new Animated.Value(1)).current;\n  var customSort = function customSort(a, b) {\n    var rankA = a.rank || Number.MAX_SAFE_INTEGER;\n    var rankB = b.rank || Number.MAX_SAFE_INTEGER;\n\n    return rankA - rankB;\n  };\n  useEffect(function () {\n    db.collection(\"public\").where(\"urlEnding\", \"==\", urlEnding.toLowerCase()).get().then(function (querySnapshot) {\n      if (querySnapshot.empty) {\n        console.log(\"No existing online store\");\n        history.push(\"/404\");\n      }\n      if (!querySnapshot.docs[0].data().onlineStoreActive) {\n        console.log(\"Store is not active\");\n        history.push(\"/404\");\n      }\n      var products = [];\n      setstoreDetails(_objectSpread(_objectSpread({}, querySnapshot.docs[0].data().storeDetails), {}, {\n        docID: querySnapshot.docs[0].id,\n        stripePublicKey: querySnapshot.docs[0].data().stripePublicKey\n      }));\n      querySnapshot.docs[0].ref.collection(\"products\").get().then(function (docs) {\n        if (!docs.empty) {\n          docs.forEach(function (element) {\n            products.push(element.data());\n          });\n          if (products.length > 0) {\n            setdata([]);\n            var newData = [];\n            products.sort(customSort).map(function (product, index) {\n              setdata(function (prev) {\n                var productsWithCategory = prev.filter(function (item) {\n                  return item.category === product.category;\n                });\n                if (productsWithCategory.length > 0) {\n                  var indexOfLastItem = prev.indexOf(productsWithCategory[productsWithCategory.length - 1]);\n                  prev.splice(indexOfLastItem + 1, 0, _objectSpread(_objectSpread({}, product), {}, {\n                    index: index + 1\n                  }));\n                  return prev;\n                }\n                return [].concat(_toConsumableArray(prev), [_objectSpread(_objectSpread({}, product), {}, {\n                  index: index + 1\n                })]);\n              });\n            });\n          }\n        }\n      }).catch(function (e) {\n        return console.log(\"Error has occurred with db: \", e);\n      });\n      setcatalog({\n        categories: querySnapshot.docs[0].data().categories,\n        products: products,\n        docID: querySnapshot.docs[0].id\n      });\n      fadeOut();\n    });\n  }, []);\n  var fadeOut = function fadeOut() {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false\n    }).start(function () {\n      return document.getElementById(\"loader\").style.display = \"none\";\n    });\n  };\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    data = _useState10[0],\n    setdata = _useState10[1];\n  return _jsxs(View, {\n    style: {\n      flex: 1\n    },\n    children: [page === 1 || page === 3 && _jsx(OnlineOrderHome, {\n      storeDetails: storeDetails,\n      setorderDetails: setorderDetails,\n      orderDetails: orderDetails,\n      setpage: setpage\n    }), page === 2 && _jsx(OrderCartMain, {\n      storeDetails: storeDetails,\n      setorderDetails: setorderDetails,\n      orderDetails: orderDetails,\n      setpage: setpage,\n      catalog: {\n        categories: catalog.categories,\n        products: data\n      }\n    }), page === 3 && storeDetails && _jsx(Elements, {\n      stripe: loadStripe(storeDetails.stripePublicKey),\n      children: _jsx(Page3, {\n        storeDetails: storeDetails,\n        setorderDetails: setorderDetails,\n        orderDetails: orderDetails,\n        setpage: setpage,\n        catalog: catalog\n      })\n    }), page === 4 && _jsx(Page4, {}), _jsx(\"div\", {\n      id: \"loader\",\n      style: {\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        height: \"100vh\",\n        width: \"100vw\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: _jsx(Animated.View, {\n        style: {\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          backgroundColor: \"white\",\n          position: \"absolute\",\n          opacity: fadeAnim,\n          height: \"100%\",\n          width: \"100%\"\n        },\n        children: _jsx(Image, {\n          source: require(\"../../assets/loading.gif\"),\n          style: {\n            width: 450,\n            height: 450,\n            resizeMode: \"contain\"\n          }\n        })\n      })\n    })]\n  });\n};\nvar Page1 = function Page1(_ref) {\n  var storeDetails = _ref.storeDetails,\n    setorderDetails = _ref.setorderDetails,\n    orderDetails = _ref.orderDetails,\n    setpage = _ref.setpage;\n\n  function calculateDistance(lat1, lon1, lat2, lon2) {\n    var R = 6371;\n    var dLat = (lat2 - lat1) * (Math.PI / 180);\n    var dLon = (lon2 - lon1) * (Math.PI / 180);\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * (Math.PI / 180)) * Math.cos(lat2 * (Math.PI / 180)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var distance = R * c;\n    return distance;\n  }\n\n  function getLatLng(_x) {\n    return _getLatLng.apply(this, arguments);\n  }\n  function _getLatLng() {\n    _getLatLng = _asyncToGenerator(function* (placeId) {\n      var response = yield fetch(\"https://us-central1-posmate-5fc0a.cloudfunctions.net/getLatLng\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          placeId: placeId\n        })\n      });\n      try {\n        var responseData = yield response.json();\n        if (response.ok && responseData.success) {\n          console.log(\"Success!\");\n          return responseData.data;\n        } else {\n          console.error(responseData.message);\n        }\n      } catch (jsonError) {\n        console.error(\"Error parsing JSON response:\", jsonError);\n      }\n    });\n    return _getLatLng.apply(this, arguments);\n  }\n  function calculateDistanceBetweenAddresses(_x2, _x3) {\n    return _calculateDistanceBetweenAddresses.apply(this, arguments);\n  }\n  function _calculateDistanceBetweenAddresses() {\n    _calculateDistanceBetweenAddresses = _asyncToGenerator(function* (address1, address2) {\n      try {\n        var _yield$getLatLng = yield getLatLng(address1),\n          lat1 = _yield$getLatLng.lat,\n          lon1 = _yield$getLatLng.lng;\n        var _yield$getLatLng2 = yield getLatLng(address2),\n          lat2 = _yield$getLatLng2.lat,\n          lon2 = _yield$getLatLng2.lng;\n        var distance = calculateDistance(lat1, lon1, lat2, lon2);\n        return distance;\n      } catch (error) {\n        console.error(\"Error calculating distance:\", error);\n        return null;\n      }\n    });\n    return _calculateDistanceBetweenAddresses.apply(this, arguments);\n  }\n\n  return _jsxs(View, {\n    children: [_jsx(View, {\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20\n      },\n      children: _jsxs(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: [\"Welcome to \", storeDetails.name]\n      })\n    }), _jsx(View, {\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20\n      },\n      children: _jsxs(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: [\"Would you like to order for Pickup\", \" \", storeDetails.acceptDelivery ? \"or Delivery\" : \"\"]\n      })\n    }), _jsxs(View, {\n      style: {\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [storeDetails.acceptDelivery && _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n            delivery: true\n          }));\n        },\n        style: {\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n          marginRight: 20\n        },\n        children: _jsx(Text, {\n          style: {\n            fontSize: 16\n          },\n          children: \"Delivery\"\n        })\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n            delivery: false,\n            address: null\n          }));\n        },\n        style: {\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20\n        },\n        children: _jsx(Text, {\n          style: {\n            fontSize: 16\n          },\n          children: \"Pickup\"\n        })\n      })]\n    }), orderDetails.delivery && _jsxs(View, {\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20\n      },\n      children: [_jsx(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: \"Please enter delivery address\"\n      }), _jsx(GooglePlacesAutocomplete, {\n        apiOptions: {\n          region: \"CA\"\n        },\n        debounce: 800,\n        apiKey: GOOGLE_API_KEY\n        ,\n        selectProps: {\n          address: orderDetails.address,\n          onChange: function onChange(address) {\n            return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n              address: address\n            }));\n          },\n          defaultValue: orderDetails.address,\n          menuPortalTarget: document.body,\n          styles: {\n            menuPortal: function menuPortal(base) {\n              return _objectSpread(_objectSpread({}, base), {}, {\n                zIndex: 9999\n              });\n            }\n          }\n        },\n        renderSuggestions: function renderSuggestions(active, suggestions, onSelectSuggestion) {\n          return _jsx(\"div\", {\n            children: suggestions.map(function (suggestion) {\n              return _jsx(\"div\", {\n                className: \"suggestion\",\n                onClick: function onClick(event) {\n                  onSelectSuggestion(suggestion, event);\n                },\n                children: suggestion.description\n              });\n            })\n          });\n        }\n      })]\n    }), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        if (orderDetails.delivery) {\n          if (!orderDetails.address) {\n            alert(\"Please enter a delivery address\");\n            return;\n          }\n          calculateDistanceBetweenAddresses(storeDetails.address.value.reference, orderDetails.address.value.reference).then(function (distance) {\n            if (distance !== null) {\n              console.log(\"Distance between addresses: \" + distance.toFixed(2) + \" km\");\n              if (storeDetails.deliveryRange) {\n                if (distance > parseFloat(storeDetails.deliveryRange)) {\n                  alert(\"The delivery address is out of range\");\n                } else {\n                  setpage(2);\n                }\n              } else {\n                setpage(2);\n              }\n            } else {\n              alert(\"Distance calculation between the store and your location failed. Please refresh page.\");\n            }\n          });\n        } else {\n          setpage(2);\n        }\n      },\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20,\n        marginTop: 20\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: \"Next\"\n      })\n    })]\n  });\n};\nvar Page2 = function Page2(_ref2) {\n  var _catalog$categories, _catalog$categories2;\n  var storeDetails = _ref2.storeDetails,\n    setorderDetails = _ref2.setorderDetails,\n    orderDetails = _ref2.orderDetails,\n    setpage = _ref2.setpage,\n    catalog = _ref2.catalog;\n  var _useWindowDimensions = useWindowDimensions(),\n    height = _useWindowDimensions.height,\n    width = _useWindowDimensions.width;\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    section = _useState12[0],\n    setsection = _useState12[1];\n  var _useState13 = useState(0),\n    _useState14 = _slicedToArray(_useState13, 2),\n    cartSub = _useState14[0],\n    setCartSub = _useState14[1];\n  var cart = cartState.use();\n  useEffect(function () {\n    if (cart.length > 0) {\n      var newVal = 0;\n      for (var i = 0; i < cart.length; i++) {\n        try {\n          if (cart[i].quantity > 1) {\n            newVal += parseFloat(cart[i].price) * cart[i].quantity;\n          } else {\n            newVal += parseFloat(cart[i].price);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n      if (orderDetails.delivery) {\n        setCartSub(newVal + parseFloat(storeDetails.deliveryPrice));\n      } else {\n        setCartSub(newVal);\n      }\n    } else {\n      setCartSub(0);\n    }\n  }, [cart]);\n  return _jsx(View, {\n    style: {\n      flex: 1,\n      height: \"100%\",\n      width: \"100%\"\n    },\n    children: _jsxs(View, {\n      style: {\n        flexDirection: \"row\",\n        height: \"100%\"\n      },\n      children: [_jsx(View, {\n        style: {\n          width: \"70%\",\n          height: \"100%\"\n        },\n        children: _jsxs(View, {\n          style: styles({\n            height: height,\n            width: width\n          }).container,\n          children: [_jsxs(View, {\n            style: {\n              backgroundColor: \"rgba(31,35,48,1)\",\n              width: \"23%\",\n              height: \"100%\",\n              alignItems: \"center\",\n              alignSelf: \"center\"\n            },\n            children: [_jsx(Image, {\n              source: Logo,\n              style: {\n                width: 200,\n                height: 160,\n                resizeMode: \"contain\"\n              }\n            }), _jsx(ScrollView, {\n              contentContainerStyle: {\n                height: \"90%\",\n                alignItems: \"center\"\n              },\n              children: (_catalog$categories = catalog.categories) == null ? void 0 : _catalog$categories.map(function (category, index) {\n                return _jsx(TouchableOpacity, {\n                  onPress: function onPress() {\n                    setsection(category);\n                  },\n                  style: {\n                    padding: 10,\n                    marginBottom: 20\n                  },\n                  children: _jsx(Text, {\n                    style: [section === null && index === 0 && {\n                      color: \"white\",\n                      fontWeight: \"700\",\n                      borderBottomWidth: 1,\n                      borderBottomColor: \"white\"\n                    } || section === category && {\n                      color: \"white\",\n                      fontWeight: \"700\",\n                      borderBottomWidth: 1,\n                      borderBottomColor: \"white\"\n                    }, {\n                      fontSize: 16,\n                      color: \"white\"\n                    }],\n                    children: category\n                  })\n                }, index);\n              })\n            })]\n          }), (_catalog$categories2 = catalog.categories) == null ? void 0 : _catalog$categories2.map(function (category, index) {\n            var visible;\n            if (section === null && index === 0) {\n              visible = true;\n            } else if (section === category) {\n              visible = true;\n            } else {\n              visible = false;\n            }\n            return _jsx(MenuScreenInnerBlockLocal, {\n              category: category,\n              height: height,\n              visible: visible,\n              catalog: catalog\n            }, index);\n          })]\n        })\n      }), _jsxs(View, {\n        style: styles({\n          height: height,\n          width: width\n        }).containerCart,\n        children: [_jsx(View, {\n          style: styles({\n            height: height,\n            width: width\n          }).cartHeader,\n          children: _jsx(Text, {\n            style: {\n              fontFamily: \"archivo-600\",\n              color: \"rgba(255,255,255,1)\",\n              fontSize: 25\n            },\n            children: \"Order\"\n          })\n        }), _jsx(ScrollView, {\n          contentContainerStyle: styles({\n            height: height,\n            width: width\n          }).contentContainer,\n          style: {\n            marginBottom: 10\n          },\n          children: _jsx(View, {\n            children: (cart == null ? void 0 : cart.length) > 0 ? cart == null ? void 0 : cart.map(function (cartItem, index) {\n              return _jsx(CartItemEditable, {\n                cartItem: cartItem,\n                index: index,\n                removeAction: function removeAction() {\n                  console.log(\"Removing\");\n                  var local = structuredClone(cart);\n                  local.splice(index, 1);\n                  setCartState(local);\n                },\n                decreaseAction: function decreaseAction() {\n                  var local = structuredClone(cart);\n                  local[index].quantity--;\n                  setCartState(local);\n                },\n                increaseAction: function increaseAction() {\n                  var local = structuredClone(cart);\n                  if (local[index].quantity) {\n                    local[index].quantity++;\n                  } else {\n                    local[index].quantity = 2;\n                  }\n                  setCartState(local);\n                }\n              }, index);\n            }) : _jsxs(View, {\n              style: {\n                height: height * 0.7,\n                width: \"100%\",\n                justifyContent: \"center\",\n                alignItems: \"center\"\n              },\n              children: [_jsx(Text, {\n                style: styles({\n                  height: height,\n                  width: width\n                }).empty,\n                children: \"Empty...\"\n              }), _jsx(Text, {\n                style: styles({\n                  height: height,\n                  width: width\n                }).fillTheCart,\n                children: \"Fill the Cart!\"\n              })]\n            })\n          })\n        }), _jsxs(View, {\n          style: {\n            justifyContent: \"space-around\",\n            alignItems: \"center\",\n            width: \"90%\",\n            alignSelf: \"center\"\n          },\n          children: [orderDetails.delivery && parseFloat(storeDetails.deliveryPrice) && _jsxs(View, {\n            style: {\n              alignSelf: \"stretch\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: 2,\n              paddingTop: 5\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(74,74,74,1)\",\n                fontSize: 16,\n                alignSelf: \"flex-start\"\n              },\n              children: \"Delivery\"\n            }), _jsxs(Text, {\n              style: [{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\"\n              }, cartSub === 0 && {\n                opacity: 0.5\n              }],\n              children: [\"$\", parseFloat(storeDetails.deliveryPrice).toFixed(2)]\n            })]\n          }), _jsxs(View, {\n            style: {\n              alignSelf: \"stretch\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: 2\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(74,74,74,1)\",\n                fontSize: 16,\n                alignSelf: \"flex-start\"\n              },\n              children: \"Sub Total\"\n            }), _jsxs(Text, {\n              style: [{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\"\n              }, cartSub === 0 && {\n                opacity: 0.5\n              }],\n              children: [\"$\", cartSub.toFixed(2)]\n            })]\n          }), _jsxs(View, {\n            style: {\n              alignSelf: \"stretch\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: 2\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(74,74,74,1)\",\n                fontSize: 16,\n                alignSelf: \"flex-start\"\n              },\n              children: \"Tax\"\n            }), _jsxs(Text, {\n              style: [{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\"\n              }, cartSub === 0 && {\n                opacity: 0.5\n              }],\n              children: [\"$\", (cartSub * (storeDetails.taxRate ? storeDetails.taxRate / 100 : 0.13)).toFixed(2)]\n            })]\n          }), _jsxs(View, {\n            style: {\n              alignSelf: \"stretch\",\n              flexDirection: \"row\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n              marginBottom: 10\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontFamily: \"archivo-600\",\n                color: \"rgba(74,74,74,1)\",\n                fontSize: 16,\n                alignSelf: \"flex-start\"\n              },\n              children: \"Total\"\n            }), _jsxs(Text, {\n              style: [{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 20,\n                alignSelf: \"flex-start\"\n              }, cartSub === 0 && {\n                opacity: 0.5\n              }],\n              children: [\"$\", (Math.ceil(cartSub * (storeDetails.taxRate ? 1 + storeDetails.taxRate / 100 : 1.13) * 10) / 10).toFixed(2)]\n            })]\n          }), _jsx(TouchableOpacity, {\n            style: [styles({\n              height: height,\n              width: width\n            }).bigButton, cartSub === 0 && {\n              opacity: 0.5\n            }],\n            disabled: cart.length < 1,\n            onPress: function onPress() {\n              var today = new Date();\n              var transNum = Math.random().toString(36).substr(2, 9);\n              if (orderDetails.delivery) {\n                setorderDetails({\n                  date: today,\n                  transNum: transNum,\n                  total: (cartSub * (storeDetails.taxRate ? 1 + storeDetails.taxRate / 100 : 1.13)).toFixed(2),\n                  method: \"deliveryOrder\",\n                  online: true,\n                  cart: cart,\n                  customer: {\n                    name: orderDetails.name,\n                    phone: orderDetails.phone,\n                    address: orderDetails.address,\n                    email: orderDetails.email\n                  }\n                });\n              } else {\n                setorderDetails({\n                  date: today,\n                  transNum: transNum,\n                  total: (cartSub * (storeDetails.taxRate ? 1 + storeDetails.taxRate / 100 : 1.13)).toFixed(2),\n                  method: \"pickupOrder\",\n                  online: true,\n                  cart: cart,\n                  customer: {\n                    name: orderDetails.name,\n                    phone: orderDetails.phone,\n                    email: orderDetails.email,\n                    address: null\n                  }\n                });\n              }\n              setpage(3);\n            },\n            children: _jsx(Text, {\n              style: styles({\n                height: height,\n                width: width\n              }).btnTxt,\n              children: \"Checkout\"\n            })\n          })]\n        })]\n      })]\n    })\n  });\n};\nvar MenuScreenInnerBlockLocal = function MenuScreenInnerBlockLocal(_ref3) {\n  var _catalog$products;\n  var category = _ref3.category,\n    height = _ref3.height,\n    visible = _ref3.visible,\n    catalog = _ref3.catalog;\n  var customSort = function customSort(a, b) {\n    var rankA = a.rank || Number.MAX_SAFE_INTEGER;\n    var rankB = b.rank || Number.MAX_SAFE_INTEGER;\n\n    return rankA - rankB;\n  };\n  if (((_catalog$products = catalog.products) == null ? void 0 : _catalog$products.length) > 0) {\n    var renderItem = function renderItem(_ref4) {\n      var item = _ref4.item,\n        index = _ref4.index;\n      return _jsx(ProductDisplayBtnLocal, {\n        product: item,\n        productIndex: index,\n        userUid: catalog.docID\n      }, index);\n    };\n    var keyExtractor = function keyExtractor(item) {\n      return item.id;\n    };\n    var getItemLayout = function getItemLayout(data, index) {\n      return {\n        length: 200,\n        offset: 200 * index,\n        index: index\n      };\n    };\n\n    return _jsx(\"div\", {\n      style: visible === false ? {\n        display: \"none\"\n      } : {\n        display: \"block\"\n      },\n      children: _jsx(FlatList, {\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        },\n        contentContainerStyle: {\n          flexDirection: \"row\",\n          flexWrap: \"wrap\",\n          justifyContent: \"space-between\",\n          paddingLeft: 50,\n          paddingRight: 50\n        },\n        data: catalog.products.filter(function (product) {\n          var isVisible = product.category === category && !product.dontDisplayOnOnlineStore;\n          return isVisible;\n        }).sort(customSort),\n        renderItem: renderItem,\n        keyExtractor: keyExtractor,\n        getItemLayout: getItemLayout\n      })\n    });\n  } else {\n    return _jsx(View, {\n      style: {\n        width: \"100%\",\n        height: height * 0.8,\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: _jsx(Text, {\n        style: {\n          fontFamily: \"archivo-500\",\n          color: \"rgba(74,74,74,1)\",\n          fontSize: 20\n        },\n        children: \"This category has no products...\"\n      })\n    });\n  }\n};\nvar ProductDisplayBtnLocal = function ProductDisplayBtnLocal(_ref5) {\n  var product = _ref5.product,\n    productIndex = _ref5.productIndex,\n    userUid = _ref5.userUid;\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    showProductScreen = _useState16[0],\n    setshowProductScreen = _useState16[1];\n  var xPos = useRef(new Animated.Value(-1000)).current;\n  var shadowOpacity = useRef(new Animated.Value(0)).current;\n  var _useState17 = useState(),\n    _useState18 = _slicedToArray(_useState17, 2),\n    productImage = _useState18[0],\n    setproductImage = _useState18[1];\n  var cart = cartState.use();\n  var _useWindowDimensions2 = useWindowDimensions(),\n    height = _useWindowDimensions2.height,\n    width = _useWindowDimensions2.width;\n  useEffect(function () {\n    if (product.hasImage) {\n      storage.ref(userUid + \"/images/\" + product.id).getDownloadURL().then(function (url) {\n        setproductImage(url);\n      });\n    }\n  }, []);\n  var fadeIn = function fadeIn() {\n    setshowProductScreen(true);\n    Animated.timing(xPos, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: false\n    }).start();\n    Animated.timing(shadowOpacity, {\n      toValue: 1,\n      duration: 200,\n      useNativeDriver: false\n    }).start();\n  };\n  var fadeOut = function fadeOut() {\n    Animated.timing(shadowOpacity, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: false\n    }).start();\n    Animated.timing(xPos, {\n      toValue: -1000,\n      duration: 200,\n      useNativeDriver: false\n    }).start(function () {\n      return setshowProductScreen(false);\n    });\n  };\n  return _jsxs(TouchableOpacity, {\n    onPress: function onPress() {\n      if (product.options.length > 0) {\n        fadeIn();\n      } else {\n        addCartState({\n          name: product.name,\n          price: product.price,\n          description: product.description,\n          options: [],\n          extraDetails: null\n        }, cart);\n      }\n    },\n    style: [styles({\n      height: height,\n      width: width\n    }).touchable],\n    children: [_jsx(\"div\", {\n      style: {\n        height: \"200px\",\n        width: \"200px\",\n        backgroundColor: \"rgba(0,0,0,0.5)\",\n        borderRadius: \"3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        backgroundImage: \"url(\" + productImage + \")\",\n        backgroundSize: \"cover\",\n        backgroundPosition: \"center\"\n      },\n      children: _jsx(View, {\n        style: {\n          height: \"100%\",\n          width: \"100%\",\n          backgroundColor: \"rgba(0,0,0,0.5)\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          borderRadius: 3\n        },\n        children: _jsx(Text, {\n          style: {\n            fontFamily: \"archivo-500\",\n            color: \"rgba(255,255,255,1)\",\n            fontSize: 15,\n            textAlign: \"center\"\n          },\n          children: product.name\n        })\n      })\n    }), showProductScreen && _jsxs(Modal, {\n      transparent: true,\n      children: [_jsx(Animated.View, {\n        style: {\n          flex: 1,\n          justifyContent: \"flex-end\",\n          alignItems: \"flex-start\",\n          position: \"absolute\",\n          height: \"100%\",\n          width: \"100%\",\n          bottom: 0,\n          left: xPos,\n          zIndex: 0\n        },\n        children: _jsx(View, {\n          style: {\n            height: \"100%\",\n            width: \"70%\",\n            borderTopRightRadius: 3\n          },\n          children: _jsx(ProductListing, {\n            product: product\n            ,\n            goBack: function goBack() {\n              return fadeOut();\n            }\n          })\n        })\n      }), _jsx(Animated.View, {\n        style: {\n          height: \"100%\",\n          width: \"30%\",\n          padding: 20,\n          shadowColor: \"rgba(0,0,0,1)\",\n          shadowOffset: {\n            width: -3,\n            height: 3\n          },\n          elevation: 30,\n          shadowOpacity: 0.5,\n          shadowRadius: 5,\n          position: \"absolute\",\n          opacity: shadowOpacity,\n          right: 0,\n          bottom: 0\n        }\n      })]\n    })]\n  }, productIndex);\n};\nvar Page3 = function Page3(_ref6) {\n  var storeDetails = _ref6.storeDetails,\n    setorderDetails = _ref6.setorderDetails,\n    orderDetails = _ref6.orderDetails,\n    setpage = _ref6.setpage,\n    catalog = _ref6.catalog;\n  var _useWindowDimensions3 = useWindowDimensions(),\n    height = _useWindowDimensions3.height,\n    width = _useWindowDimensions3.width;\n  var stripe = useStripe();\n  var elements = useElements();\n  var _useState19 = useState(\"cad\"),\n    _useState20 = _slicedToArray(_useState19, 2),\n    currency = _useState20[0],\n    setCurrency = _useState20[1];\n\n  var handleSubmit = function () {\n    var _ref7 = _asyncToGenerator(function* (event) {\n      event.preventDefault();\n      if (!stripe || !elements) {\n        return;\n      }\n      var cardElement = elements.getElement(_jsx(CardElement, {\n        options: {\n          hidePostalCode: true\n        }\n      }));\n      var _yield$stripe$createT = yield stripe.createToken(cardElement),\n        token = _yield$stripe$createT.token,\n        error = _yield$stripe$createT.error;\n      if (error) {\n        console.error(\"Error creating token:\", error);\n      } else {\n        console.log(\"Token:\", token);\n\n        var response = yield fetch(\"https://us-central1-posmate-5fc0a.cloudfunctions.net/processPayment\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            token: token.id,\n            amount: orderDetails.total,\n            currency: currency,\n            storeUID: storeDetails.docID,\n            orderDetails: orderDetails\n          })\n        });\n        try {\n          var responseData = yield response.json();\n          if (response.ok && responseData.success) {\n            console.log(\"Payment processed successfully!\");\n            setpage(4);\n          } else {\n            console.error(\"Payment processing failed. Server message:\", responseData.message);\n          }\n        } catch (jsonError) {\n          console.error(\"Error parsing JSON response:\", jsonError);\n        }\n      }\n    });\n    return function handleSubmit(_x4) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: {\n      backgroundColor: \"white\",\n      padding: 20\n    },\n    children: [_jsx(Text, {\n      children: \"Details\"\n    }), _jsx(TextInput, {\n      style: styles({\n        height: height,\n        width: width\n      }).textInput,\n      placeholder: \"Name\",\n      value: orderDetails.customer.name,\n      onChangeText: function onChangeText(text) {\n        return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n          customer: _objectSpread(_objectSpread({}, orderDetails.customer), {}, {\n            name: text\n          })\n        }));\n      }\n    }), _jsx(TextInput, {\n      style: styles({\n        height: height,\n        width: width\n      }).textInput,\n      placeholder: \"Phone Number\",\n      value: orderDetails.customer.phone,\n      onChangeText: function onChangeText(text) {\n        return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n          customer: _objectSpread(_objectSpread({}, orderDetails.customer), {}, {\n            phone: text\n          })\n        }));\n      }\n    }), _jsx(TextInput, {\n      style: styles({\n        height: height,\n        width: width\n      }).textInput,\n      placeholder: \"Email\",\n      value: orderDetails.customer.email,\n      onChangeText: function onChangeText(text) {\n        return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n          customer: _objectSpread(_objectSpread({}, orderDetails.customer), {}, {\n            email: text\n          })\n        }));\n      }\n    }), _jsx(TextInput, {\n      style: styles({\n        height: height,\n        width: width\n      }).textInput,\n      placeholder: \"Notes\",\n      value: orderDetails.customer.note,\n      onChangeText: function onChangeText(text) {\n        return setorderDetails(_objectSpread(_objectSpread({}, orderDetails), {}, {\n          customer: _objectSpread(_objectSpread({}, orderDetails.customer), {}, {\n            note: text\n          })\n        }));\n      }\n    }), _jsx(CardElement, {}), _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return setpage(2);\n      },\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20,\n        marginTop: 20\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: \"Back\"\n      })\n    }), _jsx(TouchableOpacity, {\n      onPress: handleSubmit,\n      disabled: !stripe,\n      style: {\n        padding: 20,\n        borderRadius: 10,\n        backgroundColor: \"rgba(255,255,255, 0.7)\",\n        borderWidth: 1,\n        marginBottom: 20,\n        marginTop: 20\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 16\n        },\n        children: \"Checkout\"\n      })\n    })]\n  });\n};\nvar Page4 = function Page4() {\n  return _jsx(View, {\n    children: _jsx(Text, {\n      children: \"Thank you for your order\"\n    })\n  });\n};\nexport default OrderPage;\nvar styles = function styles(props) {\n  return StyleSheet.create({\n    container: {\n      backgroundColor: \"white\",\n      height: \"100%\",\n      width: props.width * 0.7,\n      flexDirection: \"row\"\n    },\n    wrapper: {\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"space-between\",\n      paddingLeft: 50,\n      paddingRight: 50\n    },\n    scrollview: {\n      width: \"100%\"\n    },\n    containerCart: {\n      height: \"100%\",\n      width: \"30%\",\n      padding: 20,\n      backgroundColor: \"rgba(31,35,48,1)\",\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      borderTopLeftRadius: 2,\n      borderBottomLeftRadius: 2,\n      shadowColor: \"rgba(0,0,0,1)\",\n      shadowOffset: {\n        width: -3,\n        height: 3\n      },\n      elevation: 30,\n      shadowOpacity: 0.92,\n      shadowRadius: 5\n    },\n    contentContainer: {\n      height: \"100%\",\n      justifyContent: \"space-between\",\n      width: \"100%\"\n    },\n    totalContainer: {\n      height: \"14%\",\n      paddingTop: 10\n    },\n    cartHeader: {\n      height: \"6%\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      marginBottom: 20\n    },\n    iconContainer: {\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      backgroundColor: \"rgba(41,44,56,1)\",\n      borderRadius: 15,\n      width: 50,\n      height: 50,\n      margin: 10\n    },\n    cashButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      width: \"49.5%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    cardButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      borderTopRightRadius: 30,\n      borderBottomRightRadius: 30,\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n      width: \"49.5%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    btnTxt: {\n      fontSize: 20,\n      color: \"white\"\n    },\n    totalTxt: {\n      fontSize: 16,\n      marginBottom: 5,\n      color: \"rgba(255,255,255,1)\",\n      fontWeight: \"600\"\n    },\n    totalTxtPrice: {\n      fontSize: 16,\n      marginBottom: 5,\n      color: \"rgba(255,255,255,1)\",\n      fontWeight: \"600\"\n    },\n    bigButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      width: \"98%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    innerTxt: {\n      fontSize: 13,\n      marginBottom: 10\n    },\n    headerTxt: {\n      fontSize: 15,\n      fontWeight: \"600\"\n    },\n    empty: {\n      fontFamily: \"archivo-600\",\n      color: \"rgba(255,255,255,1)\",\n      fontSize: 20,\n      opacity: 0.44,\n      marginTop: 20\n    },\n    fillTheCart: {\n      fontFamily: \"archivo-500\",\n      color: \"rgba(74,74,74,1)\",\n      fontSize: 20\n    },\n    touchable: {\n      margin: 15,\n      width: 200,\n      height: 200,\n      backgroundColor: \"rgba(125,126,132,1)\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      borderRadius: 3\n    },\n    textInput: {\n      backgroundColor: \"rgba(255,255,255,1)\",\n      borderRadius: 10,\n      padding: 10,\n      marginBottom: 10\n    }\n  });\n};","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","db","storage","GooglePlacesAutocomplete","useHistory","Logo","CartItemEditable","ProductListing","addCartState","cartState","setCartState","GOOGLE_API_KEY","CardElement","useStripe","useElements","loadStripe","Elements","OnlineOrderHome","OrderCartMain","OrderPage","history","urlEnding","storeDetails","setstoreDetails","categories","products","catalog","setcatalog","height","useWindowDimensions","width","delivery","address","customer","name","phoneNumber","email","orderDetails","setorderDetails","page","setpage","fadeAnim","Animated","Value","current","customSort","a","b","rankA","rank","Number","MAX_SAFE_INTEGER","rankB","collection","where","toLowerCase","get","then","querySnapshot","empty","console","log","push","docs","data","onlineStoreActive","docID","id","stripePublicKey","ref","forEach","element","length","setdata","newData","sort","map","product","index","prev","productsWithCategory","filter","item","category","indexOfLastItem","indexOf","splice","catch","e","fadeOut","timing","toValue","duration","useNativeDriver","start","document","getElementById","style","display","flex","position","top","left","alignItems","justifyContent","backgroundColor","opacity","require","resizeMode","Page1","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","Math","PI","dLon","sin","cos","c","atan2","sqrt","distance","getLatLng","placeId","response","fetch","method","headers","body","JSON","stringify","responseData","json","ok","success","error","message","jsonError","calculateDistanceBetweenAddresses","address1","address2","lat","lng","padding","borderRadius","borderWidth","marginBottom","fontSize","acceptDelivery","flexDirection","marginRight","region","onChange","defaultValue","menuPortalTarget","styles","menuPortal","base","zIndex","active","suggestions","onSelectSuggestion","suggestion","event","description","alert","value","reference","toFixed","deliveryRange","parseFloat","marginTop","Page2","section","setsection","cartSub","setCartSub","cart","use","newVal","i","quantity","price","deliveryPrice","container","alignSelf","color","fontWeight","borderBottomWidth","borderBottomColor","visible","containerCart","cartHeader","fontFamily","contentContainer","cartItem","local","structuredClone","fillTheCart","paddingTop","taxRate","ceil","bigButton","today","Date","transNum","random","toString","substr","date","total","online","phone","btnTxt","MenuScreenInnerBlockLocal","renderItem","keyExtractor","getItemLayout","offset","flexWrap","paddingLeft","paddingRight","isVisible","dontDisplayOnOnlineStore","ProductDisplayBtnLocal","productIndex","userUid","showProductScreen","setshowProductScreen","xPos","shadowOpacity","productImage","setproductImage","hasImage","getDownloadURL","url","fadeIn","options","extraDetails","touchable","backgroundImage","backgroundSize","backgroundPosition","textAlign","bottom","borderTopRightRadius","shadowColor","shadowOffset","elevation","shadowRadius","right","Page3","stripe","elements","currency","setCurrency","handleSubmit","preventDefault","cardElement","getElement","hidePostalCode","createToken","token","amount","storeUID","textInput","text","note","Page4","props","StyleSheet","create","wrapper","scrollview","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","totalContainer","iconContainer","margin","cashButton","cardButton","totalTxt","totalTxtPrice","innerTxt","headerTxt"],"sources":["/Users/peterputros/Desktop/PosMate/pages/non-authed/OrderPage.tsx"],"sourcesContent":["import {\n  Modal,\n  StyleSheet,\n  Text,\n  View,\n  useWindowDimensions,\n  Image,\n  ImageBackground,\n  TouchableOpacity,\n  ScrollView,\n  FlatList,\n  Animated,\n  TextInput,\n} from \"react-native\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { db, storage } from \"state/firebaseConfig\";\nimport TemplateImage from \"assets/template-background.jpg\";\nimport GooglePlacesAutocomplete from \"react-google-places-autocomplete\";\nimport { useHistory } from \"react-router-dom\";\nimport Logo from \"assets/dpos-logo.png\";\nimport CartItemEditable from \"components/cart/CartItemEditable\";\nimport ProductListing from \"components/product/ProductListing\";\nimport { addCartState, cartState, setCartState } from \"state/state\";\nconst GOOGLE_API_KEY = \"AIzaSyDjx4LBIEDNRYKEt-0_TJ6jUcst4a2YON4\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport OnlineOrderHome from \"./OnlineOrderPages/OnlineOrderHome\";\nimport OrderCartMain from \"./OnlineOrderPages/OrderCartMain\";\n\nconst OrderPage = () => {\n  const history = useHistory();\n  const { urlEnding } = useParams();\n  const [storeDetails, setstoreDetails] = useState({});\n  const [catalog, setcatalog] = useState({\n    categories: [],\n    products: [],\n  });\n  const height = useWindowDimensions().height;\n  const width = useWindowDimensions().width;\n  const [orderDetails, setorderDetails] = useState({\n    delivery: null,\n    address: null,\n    customer: {\n      name: \"\",\n      phoneNumber: \"\",\n      email: \"\",\n      address: null,\n    },\n  });\n  const [page, setpage] = useState(1);\n  const fadeAnim = useRef(new Animated.Value(1)).current;\n\n  const customSort = (a, b) => {\n    // Handle cases where one or both items don't have a rank\n    const rankA = a.rank || Number.MAX_SAFE_INTEGER;\n    const rankB = b.rank || Number.MAX_SAFE_INTEGER;\n\n    // Compare based on ranks\n    return rankA - rankB;\n  };\n\n  useEffect(() => {\n    db.collection(\"public\")\n      .where(\"urlEnding\", \"==\", urlEnding.toLowerCase())\n      .get()\n      .then((querySnapshot) => {\n        if (querySnapshot.empty) {\n          console.log(\"No existing online store\");\n          //send them to a 404 page\n          history.push(\"/404\");\n        }\n\n        if (!querySnapshot.docs[0].data().onlineStoreActive) {\n          console.log(\"Store is not active\");\n          //send them to a 404 page\n          history.push(\"/404\");\n        }\n\n        const products = [];\n\n        setstoreDetails({\n          ...querySnapshot.docs[0].data().storeDetails,\n          docID: querySnapshot.docs[0].id,\n          stripePublicKey: querySnapshot.docs[0].data().stripePublicKey,\n        });\n\n        querySnapshot.docs[0].ref\n          .collection(\"products\")\n          .get()\n          .then((docs) => {\n            if (!docs.empty) {\n              docs.forEach((element) => {\n                products.push(element.data());\n              });\n              // Move logging and operations that depend on 'products' being populated inside the .then() block\n              if (products.length > 0) {\n                setdata([]);\n                const newData = [];\n                products.sort(customSort).map((product, index) => {\n                  setdata((prev) => {\n                    const productsWithCategory = prev.filter(\n                      (item) => item.category === product.category\n                    );\n                    if (productsWithCategory.length > 0) {\n                      const indexOfLastItem = prev.indexOf(\n                        productsWithCategory[productsWithCategory.length - 1]\n                      );\n                      prev.splice(indexOfLastItem + 1, 0, {\n                        ...product,\n                        index: index + 1,\n                      });\n                      return prev;\n                    }\n\n                    return [\n                      ...prev,\n                      {\n                        ...product,\n                        index: index + 1,\n                      },\n                    ];\n                  });\n                });\n              }\n            }\n          })\n          .catch((e) => console.log(\"Error has occurred with db: \", e));\n\n        setcatalog({\n          categories: querySnapshot.docs[0].data().categories,\n          products: products,\n          docID: querySnapshot.docs[0].id,\n        });\n\n        fadeOut();\n      });\n  }, []);\n\n  const fadeOut = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false,\n    }).start(() => (document.getElementById(\"loader\").style.display = \"none\"));\n  };\n\n  const [data, setdata] = useState([]);\n\n  return (\n    <View style={{ flex: 1 }}>\n      {page === 1 || page === 3 && (\n        <OnlineOrderHome\n          storeDetails={storeDetails}\n          setorderDetails={setorderDetails}\n          orderDetails={orderDetails}\n          setpage={setpage}\n        />\n      )}\n      {page === 2 && (\n        <OrderCartMain\n          storeDetails={storeDetails}\n          setorderDetails={setorderDetails}\n          orderDetails={orderDetails}\n          setpage={setpage}\n          catalog={{ categories: catalog.categories, products: data }}\n        />\n      )}\n      {page === 3 && storeDetails && (\n        <Elements stripe={loadStripe(storeDetails.stripePublicKey)}>\n          <Page3\n            storeDetails={storeDetails}\n            setorderDetails={setorderDetails}\n            orderDetails={orderDetails}\n            setpage={setpage}\n            catalog={catalog}\n          />\n        </Elements>\n      )}\n      {page === 4 && <Page4 />}\n      <div\n        id=\"loader\"\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          height: \"100vh\", // Viewport Height\n          width: \"100vw\", // Viewport Width\n          display: \"flex\",\n          alignItems: \"center\", // This will center the content vertically\n          justifyContent: \"center\", // This will center the content horizontally\n        }}\n      >\n        <Animated.View\n          style={{\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            backgroundColor: \"white\",\n            position: \"absolute\",\n            opacity: fadeAnim,\n            height: \"100%\",\n            width: \"100%\",\n          }}\n        >\n          <Image\n            source={require(\"assets/loading.gif\")}\n            style={{ width: 450, height: 450, resizeMode: \"contain\" }}\n          />\n        </Animated.View>\n      </div>\n    </View>\n  );\n};\n\nconst Page1 = ({ storeDetails, setorderDetails, orderDetails, setpage }) => {\n  ///\n\n  // Function to calculate distance between two points using Haversine formula\n  function calculateDistance(lat1, lon1, lat2, lon2) {\n    const R = 6371; // Radius of the Earth in km\n    const dLat = (lat2 - lat1) * (Math.PI / 180); // Convert degrees to radians\n    const dLon = (lon2 - lon1) * (Math.PI / 180);\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(lat1 * (Math.PI / 180)) *\n        Math.cos(lat2 * (Math.PI / 180)) *\n        Math.sin(dLon / 2) *\n        Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c; // Distance in km\n    return distance;\n  }\n\n  // Function to get the latitude and longitude of an address using the Google Maps Geocoding API\n  async function getLatLng(placeId) {\n    const response = await fetch(\n      \"https://us-central1-posmate-5fc0a.cloudfunctions.net/getLatLng\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          placeId: placeId,\n        }),\n      }\n    );\n\n    try {\n      const responseData = await response.json();\n\n      if (response.ok && responseData.success) {\n        console.log(\"Success!\");\n        return responseData.data;\n      } else {\n        console.error(responseData.message);\n      }\n    } catch (jsonError) {\n      console.error(\"Error parsing JSON response:\", jsonError);\n    }\n  }\n\n  // Function to calculate distance between two addresses using Google Places API\n  async function calculateDistanceBetweenAddresses(address1, address2) {\n    try {\n      const { lat: lat1, lng: lon1 } = await getLatLng(address1);\n      const { lat: lat2, lng: lon2 } = await getLatLng(address2);\n      const distance = calculateDistance(lat1, lon1, lat2, lon2);\n      return distance;\n    } catch (error) {\n      console.error(\"Error calculating distance:\", error);\n      return null;\n    }\n  }\n\n  ///\n\n  return (\n    <View>\n      <View\n        style={{\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n        }}\n      >\n        <Text style={{ fontSize: 16 }}>Welcome to {storeDetails.name}</Text>\n      </View>\n      <View\n        style={{\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n        }}\n      >\n        <Text style={{ fontSize: 16 }}>\n          Would you like to order for Pickup{\" \"}\n          {storeDetails.acceptDelivery ? \"or Delivery\" : \"\"}\n        </Text>\n      </View>\n      <View\n        style={{\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n        }}\n      >\n        {storeDetails.acceptDelivery && (\n          <TouchableOpacity\n            onPress={() => setorderDetails({ ...orderDetails, delivery: true })}\n            style={{\n              padding: 20,\n              borderRadius: 10,\n              backgroundColor: \"rgba(255,255,255, 0.7)\",\n              borderWidth: 1,\n              marginBottom: 20,\n              marginRight: 20,\n            }}\n          >\n            <Text style={{ fontSize: 16 }}>Delivery</Text>\n          </TouchableOpacity>\n        )}\n        <TouchableOpacity\n          onPress={() =>\n            setorderDetails({ ...orderDetails, delivery: false, address: null })\n          }\n          style={{\n            padding: 20,\n            borderRadius: 10,\n            backgroundColor: \"rgba(255,255,255, 0.7)\",\n            borderWidth: 1,\n            marginBottom: 20,\n          }}\n        >\n          <Text style={{ fontSize: 16 }}>Pickup</Text>\n        </TouchableOpacity>\n      </View>\n      {orderDetails.delivery && (\n        <View\n          style={{\n            padding: 20,\n            borderRadius: 10,\n            backgroundColor: \"rgba(255,255,255, 0.7)\",\n            borderWidth: 1,\n            marginBottom: 20,\n          }}\n        >\n          <Text style={{ fontSize: 16 }}>Please enter delivery address</Text>\n          <GooglePlacesAutocomplete\n            apiOptions={{\n              region: \"CA\",\n            }}\n            debounce={800}\n            apiKey={GOOGLE_API_KEY}\n            // onSelect={handleAddress}\n            selectProps={{\n              address: orderDetails.address,\n              onChange: (address) =>\n                setorderDetails({ ...orderDetails, address }),\n              defaultValue: orderDetails.address,\n              menuPortalTarget: document.body,\n              styles: {\n                menuPortal: (base) => ({ ...base, zIndex: 9999 }),\n              },\n            }}\n            renderSuggestions={(active, suggestions, onSelectSuggestion) => (\n              <div>\n                {suggestions.map((suggestion) => (\n                  <div\n                    className=\"suggestion\"\n                    onClick={(event) => {\n                      onSelectSuggestion(suggestion, event);\n                    }}\n                  >\n                    {suggestion.description}\n                  </div>\n                ))}\n              </div>\n            )}\n          />\n        </View>\n      )}\n      <TouchableOpacity\n        onPress={() => {\n          if (orderDetails.delivery) {\n            if (!orderDetails.address) {\n              alert(\"Please enter a delivery address\");\n              return;\n            }\n            calculateDistanceBetweenAddresses(\n              storeDetails.address.value.reference,\n              orderDetails.address.value.reference\n            ).then((distance) => {\n              if (distance !== null) {\n                console.log(\n                  `Distance between addresses: ${distance.toFixed(2)} km`\n                );\n                if (storeDetails.deliveryRange) {\n                  if (distance > parseFloat(storeDetails.deliveryRange)) {\n                    alert(\"The delivery address is out of range\");\n                  } else {\n                    setpage(2);\n                  }\n                } else {\n                  setpage(2);\n                }\n              } else {\n                alert(\n                  \"Distance calculation between the store and your location failed. Please refresh page.\"\n                );\n              }\n            });\n          } else {\n            setpage(2);\n          }\n        }}\n        style={{\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n          marginTop: 20,\n        }}\n      >\n        <Text style={{ fontSize: 16 }}>Next</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst Page2 = ({\n  storeDetails,\n  setorderDetails,\n  orderDetails,\n  setpage,\n  catalog,\n}) => {\n  const { height, width } = useWindowDimensions();\n  const [section, setsection] = useState(null);\n  const [cartSub, setCartSub] = useState(0);\n  const cart = cartState.use();\n\n  useEffect(() => {\n    if (cart.length > 0) {\n      let newVal = 0;\n      for (let i = 0; i < cart.length; i++) {\n        try {\n          if (cart[i].quantity > 1) {\n            newVal += parseFloat(cart[i].price) * cart[i].quantity;\n            // console.log(\"Cart item quantity \", cart[i].quantity);\n          } else {\n            newVal += parseFloat(cart[i].price);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n      if (orderDetails.delivery) {\n        setCartSub(newVal + parseFloat(storeDetails.deliveryPrice));\n      } else {\n        setCartSub(newVal);\n      }\n    } else {\n      setCartSub(0);\n    }\n  }, [cart]);\n\n  return (\n    <View style={{ flex: 1, height: \"100%\", width: \"100%\" }}>\n      <View style={{ flexDirection: \"row\", height: \"100%\" }}>\n        <View style={{ width: \"70%\", height: \"100%\" }}>\n          <View style={styles({ height, width }).container}>\n            <View\n              style={{\n                backgroundColor: \"rgba(31,35,48,1)\",\n                width: \"23%\",\n                height: \"100%\",\n                alignItems: \"center\",\n                alignSelf: \"center\",\n              }}\n            >\n              <Image\n                source={Logo}\n                style={{ width: 200, height: 160, resizeMode: \"contain\" }}\n              />\n              <ScrollView\n                contentContainerStyle={{\n                  height: \"90%\",\n                  alignItems: \"center\",\n                }}\n              >\n                {catalog.categories?.map((category, index) => {\n                  return (\n                    <TouchableOpacity\n                      key={index}\n                      onPress={() => {\n                        setsection(category);\n                      }}\n                      style={{ padding: 10, marginBottom: 20 }}\n                    >\n                      <Text\n                        style={[\n                          (section === null &&\n                            index === 0 && {\n                              color: \"white\",\n                              fontWeight: \"700\",\n                              borderBottomWidth: 1,\n                              borderBottomColor: \"white\",\n                            }) ||\n                            (section === category && {\n                              color: \"white\",\n                              fontWeight: \"700\",\n                              borderBottomWidth: 1,\n                              borderBottomColor: \"white\",\n                            }),\n                          { fontSize: 16, color: \"white\" },\n                        ]}\n                      >\n                        {category}\n                      </Text>\n                    </TouchableOpacity>\n                  );\n                })}\n              </ScrollView>\n            </View>\n            {catalog.categories?.map((category, index) => {\n              let visible;\n\n              if (section === null && index === 0) {\n                visible = true;\n              } else if (section === category) {\n                visible = true;\n              } else {\n                visible = false;\n              }\n\n              return (\n                <MenuScreenInnerBlockLocal\n                  key={index}\n                  category={category}\n                  height={height}\n                  visible={visible}\n                  catalog={catalog}\n                />\n              );\n            })}\n          </View>\n        </View>\n        {/* Cart */}\n        <View style={styles({ height, width }).containerCart}>\n          <View style={styles({ height, width }).cartHeader}>\n            <Text\n              style={{\n                fontFamily: \"archivo-600\",\n                color: \"rgba(255,255,255,1)\",\n                fontSize: 25,\n              }}\n            >\n              Order\n            </Text>\n          </View>\n          <ScrollView\n            contentContainerStyle={styles({ height, width }).contentContainer}\n            style={{ marginBottom: 10 }}\n          >\n            <View>\n              {cart?.length > 0 ? (\n                cart?.map((cartItem, index) => (\n                  <CartItemEditable\n                    key={index}\n                    cartItem={cartItem}\n                    index={index}\n                    removeAction={() => {\n                      console.log(\"Removing\");\n                      const local = structuredClone(cart);\n                      local.splice(index, 1);\n                      setCartState(local);\n                    }}\n                    decreaseAction={() => {\n                      const local = structuredClone(cart);\n                      local[index].quantity--;\n                      setCartState(local);\n                    }}\n                    increaseAction={() => {\n                      const local = structuredClone(cart);\n                      if (local[index].quantity) {\n                        local[index].quantity++;\n                      } else {\n                        local[index].quantity = 2;\n                      }\n                      setCartState(local);\n                    }}\n                  />\n                ))\n              ) : (\n                <View\n                  style={{\n                    height: height * 0.7,\n                    width: \"100%\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                  }}\n                >\n                  <Text style={styles({ height, width }).empty}>Empty...</Text>\n                  <Text style={styles({ height, width }).fillTheCart}>\n                    Fill the Cart!\n                  </Text>\n                </View>\n              )}\n            </View>\n          </ScrollView>\n          <View\n            style={{\n              justifyContent: \"space-around\",\n              alignItems: \"center\",\n              width: \"90%\",\n              alignSelf: \"center\",\n            }}\n          >\n            {orderDetails.delivery &&\n              parseFloat(storeDetails.deliveryPrice) && (\n                <View\n                  style={{\n                    alignSelf: \"stretch\",\n                    flexDirection: \"row\",\n                    justifyContent: \"space-between\",\n                    alignItems: \"center\",\n                    marginBottom: 2,\n                    paddingTop: 5,\n                  }}\n                >\n                  <Text\n                    style={{\n                      fontFamily: \"archivo-600\",\n                      color: \"rgba(74,74,74,1)\",\n                      fontSize: 16,\n                      alignSelf: \"flex-start\",\n                    }}\n                  >\n                    Delivery\n                  </Text>\n                  <Text\n                    style={[\n                      {\n                        fontFamily: \"archivo-600\",\n                        color: \"rgba(255,255,255,1)\",\n                        fontSize: 20,\n                        alignSelf: \"flex-start\",\n                      },\n                      cartSub === 0 && { opacity: 0.5 },\n                    ]}\n                  >\n                    ${parseFloat(storeDetails.deliveryPrice).toFixed(2)}\n                  </Text>\n                </View>\n              )}\n            <View\n              style={{\n                alignSelf: \"stretch\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 2,\n              }}\n            >\n              <Text\n                style={{\n                  fontFamily: \"archivo-600\",\n                  color: \"rgba(74,74,74,1)\",\n                  fontSize: 16,\n                  alignSelf: \"flex-start\",\n                }}\n              >\n                Sub Total\n              </Text>\n              <Text\n                style={[\n                  {\n                    fontFamily: \"archivo-600\",\n                    color: \"rgba(255,255,255,1)\",\n                    fontSize: 20,\n                    alignSelf: \"flex-start\",\n                  },\n                  cartSub === 0 && { opacity: 0.5 },\n                ]}\n              >\n                ${cartSub.toFixed(2)}\n              </Text>\n            </View>\n            <View\n              style={{\n                alignSelf: \"stretch\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 2,\n              }}\n            >\n              <Text\n                style={{\n                  fontFamily: \"archivo-600\",\n                  color: \"rgba(74,74,74,1)\",\n                  fontSize: 16,\n                  alignSelf: \"flex-start\",\n                }}\n              >\n                Tax\n              </Text>\n              <Text\n                style={[\n                  {\n                    fontFamily: \"archivo-600\",\n                    color: \"rgba(255,255,255,1)\",\n                    fontSize: 20,\n                    alignSelf: \"flex-start\",\n                  },\n                  cartSub === 0 && { opacity: 0.5 },\n                ]}\n              >\n                $\n                {(\n                  cartSub *\n                  (storeDetails.taxRate ? storeDetails.taxRate / 100 : 0.13)\n                ).toFixed(2)}\n              </Text>\n            </View>\n            <View\n              style={{\n                alignSelf: \"stretch\",\n                flexDirection: \"row\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                marginBottom: 10,\n              }}\n            >\n              <Text\n                style={{\n                  fontFamily: \"archivo-600\",\n                  color: \"rgba(74,74,74,1)\",\n                  fontSize: 16,\n                  alignSelf: \"flex-start\",\n                }}\n              >\n                Total\n              </Text>\n              <Text\n                style={[\n                  {\n                    fontFamily: \"archivo-600\",\n                    color: \"rgba(255,255,255,1)\",\n                    fontSize: 20,\n                    alignSelf: \"flex-start\",\n                  },\n                  cartSub === 0 && { opacity: 0.5 },\n                ]}\n              >\n                $\n                {(\n                  Math.ceil(\n                    cartSub *\n                      (storeDetails.taxRate\n                        ? 1 + storeDetails.taxRate / 100\n                        : 1.13) *\n                      10\n                  ) / 10\n                ).toFixed(2)}\n              </Text>\n            </View>\n            <TouchableOpacity\n              style={[\n                styles({ height, width }).bigButton,\n                cartSub === 0 && { opacity: 0.5 },\n              ]}\n              disabled={cart.length < 1}\n              onPress={() => {\n                const today = new Date();\n                const transNum = Math.random().toString(36).substr(2, 9);\n\n                if (orderDetails.delivery) {\n                  setorderDetails({\n                    date: today,\n                    transNum: transNum,\n                    total: (\n                      cartSub *\n                      (storeDetails.taxRate\n                        ? 1 + storeDetails.taxRate / 100\n                        : 1.13)\n                    ).toFixed(2),\n                    method: \"deliveryOrder\",\n                    online: true,\n                    cart: cart,\n                    customer: {\n                      name: orderDetails.name,\n                      phone: orderDetails.phone,\n                      address: orderDetails.address,\n                      email: orderDetails.email,\n                    },\n                  });\n                } else {\n                  setorderDetails({\n                    date: today,\n                    transNum: transNum,\n                    total: (\n                      cartSub *\n                      (storeDetails.taxRate\n                        ? 1 + storeDetails.taxRate / 100\n                        : 1.13)\n                    ).toFixed(2),\n                    method: \"pickupOrder\",\n                    online: true,\n                    cart: cart,\n                    customer: {\n                      name: orderDetails.name,\n                      phone: orderDetails.phone,\n                      email: orderDetails.email,\n                      address: null,\n                    },\n                  });\n                }\n                setpage(3);\n              }}\n            >\n              <Text style={styles({ height, width }).btnTxt}>Checkout</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n        {/* Cart End */}\n      </View>\n    </View>\n  );\n};\n\nconst MenuScreenInnerBlockLocal = ({ category, height, visible, catalog }) => {\n  // Custom sorting function\n  const customSort = (a, b) => {\n    // Handle cases where one or both items don't have a rank\n    const rankA = a.rank || Number.MAX_SAFE_INTEGER;\n    const rankB = b.rank || Number.MAX_SAFE_INTEGER;\n\n    // Compare based on ranks\n    return rankA - rankB;\n  };\n\n  if (catalog.products?.length > 0) {\n    const renderItem = ({ item, index }) => (\n      <ProductDisplayBtnLocal\n        product={item}\n        productIndex={index}\n        key={index}\n        userUid={catalog.docID}\n      />\n    ); // Defined outside the render method\n    const keyExtractor = (item) => item.id; // Defined outside the render method\n    const getItemLayout = (data, index) => ({\n      length: 200,\n      offset: 200 * index,\n      index,\n    }); // Defined outside the render method\n\n    return (\n      <div\n        style={visible === false ? { display: \"none\" } : { display: \"block\" }}\n      >\n        <FlatList\n          style={{ width: \"100%\", height: \"100%\" }}\n          contentContainerStyle={{\n            flexDirection: \"row\",\n            flexWrap: \"wrap\",\n            justifyContent: \"space-between\",\n            paddingLeft: 50,\n            paddingRight: 50,\n          }}\n          data={catalog.products\n            .filter((product) => {\n              const isVisible =\n                product.category === category &&\n                !product.dontDisplayOnOnlineStore;\n              return isVisible;\n            })\n            .sort(customSort)}\n          renderItem={renderItem}\n          keyExtractor={keyExtractor}\n          getItemLayout={getItemLayout}\n        />\n      </div>\n    );\n  } else {\n    return (\n      <View\n        style={{\n          width: \"100%\",\n          height: height * 0.8,\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      >\n        <Text\n          style={{\n            fontFamily: \"archivo-500\",\n            color: \"rgba(74,74,74,1)\",\n            fontSize: 20,\n          }}\n        >\n          This category has no products...\n        </Text>\n      </View>\n    );\n  }\n};\n\nconst ProductDisplayBtnLocal = ({ product, productIndex, userUid }) => {\n  const [showProductScreen, setshowProductScreen] = useState(false);\n  const xPos = useRef(new Animated.Value(-1000)).current;\n  const shadowOpacity = useRef(new Animated.Value(0)).current;\n  const [productImage, setproductImage] = useState();\n  const cart = cartState.use();\n  const { height, width } = useWindowDimensions();\n\n  useEffect(() => {\n    if (product.hasImage) {\n      storage\n        .ref(userUid + \"/images/\" + product.id)\n        .getDownloadURL()\n        .then((url) => {\n          setproductImage(url);\n        });\n    }\n  }, []);\n\n  const fadeIn = () => {\n    // Will change xPos value to 0 in 3 seconds\n    setshowProductScreen(true);\n    Animated.timing(xPos, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: false,\n    }).start();\n    Animated.timing(shadowOpacity, {\n      toValue: 1,\n      duration: 200,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const fadeOut = () => {\n    // Will change xPos value to 0 in 3 seconds\n    Animated.timing(shadowOpacity, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: false,\n    }).start();\n    Animated.timing(xPos, {\n      toValue: -1000,\n      duration: 200,\n      useNativeDriver: false,\n    }).start(() => setshowProductScreen(false));\n  };\n\n  return (\n    <TouchableOpacity\n      key={productIndex}\n      onPress={() => {\n        if (product.options.length > 0) {\n          // navigation.navigate(\"Product Listing\", { product: product });\n          // setshowProductScreen(true);\n          fadeIn();\n        } else {\n          addCartState(\n            {\n              name: product.name,\n              price: product.price,\n              description: product.description,\n              options: [],\n              extraDetails: null,\n            },\n            cart\n          );\n        }\n      }}\n      style={[styles({ height, width }).touchable]}\n    >\n      <div\n        style={{\n          height: \"200px\",\n          width: \"200px\",\n          backgroundColor: \"rgba(0,0,0,0.5)\",\n          borderRadius: \"3px\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          backgroundImage: `url(${productImage})`,\n          backgroundSize: \"cover\",\n          backgroundPosition: \"center\",\n        }}\n      >\n        <View\n          style={{\n            height: \"100%\",\n            width: \"100%\",\n            backgroundColor: \"rgba(0,0,0,0.5)\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            borderRadius: 3,\n          }}\n        >\n          <Text\n            style={{\n              fontFamily: \"archivo-500\",\n              color: \"rgba(255,255,255,1)\",\n              fontSize: 15,\n              textAlign: \"center\",\n            }}\n          >\n            {product.name}\n          </Text>\n        </View>\n      </div>\n      {showProductScreen && (\n        <Modal transparent={true}>\n          <Animated.View\n            style={{\n              flex: 1,\n              justifyContent: \"flex-end\",\n              alignItems: \"flex-start\",\n              position: \"absolute\",\n              height: \"100%\",\n              width: \"100%\",\n              bottom: 0,\n              left: xPos,\n              zIndex: 0,\n            }}\n          >\n            <View\n              style={{\n                height: \"100%\",\n                width: \"70%\",\n                borderTopRightRadius: 3,\n              }}\n            >\n              <ProductListing\n                product={product}\n                // itemIndex={productIndex}\n                goBack={() => fadeOut()}\n              />\n            </View>\n          </Animated.View>\n          <Animated.View\n            style={{\n              height: \"100%\",\n              width: \"30%\",\n              padding: 20,\n              shadowColor: \"rgba(0,0,0,1)\",\n              shadowOffset: {\n                width: -3,\n                height: 3,\n              },\n              elevation: 30,\n              shadowOpacity: 0.5,\n              shadowRadius: 5,\n              position: \"absolute\",\n              opacity: shadowOpacity,\n              right: 0,\n              bottom: 0,\n            }}\n          />\n        </Modal>\n      )}\n    </TouchableOpacity>\n  );\n};\n\nconst Page3 = ({\n  storeDetails,\n  setorderDetails,\n  orderDetails,\n  setpage,\n  catalog,\n}) => {\n  const { height, width } = useWindowDimensions();\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const [currency, setCurrency] = useState(\"cad\"); // Default to CAD\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      // Stripe.js has not loaded yet.\n      return;\n    }\n\n    const cardElement = elements.getElement(\n      <CardElement options={{ hidePostalCode: true }} />\n    );\n\n    const { token, error } = await stripe.createToken(cardElement);\n\n    if (error) {\n      console.error(\"Error creating token:\", error);\n    } else {\n      console.log(\"Token:\", token);\n\n      // Send the token, amount, and currency to your Firebase Function to process the payment\n      const response = await fetch(\n        \"https://us-central1-posmate-5fc0a.cloudfunctions.net/processPayment\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            token: token.id,\n            amount: orderDetails.total,\n            currency,\n            storeUID: storeDetails.docID,\n            orderDetails: orderDetails,\n          }),\n        }\n      );\n\n      try {\n        const responseData = await response.json();\n\n        if (response.ok && responseData.success) {\n          console.log(\"Payment processed successfully!\");\n          setpage(4);\n        } else {\n          console.error(\n            \"Payment processing failed. Server message:\",\n            responseData.message\n          );\n        }\n      } catch (jsonError) {\n        console.error(\"Error parsing JSON response:\", jsonError);\n      }\n    }\n  };\n\n  return (\n    <View style={{ backgroundColor: \"white\", padding: 20 }}>\n      <Text>Details</Text>\n      <TextInput\n        style={styles({ height, width }).textInput}\n        placeholder=\"Name\"\n        value={orderDetails.customer.name}\n        onChangeText={(text) =>\n          setorderDetails({\n            ...orderDetails,\n            customer: { ...orderDetails.customer, name: text },\n          })\n        }\n      />\n      <TextInput\n        style={styles({ height, width }).textInput}\n        placeholder=\"Phone Number\"\n        value={orderDetails.customer.phone}\n        onChangeText={(text) =>\n          setorderDetails({\n            ...orderDetails,\n            customer: { ...orderDetails.customer, phone: text },\n          })\n        }\n      />\n      <TextInput\n        style={styles({ height, width }).textInput}\n        placeholder=\"Email\"\n        value={orderDetails.customer.email}\n        onChangeText={(text) =>\n          setorderDetails({\n            ...orderDetails,\n            customer: { ...orderDetails.customer, email: text },\n          })\n        }\n      />\n      <TextInput\n        style={styles({ height, width }).textInput}\n        placeholder=\"Notes\"\n        value={orderDetails.customer.note}\n        onChangeText={(text) =>\n          setorderDetails({\n            ...orderDetails,\n            customer: { ...orderDetails.customer, note: text },\n          })\n        }\n      />\n      <CardElement />\n      <TouchableOpacity\n        onPress={() => setpage(2)}\n        style={{\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n          marginTop: 20,\n        }}\n      >\n        <Text style={{ fontSize: 16 }}>Back</Text>\n      </TouchableOpacity>\n      <TouchableOpacity\n        onPress={handleSubmit}\n        disabled={!stripe}\n        style={{\n          padding: 20,\n          borderRadius: 10,\n          backgroundColor: \"rgba(255,255,255, 0.7)\",\n          borderWidth: 1,\n          marginBottom: 20,\n          marginTop: 20,\n        }}\n      >\n        <Text style={{ fontSize: 16 }}>Checkout</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst Page4 = () => {\n  return (\n    <View>\n      <Text>Thank you for your order</Text>\n    </View>\n  );\n};\n\nexport default OrderPage;\n\nconst styles = (props) =>\n  StyleSheet.create({\n    container: {\n      backgroundColor: \"white\",\n      height: \"100%\",\n      width: props.width * 0.7,\n      flexDirection: \"row\",\n    },\n    wrapper: {\n      flexDirection: \"row\",\n      flexWrap: \"wrap\",\n      justifyContent: \"space-between\",\n      paddingLeft: 50,\n      paddingRight: 50,\n    },\n    scrollview: {\n      width: \"100%\",\n    },\n    containerCart: {\n      height: \"100%\",\n      width: \"30%\",\n      padding: 20,\n      backgroundColor: \"rgba(31,35,48,1)\",\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      borderTopLeftRadius: 2,\n      borderBottomLeftRadius: 2,\n      shadowColor: \"rgba(0,0,0,1)\",\n      shadowOffset: {\n        width: -3,\n        height: 3,\n      },\n      elevation: 30,\n      shadowOpacity: 0.92,\n      shadowRadius: 5,\n    },\n    contentContainer: {\n      height: \"100%\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n    },\n    totalContainer: {\n      height: \"14%\",\n      paddingTop: 10,\n    },\n    cartHeader: {\n      height: \"6%\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      marginBottom: 20,\n    },\n    iconContainer: {\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      backgroundColor: \"rgba(41,44,56,1)\",\n      borderRadius: 15,\n      width: 50,\n      height: 50,\n      margin: 10,\n    },\n    cashButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0,\n      width: \"49.5%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    cardButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      borderTopRightRadius: 30,\n      borderBottomRightRadius: 30,\n      borderTopLeftRadius: 0,\n      borderBottomLeftRadius: 0,\n      width: \"49.5%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    btnTxt: {\n      fontSize: 20,\n      color: \"white\",\n    },\n    totalTxt: {\n      fontSize: 16,\n      marginBottom: 5,\n      color: \"rgba(255,255,255,1)\",\n      fontWeight: \"600\",\n    },\n    totalTxtPrice: {\n      fontSize: 16,\n      marginBottom: 5,\n      color: \"rgba(255,255,255,1)\",\n      fontWeight: \"600\",\n    },\n    bigButton: {\n      backgroundColor: \"rgba(51,81,243,1)\",\n      borderRadius: 30,\n      width: \"98%\",\n      height: 55,\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    innerTxt: {\n      fontSize: 13,\n      marginBottom: 10,\n    },\n    headerTxt: {\n      fontSize: 15,\n      fontWeight: \"600\",\n    },\n    empty: {\n      fontFamily: \"archivo-600\",\n      color: \"rgba(255,255,255,1)\",\n      fontSize: 20,\n      opacity: 0.44,\n      marginTop: 20,\n    },\n    fillTheCart: {\n      fontFamily: \"archivo-500\",\n      color: \"rgba(74,74,74,1)\",\n      fontSize: 20,\n    },\n    touchable: {\n      margin: 15,\n      width: 200,\n      height: 200,\n      backgroundColor: \"rgba(125,126,132,1)\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      borderRadius: 3,\n    },\n    textInput: {\n      backgroundColor: \"rgba(255,255,255,1)\",\n      borderRadius: 10,\n      padding: 10,\n      marginBottom: 10,\n    },\n  });\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}