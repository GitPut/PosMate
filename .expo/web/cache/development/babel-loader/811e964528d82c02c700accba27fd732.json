{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { storeDetailState, woocommerceState } from \"../../state/state\";\nimport { auth, db } from \"../../state/firebaseConfig\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar tz = require(\"moment-timezone\");\nvar ViewTransactions = function ViewTransactions() {\n  var wooCredentials = woocommerceState.use();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    transList = _useState2[0],\n    settransList = _useState2[1];\n  var today = new Date();\n  var _useState3 = useState({\n      todaysReceiptValue: 0,\n      todaysReceipts: 0\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    todaysDetails = _useState4[0],\n    setTodaysDetails = _useState4[1];\n  var storeDetails = storeDetailState.use();\n  useEffect(function () {\n    var local = [];\n    if (wooCredentials.useWoocommerce === true) {\n      try {\n        var WooCommerceAPI = require(\"woocommerce-api\");\n        var WooCommerce = new WooCommerceAPI({\n          url: wooCredentials.apiUrl,\n          consumerKey: wooCredentials.ck,\n          consumerSecret: wooCredentials.cs,\n          wpAPI: true,\n          version: \"wc/v1\"\n        });\n        var page = 1;\n        var orders = [];\n        var getOrders = function () {\n          var _ref = _asyncToGenerator(function* () {\n            var response = yield WooCommerce.getAsync(\"orders?page=\" + page + \"&per_page=100\");\n            var data = JSON.parse(response.body);\n            orders = [].concat(_toConsumableArray(orders), _toConsumableArray(data));\n            if (data.length === 100) {\n              page++;\n              getOrders();\n            } else {\n            }\n          });\n          return function getOrders() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n        getOrders().then(function () {\n          return local.concat(orders);\n        });\n      } catch (_unused) {\n        console.log(\"Something occured with woo\");\n      }\n    }\n    try {\n      var _auth$currentUser;\n      db.collection(\"users\").doc((_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid).collection(\"transList\").get().then(function (querySnapshot) {\n        querySnapshot.forEach(function (doc) {\n          settransList(function (prevState) {\n            return [].concat(_toConsumableArray(prevState), [doc.data()]);\n          });\n          local.push(doc.data());\n          console.log(doc.data());\n        });\n      });\n      if (local.length > 0) {\n        local.sort(function (a, b) {\n          if (a.date && b.date) {\n            return a.date.seconds - b.date.seconds;\n          } else if (a.date && b.date_created) {\n            var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            var newDateA = new Date(a.date.seconds * 1000);\n            var newDateB = new Date(b.date_created + \"Z\");\n            var resultA = tz(newDateA).tz(targetTimezone, true);\n            var resultB = tz(newDateB).tz(targetTimezone, true);\n            return resultA.valueOf() - resultB.valueOf();\n          } else if (a.date_created && b.date) {\n            var _targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            var _newDateA = new Date(a.date_created + \"Z\");\n            var _newDateB = new Date(b.date.seconds * 1000);\n            var _resultA = tz(_newDateA).tz(_targetTimezone, true);\n            var _resultB = tz(_newDateB).tz(_targetTimezone, true);\n            return _resultA.valueOf() - _resultB.valueOf();\n          } else {\n            var _targetTimezone2 = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            var _newDateA2 = new Date(a.date_created + \"Z\");\n            var _newDateB2 = new Date(b.date_created + \"Z\");\n            var _resultA2 = tz(_newDateA2).tz(_targetTimezone2, true);\n            var _resultB2 = tz(_newDateB2).tz(_targetTimezone2, true);\n            return _resultA2.valueOf() - _resultB2.valueOf();\n          }\n        }).reverse();\n        settransList(local);\n        var todaysReceiptValue = local.reduce(function (accumulator, current) {\n          var date;\n          var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            var localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            var _localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(_localDatePreConv).tz(targetTimezone, true);\n          }\n          var today = tz().tz(targetTimezone);\n          if (today.year() === date.year() && today.month() === date.month() && today.dayOfYear() === date.dayOfYear()) {\n            return accumulator + parseFloat(current.date ? current.total : current.total / 1.13);\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        var todaysReceipts = local.reduce(function (accumulator, current) {\n          var date;\n          var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            var localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            var _localDatePreConv2 = new Date(current.date_created + \"Z\");\n            date = tz(_localDatePreConv2).tz(targetTimezone, true);\n          }\n          var today = tz().tz(targetTimezone);\n          if (today.year() === date.year() && today.month() === date.month() && today.dayOfYear() === date.dayOfYear()) {\n            return accumulator + 1;\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        setTodaysDetails({\n          todaysReceiptValue: todaysReceiptValue.toFixed(2),\n          todaysReceipts: todaysReceipts\n        });\n      }\n    } catch (_unused2) {\n      console.log(\"Error Occured when sorting dates\");\n    }\n  }, []);\n  var PrintTodaysTotal = function PrintTodaysTotal() {\n    var data = [\"\\x1B\" + \"\\x40\",\n    \"\\x1B\" + \"\\x61\" + \"\\x31\",\n    storeDetails.name, \"\\x0A\", storeDetails.address + \"\\x0A\", storeDetails.website + \"\\x0A\",\n    storeDetails.phoneNumber + \"\\x0A\",\n    today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x1B\" + \"\\x61\" + \"\\x30\",\n    \"\\x0A\" + \"\\x0A\", \"Number Of Receipts: \" + todaysDetails.todaysReceipts + \"\\x0A\" + \"\\x0A\", \"Sub-Total: \" + \"$\" + (todaysDetails.todaysReceiptValue / 1.13).toFixed(2) + \"\\x0A\" + \"\\x0A\", \"Tax: \" + \"$\" + (todaysDetails.todaysReceiptValue / 1.13 * 0.13).toFixed(2) + \"\\x0A\" + \"\\x0A\", \"Total Including (13% Tax): \" + \"$\" + todaysDetails.todaysReceiptValue + \"\\x0A\" + \"\\x0A\", \"------------------------------------------\" + \"\\x0A\", \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x0A\",\n    \"\\x1D\" + \"\\x56\" + \"\\x30\"];\n    var qz = require(\"qz-tray\");\n    qz.websocket.connect().then(function () {\n      var config = qz.configs.create(storeDetails.comSelected);\n      return qz.print(config, data);\n    }).then(qz.websocket.disconnect).catch(function (err) {\n      console.error(err);\n    });\n\n  };\n\n  var CleanupOps = function CleanupOps(metaList) {\n    var opsArray = [];\n    metaList.forEach(function (op) {\n      var arrContaingMe = opsArray.filter(function (filterOp) {\n        return filterOp.key === op.key;\n      });\n      if (arrContaingMe.length > 0) {\n        opsArray.forEach(function (opsArrItem, index) {\n          if (opsArrItem.key === op.key) {\n            opsArray[index].vals.push(op.value);\n          }\n        });\n      } else {\n        opsArray.push({\n          key: op.key,\n          vals: [op.value]\n        });\n      }\n    });\n    return opsArray;\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: {\n        textAlign: \"center\",\n        margin: 25\n      },\n      children: \"List Of Transactions\"\n    }), _jsxs(View, {\n      style: {\n        flexDirection: \"row\",\n        width: \"100%\",\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: [_jsxs(Text, {\n        style: {\n          textAlign: \"center\",\n          margin: 25\n        },\n        children: [\"Todays Total Price: \", todaysDetails.todaysReceiptValue]\n      }), _jsx(Button, {\n        style: {\n          height: 40,\n          alignItems: \"center\",\n          justifyContent: \"center\"\n        },\n        title: \"Print Todays Receipts\",\n        onPress: PrintTodaysTotal\n      }), _jsxs(Text, {\n        style: {\n          textAlign: \"center\",\n          margin: 25\n        },\n        children: [\"Todays Total Receipts: \", todaysDetails.todaysReceipts]\n      })]\n    }), _jsx(View, {\n      style: styles.contentContainer,\n      children: transList ? transList == null ? void 0 : transList.map(function (element, index) {\n        var _element$cart, _element$line_items, _element$customer_not;\n        var date;\n        if (element.date_created) {\n          var dateString = element.date_created;\n          var newDate = new Date(dateString + \"Z\");\n          var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          var result = tz(newDate).tz(targetTimezone, true).format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n          date = result;\n        } else if (element.date) {\n          var _newDate = new Date(element.date.seconds * 1000);\n          var _targetTimezone3 = Intl.DateTimeFormat().resolvedOptions().timeZone;\n          var _result = tz(_newDate).tz(_targetTimezone3, true).format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n          date = _result;\n        }\n        return _jsxs(View, {\n          style: {\n            backgroundColor: \"grey\",\n            padding: 30,\n            margin: 10\n          },\n          children: [element.cart_hash && _jsx(Text, {\n            children: \"Online Order\"\n          }), _jsx(Text, {\n            children: date\n          }), (_element$cart = element.cart) == null ? void 0 : _element$cart.map(function (cartItem, index) {\n            var _cartItem$options;\n            return _jsxs(View, {\n              style: {\n                marginBottom: 20\n              },\n              children: [_jsxs(Text, {\n                children: [\"Name: \", cartItem.name]\n              }), _jsxs(Text, {\n                children: [\"Quantity: \", cartItem.quantity]\n              }), _jsxs(Text, {\n                children: [\"Price: \", cartItem.price]\n              }), cartItem.options && ((_cartItem$options = cartItem.options) == null ? void 0 : _cartItem$options.map(function (option) {\n                return _jsx(Text, {\n                  children: option\n                });\n              }))]\n            }, index);\n          }), (_element$line_items = element.line_items) == null ? void 0 : _element$line_items.map(function (cartItem, index) {\n            return _jsxs(View, {\n              style: {\n                marginBottom: 20\n              },\n              children: [_jsxs(Text, {\n                children: [\"Name: \", cartItem.name]\n              }), _jsxs(Text, {\n                children: [\"Quantity: \", cartItem.quantity]\n              }), _jsxs(Text, {\n                children: [\"Price: \", cartItem.price]\n              }), cartItem.meta && CleanupOps(cartItem.meta).map(function (returnedItem) {\n                return _jsxs(View, {\n                  style: {\n                    flexDirection: \"row\"\n                  },\n                  children: [_jsxs(Text, {\n                    children: [returnedItem.key, \" : \"]\n                  }), returnedItem.vals.map(function (val, index) {\n                    return _jsxs(Text, {\n                      children: [val, index >= 0 && index < returnedItem.vals.length - 1 && \", \"]\n                    });\n                  })]\n                });\n              })]\n            }, index);\n          }), element.billing && _jsxs(Text, {\n            children: [\"Phone Number: \", element.billing.phone]\n          }), ((_element$customer_not = element.customer_note) == null ? void 0 : _element$customer_not.length) > 0 && _jsxs(Text, {\n            children: [\"Customer Note: \", element.customer_note]\n          }), _jsx(Button, {\n            title: \"Print\",\n            onPress: function onPress() {\n              if (element.date) {\n                var _element$cart2;\n                var total = 0;\n                var data = [\"\\x1B\" + \"\\x40\",\n                \"\\x1B\" + \"\\x61\" + \"\\x31\",\n                storeDetails.name, \"\\x0A\", storeDetails.address + \"\\x0A\", storeDetails.website + \"\\x0A\",\n                storeDetails.phoneNumber + \"\\x0A\",\n                date.toLocaleDateString() + \" \" + date.toLocaleTimeString() + \"\\x0A\", \"\\x0A\", \"Transaction # \" + element.transNum + \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x1B\" + \"\\x61\" + \"\\x30\"];\n\n                (_element$cart2 = element.cart) == null ? void 0 : _element$cart2.map(function (cartItem) {\n                  total += parseFloat(cartItem.price);\n                  data.push(\"Name: \" + cartItem.name);\n                  data.push(\"\\x0A\");\n                  data.push(\"Price: $\" + cartItem.price);\n                  if (cartItem.options) {\n                    var _cartItem$options2;\n                    data.push(\"\\x0A\");\n                    (_cartItem$options2 = cartItem.options) == null ? void 0 : _cartItem$options2.map(function (option) {\n                      data.push(option);\n                      data.push(\"\\x0A\");\n                    });\n                  }\n                  data.push(\"\\x0A\" + \"\\x0A\");\n                });\n                total = total * 1.13;\n                total = total.toFixed(2);\n                if (element.billing) {\n                  data.push(\"Phone Number: \" + element.billing.phone);\n                  data.push(\"\\x0A\");\n                }\n                if (element.customer_note) {\n                  data.push(\"Customer Note: \" + element.customer_note);\n                  data.push(\"\\x0A\");\n                }\n\n                data.push(\"\\x0A\", \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\", \"\\x0A\" + \"\\x0A\", \"Total Including (13% Tax): \" + \"$\" + total + \"\\x0A\" + \"\\x0A\", \"------------------------------------------\" + \"\\x0A\", \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x1D\" + \"\\x56\" + \"\\x30\");\n                var qz = require(\"qz-tray\");\n                qz.websocket.connect().then(function () {\n                  var config = qz.configs.create(storeDetails.comSelected);\n                  return qz.print(config, data);\n                }).then(qz.websocket.disconnect).catch(function (err) {\n                  console.error(err);\n                });\n              } else {\n                var _element$line_items2;\n                var printData = [];\n                printData.push(\"\\x1B\" + \"\\x40\",\n                \"\\x1B\" + \"\\x61\" + \"\\x31\",\n                storeDetails.name, \"\\x0A\", storeDetails.address + \"\\x0A\", storeDetails.website + \"\\x0A\",\n                storeDetails.phoneNumber + \"\\x0A\",\n                date + \"\\x0A\", \"\\x0A\", \"Online Order\" + \"\\x0A\",\n                \"Transaction # \" + element.number + \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x1B\" + \"\\x61\" + \"\\x30\");\n\n                (_element$line_items2 = element.line_items) == null ? void 0 : _element$line_items2.map(function (cartItem) {\n                  printData.push(\"\\x0A\");\n                  printData.push(\"Name: \" + cartItem.name);\n                  printData.push(\"\\x0A\");\n                  printData.push(\"Quantity: \" + cartItem.quantity);\n                  printData.push(\"\\x0A\");\n                  printData.push(\"Price: $\" + cartItem.price);\n                  printData.push(\"\\x0A\");\n                  if (cartItem.meta) {\n                    var _cartItem$meta;\n                    (_cartItem$meta = cartItem.meta) == null ? void 0 : _cartItem$meta.map(function (meta, index) {\n                      if (index === 0) {\n                        printData.push(meta.key + \" : \" + meta.value);\n                        if (cartItem.meta[index + 1].key !== meta.key) {\n                          printData.push(\"\\x0A\");\n                        }\n                      } else {\n                        if (index !== cartItem.meta.length - 1) {\n                          if (cartItem.meta[index - 1].key === meta.key) {\n                            printData.push(\" , \" + meta.value);\n                          } else {\n                            printData.push(meta.key + \" : \" + meta.value);\n                          }\n                          if (cartItem.meta[index + 1].key !== meta.key) {\n                            printData.push(\"\\x0A\");\n                          }\n                        }\n                      }\n                    });\n                  } else {\n                    printData.push(\"\\x0A\" + \"\\x0A\");\n                  }\n                });\n                printData.push(\"\\x0A\");\n                printData.push(\"\\x0A\");\n                printData.push(\"Customer Details:\");\n                printData.push(\"\\x0A\");\n                printData.push(\"Address: \" + element.shipping.address_1);\n                printData.push(\"\\x0A\");\n                printData.push(\"City: \" + element.shipping.city);\n                printData.push(\"\\x0A\");\n                printData.push(\"Zip/Postal Code: \" + element.shipping.postcode);\n                printData.push(\"\\x0A\");\n                printData.push(\"Province/State: \" + element.shipping.state);\n                printData.push(\"\\x0A\");\n                printData.push(\"Name: \" + element.shipping.first_name + \" \" + element.shipping.last_name);\n                printData.push(\"\\x0A\");\n                element.shipping_lines.map(function (line) {\n                  return printData.push(\"Shipping Method: \" + line.method_title);\n                });\n                if (element.billing) {\n                  printData.push(\"Phone Number: \" + element.billing.phone);\n                  printData.push(\"\\x0A\");\n                }\n                if (element.customer_note) {\n                  printData.push(\"Customer Note: \" + element.customer_note);\n                  printData.push(\"\\x0A\");\n                }\n                printData.push(\"\\x0A\");\n                printData.push(\"\\x0A\");\n                printData.push(\"\\x0A\", \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\", \"\\x0A\" + \"\\x0A\", \"Payment Method: \" + element.payment_method_title + \"\\x0A\" + \"\\x0A\", \"Total Including (13% Tax): \" + \"$\" + element.total + \"\\x0A\" + \"\\x0A\", \"------------------------------------------\" + \"\\x0A\", \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\");\n\n                printData.push(\"\\x1D\" + \"\\x56\" + \"\\x00\");\n                var _qz = require(\"qz-tray\");\n                _qz.websocket.connect().then(function () {\n                  var config = _qz.configs.create(storeDetails.comSelected);\n                  return _qz.print(config, printData);\n                }).then(_qz.websocket.disconnect).catch(function (err) {\n                  console.error(err);\n                });\n\n              }\n            }\n          })]\n        }, index);\n      }) : _jsx(Text, {\n        children: \"No receipts yet\"\n      })\n    })]\n  });\n};\nexport default ViewTransactions;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\"\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","Button","Text","storeDetailState","woocommerceState","auth","db","tz","require","ViewTransactions","wooCredentials","use","transList","settransList","today","Date","todaysReceiptValue","todaysReceipts","todaysDetails","setTodaysDetails","storeDetails","local","useWoocommerce","WooCommerceAPI","WooCommerce","url","apiUrl","consumerKey","ck","consumerSecret","cs","wpAPI","version","page","orders","getOrders","response","getAsync","data","JSON","parse","body","length","then","concat","console","log","collection","doc","currentUser","uid","get","querySnapshot","forEach","prevState","push","sort","a","b","date","seconds","date_created","targetTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","newDateA","newDateB","resultA","resultB","valueOf","reverse","reduce","accumulator","current","localDatePreConv","year","month","dayOfYear","parseFloat","total","toFixed","PrintTodaysTotal","name","address","website","phoneNumber","toLocaleDateString","toLocaleTimeString","qz","websocket","connect","config","configs","create","comSelected","print","disconnect","catch","err","error","CleanupOps","metaList","opsArray","op","arrContaingMe","filter","filterOp","key","opsArrItem","index","vals","value","styles","container","textAlign","margin","flexDirection","width","alignItems","justifyContent","height","contentContainer","map","element","dateString","newDate","result","format","backgroundColor","padding","cart_hash","cart","cartItem","marginBottom","quantity","price","options","option","line_items","meta","returnedItem","val","billing","phone","customer_note","transNum","printData","number","shipping","address_1","city","postcode","state","first_name","last_name","shipping_lines","line","method_title","payment_method_title","StyleSheet","flex","flexWrap","paddingLeft","paddingRight","paddingBottom"],"sources":["/Users/peterputros/Desktop/PosMate/screens/authed/ViewTransactions.tsx"],"sourcesContent":["import { ScrollView, StyleSheet, View } from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport {\n  storeDetailState,\n  transListState,\n  woocommerceState,\n} from \"state/state\";\nimport { auth, db } from \"state/firebaseConfig\";\nconst tz = require(\"moment-timezone\");\n\nconst ViewTransactions = () => {\n  const wooCredentials = woocommerceState.use();\n  const [transList, settransList] = useState([]);\n  const today = new Date();\n  const [todaysDetails, setTodaysDetails] = useState({\n    todaysReceiptValue: 0,\n    todaysReceipts: 0,\n  });\n  const storeDetails = storeDetailState.use();\n\n  useEffect(() => {\n    let local = [];\n    if (wooCredentials.useWoocommerce === true) {\n      try {\n        const WooCommerceAPI = require(\"woocommerce-api\");\n\n        const WooCommerce = new WooCommerceAPI({\n          url: wooCredentials.apiUrl,\n          consumerKey: wooCredentials.ck,\n          consumerSecret: wooCredentials.cs,\n          wpAPI: true,\n          version: \"wc/v1\",\n        });\n\n        let page = 1;\n        let orders = [];\n\n        const getOrders = async () => {\n          const response = await WooCommerce.getAsync(\n            `orders?page=${page}&per_page=100`\n          );\n          const data = JSON.parse(response.body);\n          orders = [...orders, ...data];\n          if (data.length === 100) {\n            page++;\n            getOrders();\n          } else {\n            // console.log(orders);\n          }\n        };\n\n        getOrders().then(() => local.concat(orders));\n      } catch {\n        console.log(\"Something occured with woo\");\n      }\n    }\n\n    try {\n      db.collection(\"users\")\n        .doc(auth.currentUser?.uid)\n        .collection(\"transList\")\n        .get()\n        .then((querySnapshot) => {\n          querySnapshot.forEach((doc) => {\n            // doc.data() is never undefined for query doc snapshots\n            // console.log(doc.id, \" => \", doc.data());\n            settransList((prevState) => [...prevState, doc.data()]);\n            local.push(doc.data());\n            console.log(doc.data());\n          });\n        });\n      // console.log(\"Local: \", local);\n      // settransList(local);\n      if (local.length > 0) {\n        local\n          .sort(function (a, b) {\n            if (a.date && b.date) {\n              return a.date.seconds - b.date.seconds;\n            } else if (a.date && b.date_created) {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date.seconds * 1000);\n              const newDateB = new Date(b.date_created + \"Z\");\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            } else if (a.date_created && b.date) {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date_created + \"Z\");\n              const newDateB = new Date(b.date.seconds * 1000);\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            } else {\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const newDateA = new Date(a.date_created + \"Z\");\n              const newDateB = new Date(b.date_created + \"Z\");\n              const resultA = tz(newDateA).tz(targetTimezone, true);\n              const resultB = tz(newDateB).tz(targetTimezone, true);\n\n              return resultA.valueOf() - resultB.valueOf();\n            }\n          })\n          .reverse();\n        settransList(local);\n        const todaysReceiptValue = local.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return (\n              accumulator +\n              parseFloat(current.date ? current.total : current.total / 1.13)\n            );\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        const todaysReceipts = local.reduce((accumulator, current) => {\n          let date;\n          const targetTimezone =\n            Intl.DateTimeFormat().resolvedOptions().timeZone;\n          if (current.date) {\n            const localDatePreConv = new Date(current.date.seconds * 1000);\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          } else {\n            const localDatePreConv = new Date(current.date_created + \"Z\");\n            date = tz(localDatePreConv).tz(targetTimezone, true);\n          }\n          // Get the current date in the desired time zone\n          let today = tz().tz(targetTimezone);\n\n          if (\n            today.year() === date.year() &&\n            today.month() === date.month() &&\n            today.dayOfYear() === date.dayOfYear()\n          ) {\n            return accumulator + 1;\n          } else {\n            return accumulator;\n          }\n        }, 0);\n        setTodaysDetails({\n          todaysReceiptValue: todaysReceiptValue.toFixed(2),\n          todaysReceipts: todaysReceipts,\n        });\n      }\n    } catch {\n      console.log(\"Error Occured when sorting dates\");\n    }\n  }, []);\n\n  const PrintTodaysTotal = () => {\n    let data = [\n      \"\\x1B\" + \"\\x40\", // init\n      \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n      storeDetails.name,\n      \"\\x0A\",\n      storeDetails.address + \"\\x0A\",\n      storeDetails.website + \"\\x0A\", // text and line break\n      storeDetails.phoneNumber + \"\\x0A\", // text and line break\n      today.toLocaleDateString() + \" \" + today.toLocaleTimeString() + \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x0A\",\n      \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n      \"\\x0A\" + \"\\x0A\",\n      \"Number Of Receipts: \" + todaysDetails.todaysReceipts + \"\\x0A\" + \"\\x0A\",\n      \"Sub-Total: \" +\n        \"$\" +\n        (todaysDetails.todaysReceiptValue / 1.13).toFixed(2) +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"Tax: \" +\n        \"$\" +\n        ((todaysDetails.todaysReceiptValue / 1.13) * 0.13).toFixed(2) +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"Total Including (13% Tax): \" +\n        \"$\" +\n        todaysDetails.todaysReceiptValue +\n        \"\\x0A\" +\n        \"\\x0A\",\n      \"------------------------------------------\" + \"\\x0A\",\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x0A\", // line break\n      \"\\x1D\" + \"\\x56\" + \"\\x30\",\n    ];\n\n    const qz = require(\"qz-tray\");\n    qz.websocket\n      .connect()\n      .then(function () {\n        let config = qz.configs.create(storeDetails.comSelected);\n        return qz.print(config, data);\n      })\n      .then(qz.websocket.disconnect)\n      .catch(function (err) {\n        console.error(err);\n      });\n\n    // fetch(\"http://localhost:8080/print\", {\n    //   method: \"POST\",\n    //   headers: {\n    //     \"Content-Type\": \"application/json\",\n    //   },\n    //   body: JSON.stringify({\n    //     printData: data,\n    //     comSelected: storeDetails.comSelected,\n    //   }),\n    // })\n    //   .then((response) => response.json())\n    //   .then((respData) => {\n    //     console.log(respData);\n    //   })\n    //   .catch((e) => alert(\"Error with printer\"));\n  };\n\n  const CleanupOps = (metaList) => {\n    const opsArray = [];\n\n    metaList.forEach((op) => {\n      const arrContaingMe = opsArray.filter(\n        (filterOp) => filterOp.key === op.key\n      );\n\n      if (arrContaingMe.length > 0) {\n        opsArray.forEach((opsArrItem, index) => {\n          if (opsArrItem.key === op.key) {\n            opsArray[index].vals.push(op.value);\n          }\n        });\n      } else {\n        opsArray.push({ key: op.key, vals: [op.value] });\n      }\n    });\n    return opsArray;\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={{ textAlign: \"center\", margin: 25 }}>\n        List Of Transactions\n      </Text>\n      <View\n        style={{\n          flexDirection: \"row\",\n          width: \"100%\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <Text style={{ textAlign: \"center\", margin: 25 }}>\n          Todays Total Price: {todaysDetails.todaysReceiptValue}\n        </Text>\n        <Button\n          style={{ height: 40, alignItems: \"center\", justifyContent: \"center\" }}\n          title=\"Print Todays Receipts\"\n          onPress={PrintTodaysTotal}\n        />\n        <Text style={{ textAlign: \"center\", margin: 25 }}>\n          Todays Total Receipts: {todaysDetails.todaysReceipts}\n        </Text>\n      </View>\n      <View style={styles.contentContainer}>\n        {transList ? (\n          transList?.map((element, index) => {\n            let date;\n\n            if (element.date_created) {\n              const dateString = element.date_created;\n\n              const newDate = new Date(dateString + \"Z\");\n\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n              const result = tz(newDate)\n                .tz(targetTimezone, true)\n                .format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n\n              date = result;\n            } else if (element.date) {\n              const newDate = new Date(element.date.seconds * 1000);\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n              const result = tz(newDate)\n                .tz(targetTimezone, true)\n                .format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n\n              date = result;\n            }\n\n            return (\n              <View\n                style={{ backgroundColor: \"grey\", padding: 30, margin: 10 }}\n                key={index}\n              >\n                {element.cart_hash && <Text>Online Order</Text>}\n                <Text>{date}</Text>\n                {element.cart?.map((cartItem, index) => (\n                  <View style={{ marginBottom: 20 }} key={index}>\n                    <Text>Name: {cartItem.name}</Text>\n                    <Text>Quantity: {cartItem.quantity}</Text>\n                    <Text>Price: {cartItem.price}</Text>\n                    {cartItem.options &&\n                      cartItem.options?.map((option) => <Text>{option}</Text>)}\n                  </View>\n                ))}\n                {element.line_items?.map((cartItem, index) => (\n                  <View style={{ marginBottom: 20 }} key={index}>\n                    <Text>Name: {cartItem.name}</Text>\n                    <Text>Quantity: {cartItem.quantity}</Text>\n                    <Text>Price: {cartItem.price}</Text>\n                    {cartItem.meta &&\n                      CleanupOps(cartItem.meta).map((returnedItem) => (\n                        <View style={{ flexDirection: \"row\" }}>\n                          <Text>{returnedItem.key} : </Text>\n                          {returnedItem.vals.map((val, index) => (\n                            <Text>\n                              {val}\n                              {index >= 0 &&\n                                index < returnedItem.vals.length - 1 &&\n                                \", \"}\n                            </Text>\n                          ))}\n                        </View>\n                      ))}\n                  </View>\n                ))}\n                {element.billing && (\n                  <Text>Phone Number: {element.billing.phone}</Text>\n                )}\n                {element.customer_note?.length > 0 && (\n                  <Text>Customer Note: {element.customer_note}</Text>\n                )}\n                <Button\n                  title=\"Print\"\n                  onPress={() => {\n                    if (element.date) {\n                      let total = 0;\n\n                      let data = [\n                        \"\\x1B\" + \"\\x40\", // init\n                        \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n                        storeDetails.name,\n                        \"\\x0A\",\n                        storeDetails.address + \"\\x0A\",\n                        storeDetails.website + \"\\x0A\", // text and line break\n                        storeDetails.phoneNumber + \"\\x0A\", // text and line break\n                        date.toLocaleDateString() +\n                          \" \" +\n                          date.toLocaleTimeString() +\n                          \"\\x0A\",\n                        \"\\x0A\",\n                        `Transaction # ${element.transNum}` + \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x1B\" + \"\\x61\" + \"\\x30\", // left align\n                      ];\n\n                      element.cart?.map((cartItem) => {\n                        total += parseFloat(cartItem.price);\n                        data.push(`Name: ${cartItem.name}`);\n                        data.push(\"\\x0A\");\n                        data.push(`Price: $${cartItem.price}`);\n\n                        if (cartItem.options) {\n                          data.push(\"\\x0A\");\n                          cartItem.options?.map((option) => {\n                            data.push(option);\n                            data.push(\"\\x0A\");\n                          });\n                        }\n                        data.push(\"\\x0A\" + \"\\x0A\");\n                      });\n\n                      total = total * 1.13;\n                      total = total.toFixed(2);\n\n                      if (element.billing) {\n                        data.push(`Phone Number: ${element.billing.phone}`);\n                        data.push(\"\\x0A\");\n                      }\n\n                      if (element.customer_note) {\n                        data.push(`Customer Note: ${element.customer_note}`);\n                        data.push(\"\\x0A\");\n                      }\n\n                      //push ending\n                      data.push(\n                        \"\\x0A\",\n                        \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n                        \"\\x0A\" + \"\\x0A\",\n                        \"Total Including (13% Tax): \" +\n                          \"$\" +\n                          total +\n                          \"\\x0A\" +\n                          \"\\x0A\",\n                        \"------------------------------------------\" + \"\\x0A\",\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        //\"\\x1D\" + \"\\x56\" + \"\\x00\",\n                        \"\\x1D\" + \"\\x56\" + \"\\x30\"\n                      );\n\n                      const qz = require(\"qz-tray\");\n                      qz.websocket\n                        .connect()\n                        .then(function () {\n                          let config = qz.configs.create(\n                            storeDetails.comSelected\n                          );\n                          return qz.print(config, data);\n                        })\n                        .then(qz.websocket.disconnect)\n                        .catch(function (err) {\n                          console.error(err);\n                        });\n                      // fetch(\"http://localhost:8080/print\", {\n                      //   method: \"POST\",\n                      //   headers: {\n                      //     \"Content-Type\": \"application/json\",\n                      //   },\n                      //   body: JSON.stringify({\n                      //     printData: data,\n                      //     comSelected: storeDetails.comSelected,\n                      //   }),\n                      // })\n                      //   .then((response) => response.json())\n                      //   .then((respData) => {\n                      //     console.log(respData);\n                      //   })\n                      //   .catch((e) => alert(\"Error with printer\"));\n                    } else {\n                      const printData = [];\n\n                      printData.push(\n                        \"\\x1B\" + \"\\x40\", // init\n                        \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n                        storeDetails.name,\n                        \"\\x0A\",\n                        storeDetails.address + \"\\x0A\",\n                        storeDetails.website + \"\\x0A\", // text and line break\n                        storeDetails.phoneNumber + \"\\x0A\", // text and line break\n                        date + \"\\x0A\",\n                        \"\\x0A\",\n                        \"Online Order\" + \"\\x0A\", // text and line break\n                        `Transaction # ${element.number}` + \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x0A\",\n                        \"\\x1B\" + \"\\x61\" + \"\\x30\" // left align\n                      );\n\n                      element.line_items?.map((cartItem) => {\n                        printData.push(\"\\x0A\");\n                        printData.push(`Name: ${cartItem.name}`);\n                        printData.push(\"\\x0A\");\n                        printData.push(`Quantity: ${cartItem.quantity}`);\n                        printData.push(\"\\x0A\");\n                        printData.push(`Price: $${cartItem.price}`);\n                        printData.push(\"\\x0A\");\n\n                        if (cartItem.meta) {\n                          cartItem.meta?.map((meta, index) => {\n                            if (index === 0) {\n                              printData.push(`${meta.key} : ${meta.value}`);\n                              if (cartItem.meta[index + 1].key !== meta.key) {\n                                printData.push(\"\\x0A\");\n                              }\n                            } else {\n                              if (index !== cartItem.meta.length - 1) {\n                                if (cartItem.meta[index - 1].key === meta.key) {\n                                  printData.push(` , ${meta.value}`);\n                                } else {\n                                  printData.push(`${meta.key} : ${meta.value}`);\n                                }\n\n                                if (cartItem.meta[index + 1].key !== meta.key) {\n                                  printData.push(\"\\x0A\");\n                                }\n                              }\n                            }\n                          });\n                        } else {\n                          printData.push(\"\\x0A\" + \"\\x0A\");\n                        }\n                      });\n\n                      printData.push(\"\\x0A\");\n                      printData.push(\"\\x0A\");\n                      printData.push(`Customer Details:`);\n                      printData.push(\"\\x0A\");\n                      printData.push(`Address: ${element.shipping.address_1}`);\n                      printData.push(\"\\x0A\");\n                      printData.push(`City: ${element.shipping.city}`);\n                      printData.push(\"\\x0A\");\n                      printData.push(\n                        `Zip/Postal Code: ${element.shipping.postcode}`\n                      );\n                      printData.push(\"\\x0A\");\n                      printData.push(\n                        `Province/State: ${element.shipping.state}`\n                      );\n                      printData.push(\"\\x0A\");\n                      printData.push(\n                        `Name: ${element.shipping.first_name} ${element.shipping.last_name}`\n                      );\n                      printData.push(\"\\x0A\");\n                      element.shipping_lines.map((line) =>\n                        printData.push(`Shipping Method: ${line.method_title}`)\n                      );\n                      if (element.billing) {\n                        printData.push(\n                          `Phone Number: ${element.billing.phone}`\n                        );\n                        printData.push(\"\\x0A\");\n                      }\n                      if (element.customer_note) {\n                        printData.push(\n                          `Customer Note: ${element.customer_note}`\n                        );\n                        printData.push(\"\\x0A\");\n                      }\n                      printData.push(\"\\x0A\");\n                      printData.push(\"\\x0A\");\n\n                      printData.push(\n                        \"\\x0A\",\n                        \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n                        \"\\x0A\" + \"\\x0A\",\n                        \"Payment Method: \" +\n                          element.payment_method_title +\n                          \"\\x0A\" +\n                          \"\\x0A\",\n                        \"Total Including (13% Tax): \" +\n                          \"$\" +\n                          element.total +\n                          \"\\x0A\" +\n                          \"\\x0A\",\n                        \"------------------------------------------\" + \"\\x0A\",\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\", // line break\n                        \"\\x0A\" // line break\n                      );\n\n                      printData.push(\"\\x1D\" + \"\\x56\" + \"\\x00\");\n\n                      const qz = require(\"qz-tray\");\n                      qz.websocket\n                        .connect()\n                        .then(function () {\n                          let config = qz.configs.create(\n                            storeDetails.comSelected\n                          );\n                          return qz.print(config, printData);\n                        })\n                        .then(qz.websocket.disconnect)\n                        .catch(function (err) {\n                          console.error(err);\n                        });\n\n                      // fetch(\"http://localhost:8080/print\", {\n                      //   method: \"POST\",\n                      //   headers: {\n                      //     \"Content-Type\": \"application/json\",\n                      //   },\n                      //   body: JSON.stringify({\n                      //     printData: printData,\n                      //     comSelected: storeDetails.comSelected,\n                      //   }),\n                      // })\n                      //   .then((response) => response.json())\n                      //   .then((respData) => {\n                      //     console.log(respData);\n                      //   })\n                      //   .catch((e) => alert(\"Error with printer\"));\n                    }\n                  }}\n                />\n              </View>\n            );\n          })\n        ) : (\n          <Text>No receipts yet</Text>\n        )}\n      </View>\n    </View>\n  );\n};\n\nexport default ViewTransactions;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}