{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { transListState } from \"../state/state\";\nimport { updateTransList } from \"../state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CompletePaymentPhoneOrder = function CompletePaymentPhoneOrder() {\n  var transList = transListState.use();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    changeModal = _useState2[0],\n    setChangeModal = _useState2[1];\n  var _useState3 = useState({\n      element: null,\n      index: null\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentOrder = _useState4[0],\n    setcurrentOrder = _useState4[1];\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: {\n        textAlign: \"center\",\n        margin: 25\n      },\n      children: \"Current Open Orders\"\n    }), _jsx(View, {\n      style: styles.contentContainer,\n      children: transList ? transList == null ? void 0 : transList.map(function (element, index) {\n        var _element$id, _element$id2;\n        if (((_element$id = element.id) == null ? void 0 : _element$id.substr(((_element$id2 = element.id) == null ? void 0 : _element$id2.length) - 2, 2)) === \"-l\" && element.completed === false && element.cancelled !== true) {\n          var _element$cart, _element$line_items, _element$customer, _element$customer2, _element$customer3;\n          var date = element.date ? new Date(element.date.seconds * 1000) : element.date_created ? new Date(element.date_created) : null;\n          return _jsxs(View, {\n            style: {\n              backgroundColor: \"grey\",\n              padding: 30,\n              margin: 10\n            },\n            children: [_jsx(Text, {\n              children: date.toLocaleString()\n            }), (_element$cart = element.cart) == null ? void 0 : _element$cart.map(function (cartItem, index) {\n              var _cartItem$options;\n              return _jsxs(View, {\n                style: {\n                  marginBottom: 20\n                },\n                children: [_jsxs(Text, {\n                  children: [\"Name: \", cartItem.name]\n                }), _jsxs(Text, {\n                  children: [\"Quantity: \", cartItem.quantity]\n                }), _jsxs(Text, {\n                  children: [\"Price: \", cartItem.price]\n                }), cartItem.options && ((_cartItem$options = cartItem.options) == null ? void 0 : _cartItem$options.map(function (option) {\n                  return _jsx(Text, {\n                    children: option\n                  });\n                }))]\n              }, index);\n            }), (_element$line_items = element.line_items) == null ? void 0 : _element$line_items.map(function (cartItem, index) {\n              var _cartItem$meta_data;\n              return _jsxs(View, {\n                style: {\n                  marginBottom: 20\n                },\n                children: [_jsxs(Text, {\n                  children: [\"Name: \", cartItem.name]\n                }), _jsxs(Text, {\n                  children: [\"Quantity: \", cartItem.quantity]\n                }), _jsxs(Text, {\n                  children: [\"Price: \", cartItem.price]\n                }), (_cartItem$meta_data = cartItem.meta_data) == null ? void 0 : _cartItem$meta_data.map(function (meta, index) {\n                  if (index === cartItem.meta_data.length - 1) return;\n                  return _jsx(Text, {\n                    children: meta.key + \" : \" + meta.value\n                  });\n                })]\n              }, index);\n            }), _jsx(Text, {\n              children: (_element$customer = element.customer) == null ? void 0 : _element$customer.name\n            }), _jsx(Text, {\n              children: (_element$customer2 = element.customer) == null ? void 0 : _element$customer2.phone\n            }), _jsx(Text, {\n              children: (_element$customer3 = element.customer) == null ? void 0 : _element$customer3.address\n            }), _jsxs(Text, {\n              children: [\"Method:\", \" \", element.method === \"pickupOrder\" ? \"Pick Up\" : \"Delivery\"]\n            }), _jsx(Button, {\n              title: \"Complete Order\",\n              onPress: function onPress() {\n                if (element.method === \"pickupOrder\") {\n                  setcurrentOrder(element);\n                } else {\n                  var localChange = structuredClone(transList);\n                  transList[index].completed = true;\n                  updateTransList(localChange);\n                }\n              },\n              style: {\n                marginBottom: 10\n              }\n            }), _jsx(Button, {\n              title: \"Cancel Order\",\n              onPress: function onPress() {\n                var localChange = structuredClone(transList);\n                localChange[index].cancelled = true;\n                updateTransList(localChange);\n              }\n            })]\n          }, index);\n        }\n      }) : _jsx(Text, {\n        children: \"No Orders Yet\"\n      })\n    }), _jsx(Modal, {\n      visible: changeModal,\n      children: _jsx(ChangeScreen, {\n        setChangeModal: setChangeModal,\n        order: currentOrder,\n        completeOrder: function completeOrder() {\n          var localChange = structuredClone(transList);\n          localChange[index].completed = true;\n          updateTransList(localChange);\n          setChangeModal(false);\n        }\n      })\n    })]\n  });\n};\nexport default CompletePaymentPhoneOrder;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\"\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useState","Button","Text","transListState","updateTransList","ChangeScreen","CompletePaymentPhoneOrder","transList","use","changeModal","setChangeModal","element","index","currentOrder","setcurrentOrder","styles","container","textAlign","margin","contentContainer","map","id","substr","length","completed","cancelled","date","Date","seconds","date_created","backgroundColor","padding","toLocaleString","cart","cartItem","marginBottom","name","quantity","price","options","option","line_items","meta_data","meta","key","value","customer","phone","address","method","localChange","structuredClone","StyleSheet","create","flex","height","flexDirection","flexWrap","justifyContent","paddingLeft","paddingRight","paddingBottom","width","alignItems"],"sources":["/Users/peterputros/Desktop/PosMate-1/components/CompletePaymentPhoneOrder.tsx"],"sourcesContent":["import { Modal, ScrollView, StyleSheet, View } from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { storeDetailState, transListState } from \"state/state\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\n\nconst CompletePaymentPhoneOrder = () => {\n    const transList = transListState.use();\n    const [changeModal, setChangeModal] = useState(false);\n    const [currentOrder, setcurrentOrder] = useState({element: null, index: null})\n\n  return (\n    <View style={styles.container}>\n      <Text style={{ textAlign: \"center\", margin: 25 }}>\n        Current Open Orders\n      </Text>\n      <View style={styles.contentContainer}>\n        {transList ? (\n          transList?.map((element, index) => {\n            if (\n              element.id?.substr(element.id?.length - 2, 2) === \"-l\" &&\n              element.completed === false &&\n              element.cancelled !== true\n            ) {\n              const date = element.date\n                ? new Date(element.date.seconds * 1000)\n                : element.date_created\n                ? new Date(element.date_created)\n                : null;\n\n              return (\n                <View\n                  style={{\n                    backgroundColor: \"grey\",\n                    padding: 30,\n                    margin: 10,\n                  }}\n                  key={index}\n                >\n                  <Text>{date.toLocaleString()}</Text>\n                  {element.cart?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.options &&\n                        cartItem.options?.map((option) => (\n                          <Text>{option}</Text>\n                        ))}\n                    </View>\n                  ))}\n                  {element.line_items?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.meta_data?.map((meta, index) => {\n                        if (index === cartItem.meta_data.length - 1) return;\n                        return <Text>{`${meta.key} : ${meta.value}`}</Text>;\n                      })}\n                    </View>\n                  ))}\n                  <Text>{element.customer?.name}</Text>\n                  <Text>{element.customer?.phone}</Text>\n                  <Text>{element.customer?.address}</Text>\n                  <Text>\n                    Method:{\" \"}\n                    {element.method === \"pickupOrder\" ? \"Pick Up\" : \"Delivery\"}\n                  </Text>\n                  <Button\n                    title=\"Complete Order\"\n                    onPress={() => {\n                      if (element.method === \"pickupOrder\") {\n                        setcurrentOrder(element);\n                      } else {\n                        const localChange = structuredClone(transList);\n                        transList[index].completed = true;\n                        updateTransList(localChange);\n                      }\n                    }}\n                    style={{ marginBottom: 10 }}\n                  />\n                  <Button\n                    title=\"Cancel Order\"\n                    onPress={() => {\n                      const localChange = structuredClone(transList);\n                      localChange[index].cancelled = true;\n                      updateTransList(localChange);\n                    }}\n                  />\n                </View>\n              );\n            }\n          })\n        ) : (\n          <Text>No Orders Yet</Text>\n        )}\n      </View>\n      <Modal visible={changeModal}>\n        <ChangeScreen\n          setChangeModal={setChangeModal}\n          order={currentOrder}\n          completeOrder={() => {\n            const localChange = structuredClone(transList);\n            localChange[index].completed = true;\n            updateTransList(localChange);\n            setChangeModal(false);\n          }}\n        />\n      </Modal>\n    </View>\n  );\n};\n\nexport default CompletePaymentPhoneOrder;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}