{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useState } from \"react\";\nimport { GooglePlacesAutocomplete } from \"react-native-google-places-autocomplete\";\nimport RouteSliderScreen from \"./RouteSliderScreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar GOOGLE_API_KEY = \"AIzaSyB5l-wEA7ueMuvdHqVZK8ZD7-1yMLV076M\";\nvar App = function App() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    listOfAddresses = _useState2[0],\n    setlistOfAddresses = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    finalList = _useState4[0],\n    setfinalList = _useState4[1];\n  var GooglePlacesInput = function GooglePlacesInput(_ref) {\n    var placeholder = _ref.placeholder;\n    return _jsx(GooglePlacesAutocomplete, {\n      placeholder: placeholder,\n      fetchDetails: true,\n      onPress: function onPress(data, details) {\n        setlistOfAddresses([].concat(_toConsumableArray(listOfAddresses), [details]));\n      },\n      query: {\n        key: GOOGLE_API_KEY,\n        language: \"en\"\n      },\n      textInputProps: {\n        style: {\n          height: 40,\n          width: \"50%\",\n          padding: 10,\n          fontSize: 15,\n          borderWidth: 2,\n          borderRadius: 6,\n          margin: 10\n        }\n      },\n      requestUrl: {\n        useOnPlatform: \"web\",\n        url: \"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api\"\n      }\n    });\n  };\n\n  var DistanceMatrix = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var localFinalList = [listOfAddresses[0]];\n      var localListOfAddresses = listOfAddresses;\n      console.log(\"List of Adds: \", listOfAddresses);\n      var myObject = listOfAddresses[0];\n      var _loop = function _loop(index) {\n        var dis = function dis(d) {\n          return Math.pow(d.geometry.location.lat, 2) + Math.pow(d.geometry.location.lng, 2);\n        };\n        localListOfAddresses.splice(localListOfAddresses.indexOf(myObject), 1);\n        var closest = localListOfAddresses.reduce(function (a, b) {\n          console.log(\"a: \", a, \" b: \", b, \" myObject: \", myObject);\n          return Math.abs(dis(b) - dis(myObject)) < Math.abs(dis(a) - dis(myObject)) ? b : a;\n        });\n        myObject = closest;\n        localFinalList.push(closest);\n      };\n      for (var index = 0; index < listOfAddresses.length + 1; index++) {\n        _loop(index);\n      }\n      setfinalList(localFinalList);\n\n    });\n    return function DistanceMatrix() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsx(SafeAreaView, {\n    style: {\n      flex: 1\n    },\n    children: _jsx(View, {\n      style: {\n        flex: 1,\n        alignItems: \"center\",\n        justifyContent: \"center\"\n      },\n      children: finalList.length < 1 ? _jsxs(View, {\n        children: [_jsx(Text, {\n          children: \"Get The Best Route List\"\n        }), listOfAddresses.length < 1 ? _jsx(GooglePlacesInput, {\n          placeholder: \"Start Address\"\n        }) : _jsxs(View, {\n          children: [_jsx(GooglePlacesInput, {\n            placeholder: \"Enter Next Stop\"\n          }), listOfAddresses.length > 2 && _jsx(Button, {\n            title: \"Go\",\n            onPress: DistanceMatrix\n          })]\n        })]\n      }) : _jsx(RouteSliderScreen, {\n        finalList: finalList\n      })\n    })\n  });\n};\nexport default App;\nvar styles = StyleSheet.create({});","map":{"version":3,"names":["React","useState","GooglePlacesAutocomplete","RouteSliderScreen","GOOGLE_API_KEY","App","listOfAddresses","setlistOfAddresses","finalList","setfinalList","GooglePlacesInput","placeholder","data","details","key","language","style","height","width","padding","fontSize","borderWidth","borderRadius","margin","useOnPlatform","url","DistanceMatrix","localFinalList","localListOfAddresses","console","log","myObject","index","dis","d","Math","pow","geometry","location","lat","lng","splice","indexOf","closest","reduce","a","b","abs","push","length","flex","alignItems","justifyContent","styles","StyleSheet","create"],"sources":["/Users/peterputros/Desktop/best-route/App.tsx"],"sourcesContent":["import {\n  Button,\n  SafeAreaView,\n  StyleSheet,\n  Text,\n  TextInput,\n  View,\n} from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { GooglePlacesAutocomplete } from \"react-native-google-places-autocomplete\";\nimport RouteSliderScreen from \"./RouteSliderScreen\";\n\nconst GOOGLE_API_KEY = \"AIzaSyB5l-wEA7ueMuvdHqVZK8ZD7-1yMLV076M\";\n\nconst App = () => {\n  const [listOfAddresses, setlistOfAddresses] = useState([]);\n  const [finalList, setfinalList] = useState([]);\n\n  const GooglePlacesInput = ({ placeholder }) => {\n    return (\n      <GooglePlacesAutocomplete\n        placeholder={placeholder}\n        fetchDetails={true}\n        onPress={(data, details) => {\n          setlistOfAddresses([...listOfAddresses, details]);\n        }}\n        query={{\n          key: GOOGLE_API_KEY,\n          language: \"en\",\n        }}\n        textInputProps={{\n          style: {\n            height: 40,\n            width: \"50%\",\n            padding: 10,\n            fontSize: 15,\n            borderWidth: 2,\n            borderRadius: 6,\n            margin: 10,\n          },\n        }}\n        requestUrl={{\n          useOnPlatform: \"web\", // or \"all\"\n          url: \"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api\", // or any proxy server that hits https://maps.googleapis.com/maps/api\n          // headers: {\n          //   Authorization: `an auth token`, // if required for your proxy\n          // },\n        }}\n      />\n    );\n  };\n\n  const DistanceMatrix = async () => {\n    const localFinalList = [listOfAddresses[0]];\n    const localListOfAddresses = listOfAddresses;\n    console.log(\"List of Adds: \", listOfAddresses);\n\n    let myObject = listOfAddresses[0];\n\n    for (let index = 0; index < listOfAddresses.length + 1; index++) {\n      const dis = (d) =>\n        Math.pow(d.geometry.location.lat, 2) +\n        Math.pow(d.geometry.location.lng, 2);\n\n      localListOfAddresses.splice(localListOfAddresses.indexOf(myObject), 1);\n\n      const closest = localListOfAddresses.reduce((a, b) => {\n        console.log(\"a: \", a, \" b: \", b, \" myObject: \", myObject);\n\n        return Math.abs(dis(b) - dis(myObject)) <\n          Math.abs(dis(a) - dis(myObject))\n          ? b\n          : a;\n      });\n\n      myObject = closest;\n      localFinalList.push(closest);\n    }\n    setfinalList(localFinalList);\n\n    //     let unorganizedList = []\n    // for (let index = 1; index <= listOfAddresses.length; index++) {\n    //   const element = listOfAddresses[index];\n    //   for (let index = 1; index < listOfAddresses.length; index++) {\n    //   const element = listOfAddresses[index];\n    //   await fetch(\n    //     `https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/distancematrix/json?origins=${listOfAddresses[0].geometry.location.lat},${listOfAddresses[0].geometry.location.lng}&destinations=${element.geometry.location.lat},${element.geometry.location.lng}&key=${GOOGLE_API_KEY}`\n    //   )\n    //     .then((response) => response.json())\n    //     .then((responseJson) => {\n    //       //TIME BETWEEN START AND POINT this.rows[0].elements[0].duration\n    // unorganizedList.push({\n    //   address: element.formatted_address,\n    //   timeDistance: responseJson.rows[0].elements[0].duration.value,\n    // });\n    //     });\n    // }\n  };\n\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      <View style={{ flex: 1, alignItems: \"center\", justifyContent: \"center\" }}>\n        {finalList.length < 1 ? (\n          <View>\n            <Text>Get The Best Route List</Text>\n            {listOfAddresses.length < 1 ? (\n              <GooglePlacesInput placeholder=\"Start Address\" />\n            ) : (\n              <View>\n                <GooglePlacesInput placeholder=\"Enter Next Stop\" />\n                {listOfAddresses.length > 2 && (\n                  <Button title=\"Go\" onPress={DistanceMatrix} />\n                )}\n              </View>\n            )}\n          </View>\n        ) : (\n          <RouteSliderScreen finalList={finalList} />\n        )}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nexport default App;\n\nconst styles = StyleSheet.create({});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}