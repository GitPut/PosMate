{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useRef, useState } from \"react\";\nimport { setUserStoreState, trialDetailsState, userState } from \"../state/state\";\nvar tz = require(\"moment-timezone\");\nimport NewUserPayment from \"../screens/authed/NewUserPayment\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"../components/TrialEnded\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RouteManagerNew = function RouteManagerNew() {\n  var savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  var isTutorialCompleteLocal = JSON.parse(localStorage.getItem(\"tutorialComplete\") || null);\n  var userS = userState.use();\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setloading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isNewUser = _useState4[0],\n    setisNewUser = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isSubscribed = _useState6[0],\n    setisSubscribed = _useState6[1];\n  var fadeAnim = useRef(new Animated.Value(1)).current;\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    viewVisible = _useState8[0],\n    setviewVisible = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isCanceled = _useState10[0],\n    setisCanceled = _useState10[1];\n  var trialDetails = trialDetailsState.use();\n  var _Font$useFonts = Font.useFonts({\n      \"archivo-600\": require(\"../assets/fonts/Archivo-SemiBold.ttf\"),\n      \"archivo-500\": require(\"../assets/fonts/Archivo-Regular.ttf\")\n    }),\n    _Font$useFonts2 = _slicedToArray(_Font$useFonts, 1),\n    fontsLoaded = _Font$useFonts2[0];\n  var UpdateStoreStateDataPictures = function () {\n    var _ref2 = _asyncToGenerator(function* (_ref) {\n      var products = _ref.products,\n        categories = _ref.categories;\n      setUserStoreState({\n        categories: categories,\n        products: products\n      });\n    });\n    return function UpdateStoreStateDataPictures(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fadeIn = function fadeIn() {\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false\n    }).start();\n  };\n  var fadeOut = function fadeOut() {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false\n    }).start(function () {\n      return setviewVisible(false);\n    });\n  };\n  var resetLoader = function resetLoader() {\n    setviewVisible(true);\n    fadeIn();\n  };\n  var NavigationContent = function NavigationContent() {\n    return _jsxs(_Fragment, {\n      children: [isSubscribed && _jsx(Route, {\n        path: \"/\",\n        component: AuthRoute\n      }), trialDetails.hasEnded && _jsx(TrialEnded, {\n        resetLoader: resetLoader\n      }), isNewUser && _jsx(NewUserPayment, {\n        resetLoader: resetLoader\n      })]\n    });\n  };\n  return _jsx(Router, {\n    children: _jsxs(Switch, {\n      children: [userS && _jsxs(_Fragment, {\n        children: [_jsx(NavigationContent, {}), viewVisible && _jsx(Animated.View, {\n          style: {\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            backgroundColor: \"white\",\n            position: \"absolute\",\n            opacity: fadeAnim,\n            height: \"100%\",\n            width: \"100%\"\n          },\n          children: _jsx(Image, {\n            source: require(\"../assets/loading.gif\"),\n            style: {\n              width: 450,\n              height: 450,\n              resizeMode: \"contain\"\n            }\n          })\n        })]\n      }), !userS && !loading && _jsx(Route, {\n        path: \"/\",\n        component: NonAuthRoute\n      })]\n    })\n  });\n};\nexport default RouteManagerNew;","map":{"version":3,"names":["React","useRef","useState","setUserStoreState","trialDetailsState","userState","tz","require","NewUserPayment","Font","TrialEnded","BrowserRouter","Router","Route","Switch","AuthRoute","NonAuthRoute","RouteManagerNew","savedUserState","JSON","parse","localStorage","getItem","isTutorialCompleteLocal","userS","use","loading","setloading","isNewUser","setisNewUser","isSubscribed","setisSubscribed","fadeAnim","Animated","Value","current","viewVisible","setviewVisible","isCanceled","setisCanceled","trialDetails","useFonts","fontsLoaded","UpdateStoreStateDataPictures","products","categories","fadeIn","timing","toValue","duration","useNativeDriver","start","fadeOut","resetLoader","NavigationContent","hasEnded","alignItems","justifyContent","backgroundColor","position","opacity","height","width","resizeMode"],"sources":["/Users/peterputros/Desktop/PosMate/navigation/RouteManagerNew.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport {\n  setStoreDetailState,\n  setTrialDetailsState,\n  setTutorialDetailsState,\n  setUserState,\n  setUserStoreState,\n  setWoocommerceState,\n  storeDetailState,\n  trialDetailsState,\n  tutorialDetailsState,\n  userState,\n  woocommerceState,\n} from \"state/state\";\nimport { auth, db, storage } from \"state/firebaseConfig\";\nimport { updateFreeTrial } from \"state/firebaseFunctions\";\nconst tz = require(\"moment-timezone\");\nimport useSound from \"use-sound\";\nimport mySound from \"assets/alarm.mp3\";\nimport PlanUpdateTest from \"screens/authed/PlanUpdateTest\";\nimport NewUserPayment from \"screens/authed/NewUserPayment\";\nimport { Animated, Image, Modal, Text, View } from \"react-native\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"components/TrialEnded\";\n\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\n\nconst RouteManagerNew = () => {\n  const savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  const isTutorialCompleteLocal = JSON.parse(\n    localStorage.getItem(\"tutorialComplete\") || null\n  );\n  const userS = userState.use();\n  const [loading, setloading] = useState(true);\n  const [isNewUser, setisNewUser] = useState(null);\n  const [isSubscribed, setisSubscribed] = useState(null);\n  const fadeAnim = useRef(new Animated.Value(1)).current;\n  const [viewVisible, setviewVisible] = useState(true);\n  const [isCanceled, setisCanceled] = useState(null);\n  const trialDetails = trialDetailsState.use();\n\n  const [fontsLoaded] = Font.useFonts({\n    \"archivo-600\": require(\"assets/fonts/Archivo-SemiBold.ttf\"),\n    \"archivo-500\": require(\"assets/fonts/Archivo-Regular.ttf\"),\n  });\n\n  const UpdateStoreStateDataPictures = async ({ products, categories }) => {\n    setUserStoreState({ categories: categories, products: products });\n  };\n\n\n  const fadeIn = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const fadeOut = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false,\n    }).start(() => setviewVisible(false));\n  };\n\n  const resetLoader = () => {\n    setviewVisible(true);\n    fadeIn();\n  };\n\n  const NavigationContent = () => {\n\n    return (\n      <>\n        {isSubscribed && <Route path=\"/\" component={AuthRoute} />}\n        {trialDetails.hasEnded && <TrialEnded resetLoader={resetLoader} />}\n        {isNewUser && <NewUserPayment resetLoader={resetLoader} />}\n      </>\n    );\n  };\n\n  return (\n    <Router>\n      <Switch>\n        {userS && (\n          <>\n            <NavigationContent />\n            {viewVisible && (\n              <Animated.View\n                style={{\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  backgroundColor: \"white\",\n                  position: \"absolute\",\n                  opacity: fadeAnim,\n                  height: \"100%\",\n                  width: \"100%\",\n                }}\n              >\n                <Image\n                  source={require(\"assets/loading.gif\")}\n                  style={{ width: 450, height: 450, resizeMode: \"contain\" }}\n                />\n              </Animated.View>\n            )}\n          </>\n        )}\n        {!userS && !loading && <Route path=\"/\" component={NonAuthRoute} />}\n      </Switch>\n    </Router>\n  );\n};\n\nexport default RouteManagerNew;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}