{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport React, { useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { transListState } from \"../state/state\";\nimport { updateTransList } from \"../state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CompletePaymentPhoneOrder = function CompletePaymentPhoneOrder() {\n  var transList = transListState.use();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: {\n        textAlign: \"center\",\n        margin: 25\n      },\n      children: \"Current Open Orders\"\n    }), _jsx(View, {\n      style: styles.contentContainer,\n      children: transList ? transList == null ? void 0 : transList.map(function (element, index) {\n        var _element$id, _element$id2;\n        if (((_element$id = element.id) == null ? void 0 : _element$id.substr(((_element$id2 = element.id) == null ? void 0 : _element$id2.length) - 2, 2)) === \"-l\" && element.completed === false && element.cancelled !== true) {\n          var _element$cart, _element$line_items, _element$customer, _element$customer2, _element$customer3;\n          var _useState = useState(false),\n            _useState2 = _slicedToArray(_useState, 2),\n            changeModal = _useState2[0],\n            setChangeModal = _useState2[1];\n          var date = element.date ? new Date(element.date.seconds * 1000) : element.date_created ? new Date(element.date_created) : null;\n          return _jsxs(View, {\n            style: {\n              backgroundColor: \"grey\",\n              padding: 30,\n              margin: 10\n            },\n            children: [_jsx(Text, {\n              children: date.toLocaleString()\n            }), (_element$cart = element.cart) == null ? void 0 : _element$cart.map(function (cartItem, index) {\n              var _cartItem$options;\n              return _jsxs(View, {\n                style: {\n                  marginBottom: 20\n                },\n                children: [_jsxs(Text, {\n                  children: [\"Name: \", cartItem.name]\n                }), _jsxs(Text, {\n                  children: [\"Quantity: \", cartItem.quantity]\n                }), _jsxs(Text, {\n                  children: [\"Price: \", cartItem.price]\n                }), cartItem.options && ((_cartItem$options = cartItem.options) == null ? void 0 : _cartItem$options.map(function (option) {\n                  return _jsx(Text, {\n                    children: option\n                  });\n                }))]\n              }, index);\n            }), (_element$line_items = element.line_items) == null ? void 0 : _element$line_items.map(function (cartItem, index) {\n              var _cartItem$meta_data;\n              return _jsxs(View, {\n                style: {\n                  marginBottom: 20\n                },\n                children: [_jsxs(Text, {\n                  children: [\"Name: \", cartItem.name]\n                }), _jsxs(Text, {\n                  children: [\"Quantity: \", cartItem.quantity]\n                }), _jsxs(Text, {\n                  children: [\"Price: \", cartItem.price]\n                }), (_cartItem$meta_data = cartItem.meta_data) == null ? void 0 : _cartItem$meta_data.map(function (meta, index) {\n                  if (index === cartItem.meta_data.length - 1) return;\n                  return _jsx(Text, {\n                    children: meta.key + \" : \" + meta.value\n                  });\n                })]\n              }, index);\n            }), _jsx(Text, {\n              children: (_element$customer = element.customer) == null ? void 0 : _element$customer.name\n            }), _jsx(Text, {\n              children: (_element$customer2 = element.customer) == null ? void 0 : _element$customer2.phone\n            }), _jsx(Text, {\n              children: (_element$customer3 = element.customer) == null ? void 0 : _element$customer3.address\n            }), _jsxs(Text, {\n              children: [\"Method:\", \" \", element.method === \"pickupOrder\" ? \"Pick Up\" : \"Delivery\"]\n            }), _jsx(Button, {\n              title: \"Complete Order\",\n              onPress: function onPress() {\n                if (element.method === \"pickupOrder\") {\n                  setChangeModal(true);\n                } else {\n                  var localChange = structuredClone(transList);\n                  transList[index].completed = true;\n                  updateTransList(localChange);\n                }\n              },\n              style: {\n                marginBottom: 10\n              }\n            }), _jsx(Button, {\n              title: \"Cancel Order\",\n              onPress: function onPress() {\n                var localChange = structuredClone(transList);\n                localChange[index].cancelled = true;\n                updateTransList(localChange);\n              }\n            }), _jsx(Modal, {\n              visible: changeModal,\n              children: _jsx(ChangeScreen, {\n                setChangeModal: setChangeModal,\n                order: element,\n                completeOrder: function completeOrder() {\n                  var localChange = structuredClone(transList);\n                  transList[index].completed = true;\n                  updateTransList(localChange);\n                  setChangeModal(false);\n                }\n              })\n            })]\n          }, index);\n        }\n      }) : _jsx(Text, {\n        children: \"No Orders Yet\"\n      })\n    })]\n  });\n};\nexport default CompletePaymentPhoneOrder;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\"\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\"\n  }\n});","map":{"version":3,"names":["React","useState","Button","Text","transListState","updateTransList","ChangeScreen","CompletePaymentPhoneOrder","transList","use","styles","container","textAlign","margin","contentContainer","map","element","index","id","substr","length","completed","cancelled","changeModal","setChangeModal","date","Date","seconds","date_created","backgroundColor","padding","toLocaleString","cart","cartItem","marginBottom","name","quantity","price","options","option","line_items","meta_data","meta","key","value","customer","phone","address","method","localChange","structuredClone","StyleSheet","create","flex","height","flexDirection","flexWrap","justifyContent","paddingLeft","paddingRight","paddingBottom","width","alignItems"],"sources":["/Users/peterputros/Desktop/PosMate-1/components/CompletePaymentPhoneOrder.tsx"],"sourcesContent":["import { Modal, ScrollView, StyleSheet, View } from \"react-native\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { Button, Text } from \"@react-native-material/core\";\nimport { storeDetailState, transListState } from \"state/state\";\nimport { updateTransList } from \"state/firebaseFunctions\";\nimport ChangeScreen from \"./ChangeScreen\";\n\nconst CompletePaymentPhoneOrder = () => {\n  const transList = transListState.use();\n\n  return (\n    <View style={styles.container}>\n      <Text style={{ textAlign: \"center\", margin: 25 }}>\n        Current Open Orders\n      </Text>\n      <View style={styles.contentContainer}>\n        {transList ? (\n          transList?.map((element, index) => {\n            if (\n              element.id?.substr(element.id?.length - 2, 2) === \"-l\" &&\n              element.completed === false &&\n              element.cancelled !== true\n            ) {\n              const [changeModal, setChangeModal] = useState(false);\n              const date = element.date\n                ? new Date(element.date.seconds * 1000)\n                : element.date_created\n                ? new Date(element.date_created)\n                : null;\n\n              return (\n                <View\n                  style={{\n                    backgroundColor: \"grey\",\n                    padding: 30,\n                    margin: 10,\n                  }}\n                  key={index}\n                >\n                  <Text>{date.toLocaleString()}</Text>\n                  {element.cart?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.options &&\n                        cartItem.options?.map((option) => (\n                          <Text>{option}</Text>\n                        ))}\n                    </View>\n                  ))}\n                  {element.line_items?.map((cartItem, index) => (\n                    <View style={{ marginBottom: 20 }} key={index}>\n                      <Text>Name: {cartItem.name}</Text>\n                      <Text>Quantity: {cartItem.quantity}</Text>\n                      <Text>Price: {cartItem.price}</Text>\n                      {cartItem.meta_data?.map((meta, index) => {\n                        if (index === cartItem.meta_data.length - 1) return;\n                        return <Text>{`${meta.key} : ${meta.value}`}</Text>;\n                      })}\n                    </View>\n                  ))}\n                  <Text>{element.customer?.name}</Text>\n                  <Text>{element.customer?.phone}</Text>\n                  <Text>{element.customer?.address}</Text>\n                  <Text>\n                    Method:{\" \"}\n                    {element.method === \"pickupOrder\" ? \"Pick Up\" : \"Delivery\"}\n                  </Text>\n                  <Button\n                    title=\"Complete Order\"\n                    onPress={() => {\n                      if (element.method === \"pickupOrder\") {\n                        setChangeModal(true);\n                      } else {\n                        const localChange = structuredClone(transList);\n                        transList[index].completed = true;\n                        updateTransList(localChange);\n                      }\n                    }}\n                    style={{ marginBottom: 10 }}\n                  />\n                  <Button\n                    title=\"Cancel Order\"\n                    onPress={() => {\n                      const localChange = structuredClone(transList);\n                      localChange[index].cancelled = true;\n                      updateTransList(localChange);\n                    }}\n                  />\n                  <Modal visible={changeModal}>\n                    <ChangeScreen\n                      setChangeModal={setChangeModal}\n                      order={element}\n                      completeOrder={() => {\n                        const localChange = structuredClone(transList);\n                        transList[index].completed = true;\n                          updateTransList(localChange);\n                          setChangeModal(false)\n                      }}\n                    />\n                  </Modal>\n                </View>\n              );\n            }\n          })\n        ) : (\n          <Text>No Orders Yet</Text>\n        )}\n      </View>\n    </View>\n  );\n};\n\nexport default CompletePaymentPhoneOrder;\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"white\",\n    flex: 1,\n    height: \"100%\",\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    paddingLeft: 50,\n    paddingRight: 50,\n    paddingBottom: 50,\n    height: \"100%\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}