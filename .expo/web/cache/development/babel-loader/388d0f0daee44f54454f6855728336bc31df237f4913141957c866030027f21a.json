{"ast":null,"code":"import { auth, db } from \"./firebaseConfig\";\nexport var signIn = function signIn(email, password) {\n  return auth.signInWithEmailAndPassword(email, password);\n};\nexport var signUp = function signUp(email, password, name, phoneNumber) {\n  return auth.createUserWithEmailAndPassword(email, password).then(function (userAuth) {\n    if (userAuth.user) {\n      db.collection(\"users\").doc(userAuth.user.uid).set({\n        products: [],\n        categories: [],\n        wooCredentials: {\n          ck: null,\n          cs: null,\n          useWoocommerce: false\n        },\n        storeDetails: {\n          name: null,\n          address: null,\n          phoneNumber: null,\n          website: null,\n          comSelected: null,\n          deliveryPrice: null\n        },\n        ownerDetails: {\n          name: name,\n          address: null,\n          phoneNumber: phoneNumber,\n          email: email\n        }\n      });\n    }\n  });\n};\nexport var updateData = function updateData(categories) {\n  var _auth$currentUser;\n  db.collection(\"users\").doc((_auth$currentUser = auth.currentUser) == null ? void 0 : _auth$currentUser.uid).update({\n    categories: categories\n  }).catch(function (e) {\n    return console.log(\"ERROR HAS OCCURE FB: \", e);\n  });\n};\nexport var updateWooCredentials = function updateWooCredentials(wooCredentials) {\n  var _auth$currentUser2;\n  db.collection(\"users\").doc((_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.uid).update({\n    wooCredentials: wooCredentials\n  });\n};\nexport var updateTransList = function updateTransList(receipt) {\n  var _auth$currentUser3;\n  db.collection(\"users\").doc((_auth$currentUser3 = auth.currentUser) == null ? void 0 : _auth$currentUser3.uid).collection(\"transList\").add(receipt);\n};\nexport var updateStoreDetails = function updateStoreDetails(storeDetails) {\n  var _auth$currentUser4;\n  db.collection(\"users\").doc((_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.uid).update({\n    storeDetails: storeDetails\n  });\n  if (storeDetails.onlineStoreActive) {\n    var _auth$currentUser5;\n    db.collection(\"public\").doc((_auth$currentUser5 = auth.currentUser) == null ? void 0 : _auth$currentUser5.uid).update({\n      storeDetails: storeDetails\n    });\n  }\n};\nexport var updateFreeTrial = function updateFreeTrial(endDate) {\n  var _auth$currentUser6;\n  db.collection(\"users\").doc((_auth$currentUser6 = auth.currentUser) == null ? void 0 : _auth$currentUser6.uid).update({\n    freeTrial: endDate\n  });\n};\nexport var logout = function logout() {\n  localStorage.removeItem(\"isAuthedBackend\");\n  localStorage.removeItem(\"savedUserState\");\n  auth.signOut();\n  window.location.href = \"https://divinepos.com\";\n};\nexport var addCustomerDetailsToDb = function addCustomerDetailsToDb(customer) {\n  var _auth$currentUser7;\n  return db.collection(\"users\").doc((_auth$currentUser7 = auth.currentUser) == null ? void 0 : _auth$currentUser7.uid).collection(\"customers\").add(customer);\n};","map":{"version":3,"names":["auth","db","signIn","email","password","signInWithEmailAndPassword","signUp","name","phoneNumber","createUserWithEmailAndPassword","then","userAuth","user","collection","doc","uid","set","products","categories","wooCredentials","ck","cs","useWoocommerce","storeDetails","address","website","comSelected","deliveryPrice","ownerDetails","updateData","_auth$currentUser","currentUser","update","catch","e","console","log","updateWooCredentials","_auth$currentUser2","updateTransList","receipt","_auth$currentUser3","add","updateStoreDetails","_auth$currentUser4","onlineStoreActive","_auth$currentUser5","updateFreeTrial","endDate","_auth$currentUser6","freeTrial","logout","localStorage","removeItem","signOut","window","location","href","addCustomerDetailsToDb","customer","_auth$currentUser7"],"sources":["/Users/peterputros/Desktop/PosMate/state/firebaseFunctions.ts"],"sourcesContent":["import { auth, db } from \"./firebaseConfig\";\n\nexport const signIn = (email: string, password: string) =>\n  auth.signInWithEmailAndPassword(email, password);\n\nexport const signUp = (\n  email: string,\n  password: string,\n  name: string,\n  phoneNumber: string\n) =>\n  auth.createUserWithEmailAndPassword(email, password).then((userAuth) => {\n    if (userAuth.user) {\n      db.collection(\"users\")\n        .doc(userAuth.user.uid)\n        .set({\n          products: [],\n          categories: [],\n          wooCredentials: { ck: null, cs: null, useWoocommerce: false },\n          storeDetails: {\n            name: null,\n            address: null,\n            phoneNumber: null,\n            website: null,\n            comSelected: null,\n            deliveryPrice: null,\n          },\n          ownerDetails: {\n            name: name,\n            address: null,\n            phoneNumber: phoneNumber,\n            email: email,\n          },\n        });\n    }\n  });\n\nexport const updateData = (categories: any) => {\n  db.collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .update({\n      categories: categories,\n    })\n    .catch((e) => console.log(\"ERROR HAS OCCURE FB: \", e));\n};\n\nexport const updateWooCredentials = (wooCredentials: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    wooCredentials: wooCredentials,\n  });\n};\n\nexport const updateTransList = (receipt: any) => {\n  db.collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .collection(\"transList\")\n    .add(receipt);\n};\n\nexport const updateStoreDetails = (storeDetails: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    storeDetails: storeDetails,\n  });\n  if (storeDetails.onlineStoreActive) {\n    db.collection(\"public\").doc(auth.currentUser?.uid).update({\n      storeDetails: storeDetails,\n    });\n  }\n};\n\nexport const updateFreeTrial = (endDate: any) => {\n  db.collection(\"users\").doc(auth.currentUser?.uid).update({\n    freeTrial: endDate,\n  });\n};\n\nexport const logout = () => {\n  localStorage.removeItem(\"isAuthedBackend\");\n  localStorage.removeItem(\"savedUserState\");\n  auth.signOut();\n  // window.location.reload();\n  window.location.href = \"https://divinepos.com\";\n};\n\nexport const addCustomerDetailsToDb = (customer: any) =>\n  db\n    .collection(\"users\")\n    .doc(auth.currentUser?.uid)\n    .collection(\"customers\")\n    .add(customer);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}