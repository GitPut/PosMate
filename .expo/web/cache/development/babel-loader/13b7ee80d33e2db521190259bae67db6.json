{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { myDeviceDetailsState, setCustomersList, setMyDeviceDetailsState, setStoreDetailState, setTrialDetailsState, setUserState, setUserStoreState, setWoocommerceState, storeDetailState, trialDetailsState, userState, woocommerceState } from \"../state/state\";\nimport { auth, db } from \"../state/firebaseConfig\";\nimport { updateFreeTrial } from \"../state/firebaseFunctions\";\nvar tz = require(\"moment-timezone\");\nimport NewUserPayment from \"../screens/authed/NewUserPayment\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"../components/TrialEnded\";\nvar qz = require(\"qz-tray\");\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\nimport useInterval from \"../components/useInterval\";\nimport ScrollToTop from \"../components/ScrollToTop\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar RouteManagerNew = function RouteManagerNew() {\n  var _auth$currentUser4;\n  var savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  var userS = userState.use();\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setloading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isNewUser = _useState4[0],\n    setisNewUser = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isSubscribed = _useState6[0],\n    setisSubscribed = _useState6[1];\n  var fadeAnim = useRef(new Animated.Value(1)).current;\n  var _useState7 = useState(true),\n    _useState8 = _slicedToArray(_useState7, 2),\n    viewVisible = _useState8[0],\n    setviewVisible = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    isCanceled = _useState10[0],\n    setisCanceled = _useState10[1];\n  var trialDetails = trialDetailsState.use();\n  var wooCredentials = woocommerceState.use();\n  var _useState11 = useState([]),\n    _useState12 = _slicedToArray(_useState11, 2),\n    wooOrders = _useState12[0],\n    setwooOrders = _useState12[1];\n  var storeDetails = storeDetailState.use();\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isWooError = _useState14[0],\n    setisWooError = _useState14[1];\n  var myDeviceDetails = myDeviceDetailsState.use();\n  var _useState15 = useState(myDeviceDetails),\n    _useState16 = _slicedToArray(_useState15, 2),\n    localMyDeviceDetails = _useState16[0],\n    setlocalMyDeviceDetails = _useState16[1];\n  var _Font$useFonts = Font.useFonts({\n      \"archivo-600\": require(\"../assets/fonts/Archivo-SemiBold.ttf\"),\n      \"archivo-500\": require(\"../assets/fonts/Archivo-Regular.ttf\")\n    }),\n    _Font$useFonts2 = _slicedToArray(_Font$useFonts, 1),\n    fontsLoaded = _Font$useFonts2[0];\n  useEffect(function () {\n    var _auth$currentUser;\n    if (localMyDeviceDetails.docID && (_auth$currentUser = auth.currentUser) != null && _auth$currentUser.uid) {\n      var _auth$currentUser2;\n      console.log(\"Listening for print requests\");\n      db.collection(\"users\").doc((_auth$currentUser2 = auth.currentUser) == null ? void 0 : _auth$currentUser2.uid).collection(\"devices\").doc(localMyDeviceDetails.docID).collection(\"printRequests\").onSnapshot(function (doc) {\n        if (doc.empty) return;\n        doc.docs.forEach(function (element) {\n          var _auth$currentUser3;\n          console.log(\"Data to print recieved: \", element.data().printData);\n\n          db.collection(\"users\").doc((_auth$currentUser3 = auth.currentUser) == null ? void 0 : _auth$currentUser3.uid).collection(\"devices\").doc(localMyDeviceDetails.docID).collection(\"printRequests\").doc(element.id).delete();\n        });\n      });\n    }\n  }, [localMyDeviceDetails, (_auth$currentUser4 = auth.currentUser) == null ? void 0 : _auth$currentUser4.uid]);\n  useEffect(function () {\n    setUserState(savedUserState);\n    var unsubscribeAuthStateChanged = auth.onAuthStateChanged(function (user) {\n      fadeAnim.setValue(1);\n      setviewVisible(true);\n      if (user) {\n        localStorage.setItem(\"savedUserState\", true);\n        setUserState(user);\n\n        db.collection(\"users\").doc(user.uid).get().then(function (doc) {\n          import(\"../assets/plugins/fontawesome/css/fontawesome.min.css\");\n          import(\"../assets/plugins/fontawesome/css/all.min.css\");\n          import(\"../assets/css/bootstrap.min.css\");\n          import(\"../assets/js/bootstrap.bundle.min.js\");\n          import(\"../assets/css/font-awesome.min.css\");\n          import(\"../assets/css/line-awesome.min.css\");\n          import(\"../assets/css/style.css\");\n          var products = [];\n          var categories = [];\n          doc.ref.collection(\"products\").get().then(function (docs) {\n            if (!docs.empty) {\n              docs.forEach(function (element) {\n                products.push(element.data());\n              });\n            }\n          }).catch(function (e) {\n            return console.log(\"Error has occured with db: \", e);\n          });\n          setUserStoreState({\n            products: products,\n            categories: doc.data().categories ? doc.data().categories : []\n          });\n          if (doc.data().wooCredentials) {\n            setWoocommerceState(doc.data().wooCredentials);\n          }\n          if (doc.data().storeDetails) {\n            setStoreDetailState(doc.data().storeDetails);\n          }\n          doc.ref.collection(\"wooOrders\").get().then(function (docs) {\n            if (!docs.empty) {\n              docs.forEach(function (element) {\n                setwooOrders(function (prev) {\n                  return [].concat(_toConsumableArray(prev), [element.data()]);\n                });\n              });\n            }\n          }).catch(function () {\n            return console.log(\"Error has occured with db\");\n          });\n          doc.ref.collection(\"subscriptions\").get().then(function (docs) {\n            if (!docs.empty) {\n              docs.forEach(function (element) {\n                if (element.data().role === \"Test Plan\") {\n                  if (element.data().status === \"active\") {\n                    setisSubscribed(true);\n                    setisNewUser(false);\n                    if (doc.data().freeTrial) {\n                      setTrialDetailsState({\n                        endDate: null,\n                        hasEnded: null\n                      });\n                      updateFreeTrial(null);\n                    }\n                  } else if (element.data().status === \"canceled\") {\n                    setisSubscribed(false);\n                    setisNewUser(false);\n                    setisCanceled(true);\n                  } else {\n                    setisSubscribed(false);\n                    setisNewUser(false);\n                  }\n                }\n              });\n            } else if (doc.data().freeTrial) {\n              setisSubscribed(true);\n              setisNewUser(false);\n            } else {\n              setisNewUser(true);\n              setisSubscribed(false);\n            }\n          }).catch(function () {\n            return console.log(\"Error has occured with db\");\n          });\n          doc.ref.collection(\"customers\").get().then(function (docs) {\n            var newCustomerList = [];\n            docs.forEach(function (element) {\n              newCustomerList.push(_objectSpread(_objectSpread({}, element.data()), {}, {\n                id: element.id\n              }));\n            });\n            setCustomersList(newCustomerList);\n            console.log(\"CUSTOMERS: \", newCustomerList);\n\n          }).catch(function () {\n            return console.log(\"Error has occured with db\");\n          });\n          if (doc.data().freeTrial) {\n            setisNewUser(false);\n            var firstDate = new Date(doc.data().freeTrial.seconds * 1000);\n            var today = new Date();\n            if (firstDate <= today) {\n              setTrialDetailsState({\n                endDate: doc.data().freeTrial,\n                hasEnded: true\n              });\n            } else {\n              setTrialDetailsState({\n                endDate: doc.data().freeTrial,\n                hasEnded: false\n              });\n            }\n          }\n          function getCookie(name) {\n            var match = document.cookie.match(new RegExp(\"(^| )\" + name + \"=([^;]+)\"));\n            if (match) return match[2];\n          }\n          var deviceID = getCookie(\"deviceID\");\n          doc.ref.collection(\"devices\").get().then(function (docs) {\n            docs.forEach(function (element) {\n              if (element.data().id === deviceID) {\n                setMyDeviceDetailsState(_objectSpread(_objectSpread({}, element.data()), {}, {\n                  docID: element.id\n                }));\n                setlocalMyDeviceDetails(_objectSpread(_objectSpread({}, element.data()), {}, {\n                  docID: element.id\n                }));\n              }\n            });\n          });\n          db.collection(\"users\").doc(user.uid).onSnapshot(function (doc) {\n            setUserStoreState({\n              products: products,\n              categories: doc.data().categories ? doc.data().categories : []\n            });\n            if (doc.data().wooCredentials) {\n              setWoocommerceState(doc.data().wooCredentials);\n            }\n            if (doc.data().storeDetails) {\n              setStoreDetailState(doc.data().storeDetails);\n            }\n          });\n          setloading(false);\n          fadeOut();\n        }).catch(function () {\n          return console.log(\"Error has occured with db\");\n        });\n      } else {\n        localStorage.removeItem(\"savedUserState\");\n        setUserState(null);\n        setUserStoreState({\n          products: null,\n          categories: null\n        });\n        setisNewUser(false);\n        setisSubscribed(false);\n        setloading(false);\n      }\n    });\n    return function () {\n      unsubscribeAuthStateChanged();\n    };\n  }, [savedUserState]);\n  useInterval(function () {\n    if (wooCredentials.useWoocommerce && isSubscribed && !isWooError) {\n      var WooCommerceAPI = require(\"woocommerce-api\");\n      var WooCommerce = new WooCommerceAPI({\n        url: wooCredentials.apiUrl,\n        consumerKey: wooCredentials.ck,\n        consumerSecret: wooCredentials.cs,\n        wpAPI: true,\n        version: \"wc/v3\"\n      });\n      var page = 1;\n      var orders = [];\n      var getOrders = function () {\n        var _ref = _asyncToGenerator(function* () {\n          var response = yield WooCommerce.getAsync(\"orders?page=\" + page + \"&per_page=100\");\n          var data = JSON.parse(response.body);\n          orders = [].concat(_toConsumableArray(orders), _toConsumableArray(data));\n          if (data.length === 100) {\n            page++;\n            getOrders();\n          } else {\n          }\n        });\n        return function getOrders() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      getOrders().then(function () {\n        if (JSON.stringify(orders) === JSON.stringify(wooOrders)) return;\n        var _loop = function _loop(index) {\n          var order = orders[index];\n          var orderIndex = void 0;\n          if (wooOrders.length > 0) {\n            orderIndex = wooOrders.findIndex(function (e) {\n              return e.id === order.id;\n            });\n          } else {\n            orderIndex = -1;\n          }\n          if (orderIndex === -1 || !wooOrders[orderIndex].printed) {\n            var _storeDetails$address, _order$line_items;\n            if (orderIndex === -1) {\n              db.collection(\"users\").doc(userS.uid).collection(\"wooOrders\").doc(order.id.toString()).set(_objectSpread(_objectSpread({}, order), {}, {\n                printed: true\n              })).then(function () {\n                setwooOrders(function (prev) {\n                  return [].concat(_toConsumableArray(prev), [_objectSpread(_objectSpread({}, order), {}, {\n                    printed: true\n                  })]);\n                });\n                wooOrders.push(_objectSpread(_objectSpread({}, order), {}, {\n                  printed: true\n                }));\n              }).catch(function (e) {\n                return console.log(\"Error has occured with db: \", e);\n              });\n            } else {\n              db.collection(\"users\").doc(userS.uid).collection(\"wooOrders\").doc(order.id.toString()).update({\n                printed: true\n              }).then(function () {\n                setwooOrders(function (prev) {\n                  var newOrders = _toConsumableArray(prev);\n                  newOrders[orderIndex].printed = true;\n                  return newOrders;\n                });\n                wooOrders[index].printed = true;\n              }).catch(function (e) {\n                return console.log(\"Error has occured with db: \", e);\n              });\n            }\n            var CleanupOps = function CleanupOps(metaList) {\n              var opsArray = [];\n              metaList.forEach(function (op) {\n                var arrContaingMe = opsArray.filter(function (filterOp) {\n                  return filterOp.key === op.key;\n                });\n                if (arrContaingMe.length > 0) {\n                  opsArray.forEach(function (opsArrItem, index) {\n                    if (opsArrItem.key === op.key) {\n                      opsArray[index].vals.push(op.value);\n                    }\n                  });\n                } else {\n                  opsArray.push({\n                    key: op.key,\n                    vals: [op.value]\n                  });\n                }\n              });\n              return opsArray;\n            };\n            var printData = [];\n            var dateString = order.date_created;\n            var newDate = new Date(dateString + \"Z\");\n            var targetTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n            var resultDate = tz(newDate).tz(targetTimezone, true).format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n            printData.push(\"\\x1B\" + \"\\x40\",\n            \"\\x1B\" + \"\\x61\" + \"\\x31\",\n            storeDetails.name, \"\\x0A\", ((_storeDetails$address = storeDetails.address) == null ? void 0 : _storeDetails$address.label) + \"\\x0A\", storeDetails.website + \"\\x0A\",\n            storeDetails.phoneNumber + \"\\x0A\",\n            resultDate + \"\\x0A\", \"\\x0A\", \"Online Order\" + \"\\x0A\",\n            \"Transaction ID \" + order.number + \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x0A\", \"\\x1B\" + \"\\x61\" + \"\\x30\");\n\n            (_order$line_items = order.line_items) == null ? void 0 : _order$line_items.map(function (cartItem) {\n              printData.push(\"\\x0A\");\n              printData.push(\"Name: \" + cartItem.name);\n              printData.push(\"\\x0A\");\n              printData.push(\"Quantity: \" + cartItem.quantity);\n              printData.push(\"\\x0A\");\n              printData.push(\"Price: $\" + cartItem.price);\n              printData.push(\"\\x0A\");\n              if (cartItem.meta) {\n                CleanupOps(cartItem.meta).map(function (returnedItem) {\n                  printData.push(returnedItem.key + \" : \");\n                  printData.push(\"\\x0A\");\n                  returnedItem.vals.map(function (val, index) {\n                    printData.push(\"\" + val);\n                    printData.push(\"\\x0A\");\n                    if (index >= 0 && index < returnedItem.vals.length - 1) {\n                      printData.push(\", \");\n                    }\n                  });\n                  printData.push(\"\\x0A\");\n                });\n              } else {\n                printData.push(\"\\x0A\" + \"\\x0A\");\n              }\n            });\n            printData.push(\"\\x0A\");\n            printData.push(\"\\x0A\");\n            printData.push(\"Customer Details:\");\n            printData.push(\"\\x0A\");\n            printData.push(\"Address: \" + order.shipping.address_1);\n            printData.push(\"\\x0A\");\n            printData.push(\"City: \" + order.shipping.city);\n            printData.push(\"\\x0A\");\n            printData.push(\"Zip/Postal Code: \" + order.shipping.postcode);\n            printData.push(\"\\x0A\");\n            printData.push(\"Province/State: \" + order.shipping.state);\n            printData.push(\"\\x0A\");\n            printData.push(\"Name: \" + order.shipping.first_name + \" \" + order.shipping.last_name);\n            printData.push(\"\\x0A\");\n            printData.push(\"Phone Number: \" + order.billing.phone);\n            printData.push(\"\\x0A\");\n            order.shipping_lines.map(function (line) {\n              printData.push(\"Shipping Method: \" + line.method_title);\n              printData.push(\"\\x0A\");\n            });\n            if (order.customer_note) {\n              printData.push(\"Customer Note: \" + order.customer_note);\n              printData.push(\"\\x0A\");\n            }\n            printData.push(\"\\x0A\");\n            printData.push(\"\\x0A\");\n            printData.push(\"\\x0A\", \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\", \"\\x0A\" + \"\\x0A\", \"Payment Method: \" + order.payment_method_title + \"\\x0A\" + \"\\x0A\", \"Total Including (\" + (storeDetails.taxRate ? storeDetails.taxRate : \"13\") + \"% Tax): \" + \"$\" + order.total + \"\\x0A\" + \"\\x0A\", \"------------------------------------------\" + \"\\x0A\", \"\\x0A\",\n            \"\\x0A\",\n            \"\\x0A\",\n            \"\\x0A\",\n            \"\\x0A\",\n            \"\\x0A\");\n\n            printData.push(\"\\x1D\" + \"\\x56\" + \"\\x00\");\n            var doublePrint = printData.concat(printData);\n            qz.websocket.connect().then(function () {\n              var config = qz.configs.create(storeDetails.comSelected);\n              return qz.print(config, doublePrint);\n            }).then(qz.websocket.disconnect).catch(function (err) {\n              console.error(err);\n            });\n          }\n        };\n        for (var index = 0; index < orders.length; index++) {\n          _loop(index);\n        }\n      }).catch(function (e) {\n        console.log(\"Error has occured when trying to get WooOrders: \", e);\n        alert(\"There was an error connecting to your woocommerce store. Please refresh the page to try again.\");\n        setisWooError(true);\n      });\n    }\n  }, 10000);\n  var fadeIn = function fadeIn() {\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false\n    }).start();\n  };\n  var fadeOut = function fadeOut() {\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false\n    }).start(function () {\n      return setviewVisible(false);\n    });\n  };\n  var resetLoader = function resetLoader() {\n    setviewVisible(true);\n    fadeIn();\n  };\n  var NavigationContent = function NavigationContent() {\n    return _jsxs(_Fragment, {\n      children: [isSubscribed && _jsx(Route, {\n        path: \"/\",\n        component: AuthRoute\n      }), trialDetails.hasEnded && _jsx(TrialEnded, {\n        resetLoader: resetLoader\n      }), isNewUser && _jsx(NewUserPayment, {\n        resetLoader: resetLoader\n      })]\n    });\n  };\n  return _jsxs(Router, {\n    children: [_jsx(ScrollToTop, {}), _jsxs(Switch, {\n      children: [userS && _jsxs(_Fragment, {\n        children: [_jsx(NavigationContent, {}), viewVisible && _jsx(Animated.View, {\n          style: {\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            backgroundColor: \"white\",\n            position: \"absolute\",\n            opacity: fadeAnim,\n            height: \"100%\",\n            width: \"100%\"\n          },\n          children: _jsx(Image, {\n            source: require(\"../assets/loading.gif\"),\n            style: {\n              width: 450,\n              height: 450,\n              resizeMode: \"contain\"\n            }\n          })\n        })]\n      }), !userS && !loading && _jsx(Route, {\n        path: \"/\",\n        component: NonAuthRoute\n      })]\n    })]\n  });\n};\nexport default RouteManagerNew;","map":{"version":3,"names":["React","useEffect","useRef","useState","myDeviceDetailsState","setCustomersList","setMyDeviceDetailsState","setStoreDetailState","setTrialDetailsState","setUserState","setUserStoreState","setWoocommerceState","storeDetailState","trialDetailsState","userState","woocommerceState","auth","db","updateFreeTrial","tz","require","NewUserPayment","Font","TrialEnded","qz","BrowserRouter","Router","Route","Switch","AuthRoute","NonAuthRoute","useInterval","ScrollToTop","RouteManagerNew","savedUserState","JSON","parse","localStorage","getItem","userS","use","loading","setloading","isNewUser","setisNewUser","isSubscribed","setisSubscribed","fadeAnim","Animated","Value","current","viewVisible","setviewVisible","isCanceled","setisCanceled","trialDetails","wooCredentials","wooOrders","setwooOrders","storeDetails","isWooError","setisWooError","myDeviceDetails","localMyDeviceDetails","setlocalMyDeviceDetails","useFonts","fontsLoaded","docID","currentUser","uid","console","log","collection","doc","onSnapshot","empty","docs","forEach","element","data","printData","id","delete","unsubscribeAuthStateChanged","onAuthStateChanged","user","setValue","setItem","get","then","products","categories","ref","push","catch","e","prev","role","status","freeTrial","endDate","hasEnded","newCustomerList","firstDate","Date","seconds","today","getCookie","name","match","document","cookie","RegExp","deviceID","fadeOut","removeItem","useWoocommerce","WooCommerceAPI","WooCommerce","url","apiUrl","consumerKey","ck","consumerSecret","cs","wpAPI","version","page","orders","getOrders","response","getAsync","body","length","stringify","index","order","orderIndex","findIndex","printed","toString","set","update","newOrders","CleanupOps","metaList","opsArray","op","arrContaingMe","filter","filterOp","key","opsArrItem","vals","value","dateString","date_created","newDate","targetTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","resultDate","format","address","label","website","phoneNumber","number","line_items","map","cartItem","quantity","price","meta","returnedItem","val","shipping","address_1","city","postcode","state","first_name","last_name","billing","phone","shipping_lines","line","method_title","customer_note","payment_method_title","taxRate","total","doublePrint","concat","websocket","connect","config","configs","create","comSelected","print","disconnect","err","error","alert","fadeIn","timing","toValue","duration","useNativeDriver","start","resetLoader","NavigationContent","alignItems","justifyContent","backgroundColor","position","opacity","height","width","resizeMode"],"sources":["/Users/peterputros/Desktop/PosMate/navigation/RouteManagerNew.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport {\n  myDeviceDetailsState,\n  setCustomersList,\n  setMyDeviceDetailsState,\n  setStoreDetailState,\n  setTrialDetailsState,\n  setUserState,\n  setUserStoreState,\n  setWoocommerceState,\n  storeDetailState,\n  trialDetailsState,\n  userState,\n  woocommerceState,\n} from \"state/state\";\nimport { auth, db } from \"state/firebaseConfig\";\nimport { updateFreeTrial } from \"state/firebaseFunctions\";\nconst tz = require(\"moment-timezone\");\nimport NewUserPayment from \"screens/authed/NewUserPayment\";\nimport { Animated, Image } from \"react-native\";\nimport * as Font from \"expo-font\";\nimport TrialEnded from \"components/TrialEnded\";\nconst qz = require(\"qz-tray\");\n\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport AuthRoute from \"./authed/AuthRoute\";\nimport NonAuthRoute from \"./non-authed/NonAuthRoute\";\nimport useInterval from \"components/useInterval\";\nimport ScrollToTop from \"components/ScrollToTop\";\n\nconst RouteManagerNew = () => {\n  const savedUserState = JSON.parse(localStorage.getItem(\"savedUserState\"));\n  const userS = userState.use();\n  const [loading, setloading] = useState(true);\n  const [isNewUser, setisNewUser] = useState(null);\n  const [isSubscribed, setisSubscribed] = useState(null);\n  const fadeAnim = useRef(new Animated.Value(1)).current;\n  const [viewVisible, setviewVisible] = useState(true);\n  const [isCanceled, setisCanceled] = useState(null);\n  const trialDetails = trialDetailsState.use();\n  const wooCredentials = woocommerceState.use();\n  const [wooOrders, setwooOrders] = useState([]);\n  const storeDetails = storeDetailState.use();\n  const [isWooError, setisWooError] = useState(false);\n  const myDeviceDetails = myDeviceDetailsState.use();\n  const [localMyDeviceDetails, setlocalMyDeviceDetails] =\n    useState(myDeviceDetails);\n\n  const [fontsLoaded] = Font.useFonts({\n    \"archivo-600\": require(\"assets/fonts/Archivo-SemiBold.ttf\"),\n    \"archivo-500\": require(\"assets/fonts/Archivo-Regular.ttf\"),\n  });\n\n  useEffect(() => {\n    if (localMyDeviceDetails.docID && auth.currentUser?.uid) {\n      console.log(\"Listening for print requests\");\n      db.collection(\"users\")\n        .doc(auth.currentUser?.uid)\n        .collection(\"devices\")\n        .doc(localMyDeviceDetails.docID)\n        .collection(\"printRequests\")\n        .onSnapshot((doc) => {\n          if (doc.empty) return;\n\n          doc.docs.forEach((element) => {\n            console.log(\"Data to print recieved: \", element.data().printData);\n            //print then delete\n\n            db.collection(\"users\")\n              .doc(auth.currentUser?.uid)\n              .collection(\"devices\")\n              .doc(localMyDeviceDetails.docID)\n              .collection(\"printRequests\")\n              .doc(element.id)\n              .delete();\n          });\n        });\n    }\n  }, [localMyDeviceDetails, auth.currentUser?.uid]);\n\n  useEffect(() => {\n    setUserState(savedUserState);\n\n    const unsubscribeAuthStateChanged = auth.onAuthStateChanged((user) => {\n      fadeAnim.setValue(1);\n      setviewVisible(true);\n      if (user) {\n        localStorage.setItem(\"savedUserState\", true);\n        setUserState(user);\n\n        // let customers = localStorage.getItem(\"customers\");\n        // if (customers) {\n        //   customers = JSON.parse(customers);\n        // }\n\n        db.collection(\"users\")\n          .doc(user.uid)\n          .get()\n          .then((doc) => {\n            import(\"assets/plugins/fontawesome/css/fontawesome.min.css\");\n            import(\"assets/plugins/fontawesome/css/all.min.css\");\n            import(\"assets/css/bootstrap.min.css\");\n            import(\"assets/js/bootstrap.bundle.min.js\");\n            import(\"assets/css/font-awesome.min.css\");\n            import(\"assets/css/line-awesome.min.css\");\n            import(\"assets/css/style.css\");\n\n            const products = [];\n            const categories = [];\n\n            doc.ref\n              .collection(\"products\")\n              .get()\n              .then((docs) => {\n                if (!docs.empty) {\n                  docs.forEach((element) => {\n                    products.push(element.data());\n                  });\n                }\n              })\n              .catch((e) => console.log(\"Error has occured with db: \", e));\n\n            setUserStoreState({\n              products: products,\n              categories: doc.data().categories ? doc.data().categories : [],\n            });\n\n            if (doc.data().wooCredentials) {\n              setWoocommerceState(doc.data().wooCredentials);\n            }\n            if (doc.data().storeDetails) {\n              setStoreDetailState(doc.data().storeDetails);\n            }\n\n            doc.ref\n              .collection(\"wooOrders\")\n              .get()\n              .then((docs) => {\n                if (!docs.empty) {\n                  docs.forEach((element) => {\n                    setwooOrders((prev) => [...prev, element.data()]);\n                  });\n                }\n              })\n              .catch(() => console.log(\"Error has occured with db\"));\n\n            doc.ref\n              .collection(\"subscriptions\")\n              .get()\n              .then((docs) => {\n                if (!docs.empty) {\n                  docs.forEach((element) => {\n                    if (element.data().role === \"Test Plan\") {\n                      if (element.data().status === \"active\") {\n                        setisSubscribed(true);\n                        setisNewUser(false);\n                        if (doc.data().freeTrial) {\n                          setTrialDetailsState({\n                            endDate: null,\n                            hasEnded: null,\n                          });\n                          updateFreeTrial(null);\n                        }\n                      } else if (element.data().status === \"canceled\") {\n                        setisSubscribed(false);\n                        setisNewUser(false);\n                        setisCanceled(true);\n                      } else {\n                        setisSubscribed(false);\n                        setisNewUser(false);\n                      }\n                    }\n                    // console.log(\"DATA: \", element.data());\n                  });\n                } else if (doc.data().freeTrial) {\n                  setisSubscribed(true);\n                  setisNewUser(false);\n                } else {\n                  setisNewUser(true);\n                  setisSubscribed(false);\n                }\n              })\n              .catch(() => console.log(\"Error has occured with db\"));\n\n            doc.ref\n              .collection(\"customers\")\n              .get()\n              .then((docs) => {\n                const newCustomerList = [];\n\n                docs.forEach((element) => {\n                  newCustomerList.push({ ...element.data(), id: element.id });\n                });\n\n                setCustomersList(newCustomerList);\n\n                console.log(\"CUSTOMERS: \", newCustomerList);\n\n                // if (\n                //   JSON.stringify(customers) !== JSON.stringify(newCustomerList)\n                // ) {\n                //   localStorage.setItem(\n                //     \"customers\",\n                //     JSON.stringify(newCustomerList)\n                //   );\n                // }\n              })\n              .catch(() => console.log(\"Error has occured with db\"));\n\n            if (doc.data().freeTrial) {\n              setisNewUser(false);\n              const firstDate = new Date(doc.data().freeTrial.seconds * 1000);\n              const today = new Date();\n              if (firstDate <= today) {\n                setTrialDetailsState({\n                  endDate: doc.data().freeTrial,\n                  hasEnded: true,\n                });\n              } else {\n                setTrialDetailsState({\n                  endDate: doc.data().freeTrial,\n                  hasEnded: false,\n                });\n              }\n            }\n\n            function getCookie(name) {\n              const match = document.cookie.match(\n                new RegExp(\"(^| )\" + name + \"=([^;]+)\")\n              );\n              if (match) return match[2];\n            }\n\n            const deviceID = getCookie(\"deviceID\");\n\n            doc.ref\n              .collection(\"devices\")\n              .get()\n              .then((docs) => {\n                docs.forEach((element) => {\n                  if (element.data().id === deviceID) {\n                    setMyDeviceDetailsState({\n                      ...element.data(),\n                      docID: element.id,\n                    });\n                    setlocalMyDeviceDetails({\n                      ...element.data(),\n                      docID: element.id,\n                    });\n                  }\n                });\n              });\n\n            db.collection(\"users\")\n              .doc(user.uid)\n              .onSnapshot((doc) => {\n                setUserStoreState({\n                  products: products,\n                  categories: doc.data().categories\n                    ? doc.data().categories\n                    : [],\n                });\n                if (doc.data().wooCredentials) {\n                  setWoocommerceState(doc.data().wooCredentials);\n                }\n                if (doc.data().storeDetails) {\n                  setStoreDetailState(doc.data().storeDetails);\n                }\n              });\n\n            setloading(false);\n            fadeOut();\n          })\n          .catch(() => console.log(\"Error has occured with db\"));\n      } else {\n        localStorage.removeItem(\"savedUserState\");\n        setUserState(null);\n        setUserStoreState({ products: null, categories: null });\n        setisNewUser(false);\n        setisSubscribed(false);\n        setloading(false);\n      }\n    });\n\n    return () => {\n      unsubscribeAuthStateChanged();\n    };\n  }, [savedUserState]);\n\n  useInterval(() => {\n    if (wooCredentials.useWoocommerce && isSubscribed && !isWooError) {\n      const WooCommerceAPI = require(\"woocommerce-api\");\n\n      const WooCommerce = new WooCommerceAPI({\n        url: wooCredentials.apiUrl,\n        consumerKey: wooCredentials.ck,\n        consumerSecret: wooCredentials.cs,\n        wpAPI: true,\n        version: \"wc/v3\",\n      });\n\n      let page = 1;\n      let orders = [];\n\n      const getOrders = async () => {\n        const response = await WooCommerce.getAsync(\n          `orders?page=${page}&per_page=100`\n        );\n        const data = JSON.parse(response.body);\n        orders = [...orders, ...data];\n        if (data.length === 100) {\n          page++;\n          getOrders();\n        } else {\n          //console.log(\"WOO ORDERS: \", orders);\n        }\n        // console.log(\"WOO ORDERS: \", orders);\n      };\n\n      getOrders()\n        .then(() => {\n          if (JSON.stringify(orders) === JSON.stringify(wooOrders)) return;\n          for (let index = 0; index < orders.length; index++) {\n            const order = orders[index];\n            let orderIndex;\n            if (wooOrders.length > 0) {\n              orderIndex = wooOrders.findIndex((e) => e.id === order.id);\n            } else {\n              orderIndex = -1;\n            }\n\n            if (orderIndex === -1 || !wooOrders[orderIndex].printed) {\n              if (orderIndex === -1) {\n                db.collection(\"users\")\n                  .doc(userS.uid)\n                  .collection(\"wooOrders\")\n                  .doc(order.id.toString())\n                  .set({ ...order, printed: true })\n                  .then(() => {\n                    setwooOrders((prev) => [\n                      ...prev,\n                      { ...order, printed: true },\n                    ]);\n                    wooOrders.push({ ...order, printed: true });\n                  })\n                  .catch((e) => console.log(\"Error has occured with db: \", e));\n              } else {\n                db.collection(\"users\")\n                  .doc(userS.uid)\n                  .collection(\"wooOrders\")\n                  .doc(order.id.toString())\n                  .update({ printed: true })\n                  .then(() => {\n                    setwooOrders((prev) => {\n                      const newOrders = [...prev];\n                      newOrders[orderIndex].printed = true;\n                      return newOrders;\n                    });\n                    wooOrders[index].printed = true;\n                  })\n                  .catch((e) => console.log(\"Error has occured with db: \", e));\n              }\n\n              const CleanupOps = (metaList) => {\n                const opsArray = [];\n\n                metaList.forEach((op) => {\n                  const arrContaingMe = opsArray.filter(\n                    (filterOp) => filterOp.key === op.key\n                  );\n\n                  if (arrContaingMe.length > 0) {\n                    opsArray.forEach((opsArrItem, index) => {\n                      if (opsArrItem.key === op.key) {\n                        opsArray[index].vals.push(op.value);\n                      }\n                    });\n                  } else {\n                    opsArray.push({ key: op.key, vals: [op.value] });\n                  }\n                });\n                return opsArray;\n              };\n\n              const printData = [];\n              const dateString = order.date_created;\n              const newDate = new Date(dateString + \"Z\");\n              const targetTimezone =\n                Intl.DateTimeFormat().resolvedOptions().timeZone;\n              const resultDate = tz(newDate)\n                .tz(targetTimezone, true)\n                .format(\"dddd, MMMM Do YYYY, h:mm:ss a z\");\n\n              printData.push(\n                \"\\x1B\" + \"\\x40\", // init\n                \"\\x1B\" + \"\\x61\" + \"\\x31\", // center align\n                storeDetails.name,\n                \"\\x0A\",\n                storeDetails.address?.label + \"\\x0A\",\n                storeDetails.website + \"\\x0A\", // text and line break\n                storeDetails.phoneNumber + \"\\x0A\", // text and line break\n                resultDate + \"\\x0A\",\n                \"\\x0A\",\n                \"Online Order\" + \"\\x0A\", // text and line break\n                `Transaction ID ${order.number}` + \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x0A\",\n                \"\\x1B\" + \"\\x61\" + \"\\x30\" // left align\n              );\n\n              order.line_items?.map((cartItem) => {\n                printData.push(\"\\x0A\");\n                printData.push(`Name: ${cartItem.name}`);\n                printData.push(\"\\x0A\");\n                printData.push(`Quantity: ${cartItem.quantity}`);\n                printData.push(\"\\x0A\");\n                printData.push(`Price: $${cartItem.price}`);\n                printData.push(\"\\x0A\");\n\n                if (cartItem.meta) {\n                  CleanupOps(cartItem.meta).map((returnedItem) => {\n                    printData.push(`${returnedItem.key} : `);\n                    printData.push(\"\\x0A\");\n                    returnedItem.vals.map((val, index) => {\n                      printData.push(`${val}`);\n                      printData.push(\"\\x0A\");\n                      if (index >= 0 && index < returnedItem.vals.length - 1) {\n                        printData.push(\", \");\n                      }\n                    });\n                    printData.push(\"\\x0A\");\n                  });\n                } else {\n                  printData.push(\"\\x0A\" + \"\\x0A\");\n                }\n              });\n\n              printData.push(\"\\x0A\");\n              printData.push(\"\\x0A\");\n              printData.push(`Customer Details:`);\n              printData.push(\"\\x0A\");\n              printData.push(`Address: ${order.shipping.address_1}`);\n              printData.push(\"\\x0A\");\n              printData.push(`City: ${order.shipping.city}`);\n              printData.push(\"\\x0A\");\n              printData.push(`Zip/Postal Code: ${order.shipping.postcode}`);\n              printData.push(\"\\x0A\");\n              printData.push(`Province/State: ${order.shipping.state}`);\n              printData.push(\"\\x0A\");\n              printData.push(\n                `Name: ${order.shipping.first_name} ${order.shipping.last_name}`\n              );\n              printData.push(\"\\x0A\");\n              printData.push(`Phone Number: ${order.billing.phone}`);\n              printData.push(\"\\x0A\");\n              order.shipping_lines.map((line) => {\n                printData.push(`Shipping Method: ${line.method_title}`);\n                printData.push(\"\\x0A\");\n              });\n              if (order.customer_note) {\n                printData.push(`Customer Note: ${order.customer_note}`);\n                printData.push(\"\\x0A\");\n              }\n              printData.push(\"\\x0A\");\n              printData.push(\"\\x0A\");\n\n              printData.push(\n                \"\\x0A\",\n                \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\" + \"\\x0A\",\n                \"\\x0A\" + \"\\x0A\",\n                \"Payment Method: \" +\n                  order.payment_method_title +\n                  \"\\x0A\" +\n                  \"\\x0A\",\n                `Total Including (${\n                  storeDetails.taxRate ? storeDetails.taxRate : \"13\"\n                }% Tax): ` +\n                  \"$\" +\n                  order.total +\n                  \"\\x0A\" +\n                  \"\\x0A\",\n                \"------------------------------------------\" + \"\\x0A\",\n                \"\\x0A\", // line break\n                \"\\x0A\", // line break\n                \"\\x0A\", // line break\n                \"\\x0A\", // line break\n                \"\\x0A\", // line break\n                \"\\x0A\" // line break\n              );\n\n              printData.push(\"\\x1D\" + \"\\x56\" + \"\\x00\");\n\n              const doublePrint = printData.concat(printData);\n\n              qz.websocket\n                .connect()\n                .then(function () {\n                  const config = qz.configs.create(storeDetails.comSelected);\n                  return qz.print(config, doublePrint);\n                })\n                .then(qz.websocket.disconnect)\n                .catch(function (err) {\n                  console.error(err);\n                });\n            }\n          }\n        })\n        .catch((e) => {\n          console.log(\"Error has occured when trying to get WooOrders: \", e);\n          alert(\n            \"There was an error connecting to your woocommerce store. Please refresh the page to try again.\"\n          );\n          setisWooError(true);\n        });\n    }\n  }, 10000);\n\n  const fadeIn = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  const fadeOut = () => {\n    // Will change fadeAnim value to 0 in 3 seconds\n    Animated.timing(fadeAnim, {\n      toValue: 0,\n      duration: 500,\n      useNativeDriver: false,\n    }).start(() => setviewVisible(false));\n  };\n\n  const resetLoader = () => {\n    setviewVisible(true);\n    fadeIn();\n  };\n\n  const NavigationContent = () => {\n    return (\n      <>\n        {isSubscribed && <Route path=\"/\" component={AuthRoute} />}\n        {trialDetails.hasEnded && <TrialEnded resetLoader={resetLoader} />}\n        {isNewUser && <NewUserPayment resetLoader={resetLoader} />}\n      </>\n    );\n  };\n\n  return (\n    <Router>\n      <ScrollToTop />\n      <Switch>\n        {userS && (\n          <>\n            <NavigationContent />\n            {viewVisible && (\n              <Animated.View\n                style={{\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  backgroundColor: \"white\",\n                  position: \"absolute\",\n                  opacity: fadeAnim,\n                  height: \"100%\",\n                  width: \"100%\",\n                }}\n              >\n                <Image\n                  source={require(\"assets/loading.gif\")}\n                  style={{ width: 450, height: 450, resizeMode: \"contain\" }}\n                />\n              </Animated.View>\n            )}\n          </>\n        )}\n        {!userS && !loading && <Route path=\"/\" component={NonAuthRoute} />}\n      </Switch>\n    </Router>\n  );\n};\n\nexport default RouteManagerNew;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}